// @turf/jsts@2.7.2 downloaded from https://ga.jspm.io/npm:@turf/jsts@2.7.2/dist/jsts.min.js

var _=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:global;var p={};!function(_,m){p=m()}(0,(function(){function t(_,p){(null==p||p>_.length)&&(p=_.length);for(var m=0,k=Array(p);m<p;m++)k[m]=_[m];return k}function e(_,p,m){return p=u(p),function(_,p){if(p&&("object"==typeof p||"function"==typeof p))return p;if(void 0!==p)throw new TypeError("Derived constructors may only return object or undefined");return function(_){if(void 0===_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(_)}(_,h()?Reflect.construct(p,m||[],u(_).constructor):p.apply(_,m))}function n(_,p){if(!(_ instanceof p))throw new TypeError("Cannot call a class as a function")}function i(_,p,m){if(h())return Reflect.construct.apply(null,arguments);var k=[null];k.push.apply(k,p);var N=new(_.bind.apply(_,k));return m&&c(N,m.prototype),N}function r(_,p){for(var m=0;m<p.length;m++){var k=p[m];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(_,v(k.key),k)}}function s(_,p,m){return p&&r(_.prototype,p),m&&r(_,m),Object.defineProperty(_,"prototype",{writable:!1}),_}function a(_,p){var m="undefined"!=typeof Symbol&&_[Symbol.iterator]||_["@@iterator"];if(!m){if(Array.isArray(_)||(m=y(_))||p){m&&(_=m);var k=0,r=function(){};return{s:r,n:function(){return k>=_.length?{done:!0}:{done:!1,value:_[k++]}},e:function(_){throw _},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var N,T=!0,S=!1;return{s:function(){m=m.call(_)},n:function(){var _=m.next();return T=_.done,_},e:function(_){S=!0,N=_},f:function(){try{T||null==m.return||m.return()}finally{if(S)throw N}}}}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(_,p,m){var k=function(_,p){for(;!{}.hasOwnProperty.call(_,p)&&null!==(_=u(_)););return _}(_,p);if(k){var N=Object.getOwnPropertyDescriptor(k,p);return N.get?N.get.call(arguments.length<3?_:m):N.value}},o.apply(null,arguments)}function u(_){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)},u(_)}function l(_,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(p&&p.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),p&&c(_,p)}function h(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(_){}return(h=function(){return!!_})()}function c(_,p){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,p){return _.__proto__=p,_},c(_,p)}function f(_,p,m,k){var N=o(u(1&k?_.prototype:_),p,m);return 2&k&&"function"==typeof N?function(_){return N.apply(m,_)}:N}function g(_){return function(_){if(Array.isArray(_))return t(_)}(_)||function(_){if("undefined"!=typeof Symbol&&null!=_[Symbol.iterator]||null!=_["@@iterator"])return Array.from(_)}(_)||y(_)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(_){var p=function(_,p){if("object"!=typeof _||!_)return _;var m=_[Symbol.toPrimitive];if(void 0!==m){var k=m.call(_,p);if("object"!=typeof k)return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)}(_,"string");return"symbol"==typeof p?p:p+""}function y(_,p){if(_){if("string"==typeof _)return t(_,p);var m={}.toString.call(_).slice(8,-1);return"Object"===m&&_.constructor&&(m=_.constructor.name),"Map"===m||"Set"===m?Array.from(_):"Arguments"===m||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?t(_,p):void 0}}function d(p){var m="function"==typeof Map?new Map:void 0;return d=function(p){if(null===p||!function(_){try{return-1!==Function.toString.call(_).indexOf("[native code]")}catch(p){return"function"==typeof _}}(p))return p;if("function"!=typeof p)throw new TypeError("Super expression must either be null or a function");if(void 0!==m){if(m.has(p))return m.get(p);m.set(p,n)}function n(){return i(p,arguments,u(this||_).constructor)}return n.prototype=Object.create(p.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,p)},d(p)}var p=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"getEndCapStyle",value:function(){return(this||_)._endCapStyle}},{key:"isSingleSided",value:function(){return(this||_)._isSingleSided}},{key:"setQuadrantSegments",value:function(p){(this||_)._quadrantSegments=p,0===(this||_)._quadrantSegments&&((this||_)._joinStyle=t.JOIN_BEVEL),(this||_)._quadrantSegments<0&&((this||_)._joinStyle=t.JOIN_MITRE,(this||_)._mitreLimit=Math.abs((this||_)._quadrantSegments)),p<=0&&((this||_)._quadrantSegments=1),(this||_)._joinStyle!==t.JOIN_ROUND&&((this||_)._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return(this||_)._joinStyle}},{key:"setJoinStyle",value:function(p){(this||_)._joinStyle=p}},{key:"setSimplifyFactor",value:function(p){(this||_)._simplifyFactor=p<0?0:p}},{key:"getSimplifyFactor",value:function(){return(this||_)._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return(this||_)._quadrantSegments}},{key:"setEndCapStyle",value:function(p){(this||_)._endCapStyle=p}},{key:"getMitreLimit",value:function(){return(this||_)._mitreLimit}},{key:"setMitreLimit",value:function(p){(this||_)._mitreLimit=p}},{key:"setSingleSided",value:function(p){(this||_)._isSingleSided=p}}],[{key:"constructor_",value:function(){if((this||_)._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,(this||_)._endCapStyle=t.CAP_ROUND,(this||_)._joinStyle=t.JOIN_ROUND,(this||_)._mitreLimit=t.DEFAULT_MITRE_LIMIT,(this||_)._isSingleSided=!1,(this||_)._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var p=arguments[0];this.setQuadrantSegments(p)}else if(2===arguments.length){var m=arguments[0],k=arguments[1];this.setQuadrantSegments(m),this.setEndCapStyle(k)}else if(4===arguments.length){var N=arguments[0],T=arguments[1],S=arguments[2],L=arguments[3];this.setQuadrantSegments(N),this.setEndCapStyle(T),this.setJoinStyle(S),this.setMitreLimit(L)}}},{key:"bufferDistanceError",value:function(_){var p=Math.PI/2/_;return 1-Math.cos(p/2)}}])}();p.CAP_ROUND=1,p.CAP_FLAT=2,p.CAP_SQUARE=3,p.JOIN_ROUND=1,p.JOIN_MITRE=2,p.JOIN_BEVEL=3,p.DEFAULT_QUADRANT_SEGMENTS=8,p.DEFAULT_MITRE_LIMIT=5,p.DEFAULT_SIMPLIFY_FACTOR=.01;var m=function(p){function i(p){var m;return n(this||_,i),(m=e(this||_,i,[p])).name=Object.keys({Exception:i})[0],m}return l(i,p),s(i,[{key:"toString",value:function(){return(this||_).message}}])}(d(Error)),k=function(p){function i(p){var m;return n(this||_,i),(m=e(this||_,i,[p])).name=Object.keys({IllegalArgumentException:i})[0],m}return l(i,p),s(i)}(m),N=function(){return s((function t(){n(this||_,t)}),[{key:"filter",value:function(_){}}])}();function x(){}function I(){}function E(){}var T,S,L,C,R,w,O,b,M=function(){return s((function t(){n(this||_,t)}),null,[{key:"equalsWithTolerance",value:function(_,p,m){return Math.abs(_-p)<=m}}])}(),D=function(){return s((function t(p,m){n(this||_,t),(this||_).low=m||0,(this||_).high=p||0}),null,[{key:"toBinaryString",value:function(_){var p,m="";for(p=2147483648;p>0;p>>>=1)m+=(_.high&p)===p?"1":"0";for(p=2147483648;p>0;p>>>=1)m+=(_.low&p)===p?"1":"0";return m}}])}();function A(){}function P(){}A.NaN=NaN,A.isNaN=function(_){return Number.isNaN(_)},A.isInfinite=function(_){return!Number.isFinite(_)},A.MAX_VALUE=Number.MAX_VALUE,A.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,A.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?(w=2146435072,O=new Float64Array(1),b=new Int32Array(O.buffer),A.doubleToLongBits=function(_){O[0]=_;var p=0|b[0],m=0|b[1];return(m&w)===w&&1048575&m&&0!==p&&(p=0,m=2146959360),new D(m,p)},A.longBitsToDouble=function(_){return b[0]=_.low,b[1]=_.high,O[0]}):(T=1023,S=Math.log2,L=Math.floor,C=Math.pow,R=function(){for(var _=53;_>0;_--){var p=C(2,_)-1;if(L(S(p))+1===_)return p}return 0}(),A.doubleToLongBits=function(_){var p,m,k,N,w,O,b,M,F;if(_<0||1/_===Number.NEGATIVE_INFINITY?(O=1<<31,_=-_):O=0,0===_)return new D(M=O,F=0);if(_===1/0)return new D(M=2146435072|O,F=0);if(_!=_)return new D(M=2146959360,F=0);if(N=0,F=0,(p=L(_))>1)if(p<=R)(N=L(S(p)))<=20?(F=0,M=p<<20-N&1048575):(F=p%(m=C(2,k=N-20))<<32-k,M=p/m&1048575);else for(k=p,F=0;0!==(k=L(m=k/2));)N++,F>>>=1,F|=(1&M)<<31,M>>>=1,m!==k&&(M|=524288);if(b=N+T,w=0===p,p=_-p,N<52&&0!==p)for(k=0;;){if((m=2*p)>=1?(p=m-1,w?(b--,w=!1):(k<<=1,k|=1,N++)):(p=m,w?0==--b&&(N++,w=!1):(k<<=1,N++)),20===N)M|=k,k=0;else if(52===N){F|=k;break}if(1===m){N<20?M|=k<<20-N:N<52&&(F|=k<<52-N);break}}return M|=b<<20,new D(M|=O,F)},A.longBitsToDouble=function(_){var p,m,k,N,S=_.high,L=_.low,R=S&1<<31?-1:1;for(k=((2146435072&S)>>20)-T,N=0,m=1<<19,p=1;p<=20;p++)S&m&&(N+=C(2,-p)),m>>>=1;for(m=1<<31,p=21;p<=52;p++)L&m&&(N+=C(2,-p)),m>>>=1;if(-1023===k){if(0===N)return 0*R;k=-1022}else{if(1024===k)return 0===N?R/0:NaN;N+=1}return R*N*C(2,k)});var F=function(p){function i(p){var m;return n(this||_,i),(m=e(this||_,i,[p])).name=Object.keys({RuntimeException:i})[0],m}return l(i,p),s(i)}(m),G=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,null,[{key:"constructor_",value:function(){if(0===arguments.length)F.constructor_.call(this||_);else if(1===arguments.length){var p=arguments[0];F.constructor_.call(this||_,p)}}}])}(F),q=function(){function t(){n(this||_,t)}return s(t,null,[{key:"shouldNeverReachHere",value:function(){if(0===arguments.length)t.shouldNeverReachHere(null);else if(1===arguments.length){var _=arguments[0];throw new G("Should never reach here"+(null!==_?": "+_:""))}}},{key:"isTrue",value:function(){if(1===arguments.length){var _=arguments[0];t.isTrue(_,null)}else if(2===arguments.length){var p=arguments[1];if(!arguments[0])throw null===p?new G:new G(p)}}},{key:"equals",value:function(){if(2===arguments.length){var _=arguments[0],p=arguments[1];t.equals(_,p,null)}else if(3===arguments.length){var m=arguments[0],k=arguments[1],N=arguments[2];if(!k.equals(m))throw new G("Expected "+m+" but encountered "+k+(null!==N?": "+N:""))}}}])}(),Y=new ArrayBuffer(8),X=new Float64Array(Y),z=new Int32Array(Y),B=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"getM",value:function(){return A.NaN}},{key:"setOrdinate",value:function(p,m){switch(p){case t.X:(this||_).x=m;break;case t.Y:(this||_).y=m;break;case t.Z:this.setZ(m);break;default:throw new k("Invalid ordinate index: "+p)}}},{key:"equals2D",value:function(){if(1===arguments.length){var p=arguments[0];return(this||_).x===p.x&&(this||_).y===p.y}if(2===arguments.length){var m=arguments[0],k=arguments[1];return!!M.equalsWithTolerance((this||_).x,m.x,k)&&!!M.equalsWithTolerance((this||_).y,m.y,k)}}},{key:"setM",value:function(_){throw new k("Invalid ordinate index: "+t.M)}},{key:"getZ",value:function(){return(this||_).z}},{key:"getOrdinate",value:function(p){switch(p){case t.X:return(this||_).x;case t.Y:return(this||_).y;case t.Z:return this.getZ()}throw new k("Invalid ordinate index: "+p)}},{key:"equals3D",value:function(p){return(this||_).x===p.x&&(this||_).y===p.y&&(this.getZ()===p.getZ()||A.isNaN(this.getZ())&&A.isNaN(p.getZ()))}},{key:"equals",value:function(_){return _ instanceof t&&this.equals2D(_)}},{key:"equalInZ",value:function(_,p){return M.equalsWithTolerance(this.getZ(),_.getZ(),p)}},{key:"setX",value:function(p){(this||_).x=p}},{key:"compareTo",value:function(p){var m=p;return(this||_).x<m.x?-1:(this||_).x>m.x?1:(this||_).y<m.y?-1:(this||_).y>m.y?1:0}},{key:"getX",value:function(){return(this||_).x}},{key:"setZ",value:function(p){(this||_).z=p}},{key:"clone",value:function(){try{return null}catch(_){if(_ instanceof CloneNotSupportedException)return q.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw _}}},{key:"copy",value:function(){return new t(this||_)}},{key:"toString",value:function(){return"("+(this||_).x+", "+(this||_).y+", "+this.getZ()+")"}},{key:"distance3D",value:function(p){var m=(this||_).x-p.x,k=(this||_).y-p.y,N=this.getZ()-p.getZ();return Math.sqrt(m*m+k*k+N*N)}},{key:"getY",value:function(){return(this||_).y}},{key:"setY",value:function(p){(this||_).y=p}},{key:"distance",value:function(p){var m=(this||_).x-p.x,k=(this||_).y-p.y;return Math.sqrt(m*m+k*k)}},{key:"hashCode",value:function(){var p=17;return 37*(p=37*p+t.hashCode((this||_).x))+t.hashCode((this||_).y)}},{key:"setCoordinate",value:function(p){(this||_).x=p.x,(this||_).y=p.y,(this||_).z=p.getZ()}},{key:"interfaces_",get:function(){return[x,I,E]}}],[{key:"constructor_",value:function(){if((this||_).x=null,(this||_).y=null,(this||_).z=null,0===arguments.length)t.constructor_.call(this||_,0,0);else if(1===arguments.length){var p=arguments[0];t.constructor_.call(this||_,p.x,p.y,p.getZ())}else if(2===arguments.length){var m=arguments[0],k=arguments[1];t.constructor_.call(this||_,m,k,t.NULL_ORDINATE)}else if(3===arguments.length){var N=arguments[0],T=arguments[1],S=arguments[2];(this||_).x=N,(this||_).y=T,(this||_).z=S}}},{key:"hashCode",value:function(_){return X[0]=_,z[0]^z[1]}}])}(),U=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"compare",value:function(p,m){var k=t.compare(p.x,m.x);if(0!==k)return k;var N=t.compare(p.y,m.y);return 0!==N?N:(this||_)._dimensionsToTest<=2?0:t.compare(p.getZ(),m.getZ())}},{key:"interfaces_",get:function(){return[P]}}],[{key:"constructor_",value:function(){if((this||_)._dimensionsToTest=2,0===arguments.length)t.constructor_.call(this||_,2);else if(1===arguments.length){var p=arguments[0];if(2!==p&&3!==p)throw new k("only 2 or 3 dimensions may be specified");(this||_)._dimensionsToTest=p}}},{key:"compare",value:function(_,p){return _<p?-1:_>p?1:A.isNaN(_)?A.isNaN(p)?0:-1:A.isNaN(p)?1:0}}])}();B.DimensionalComparator=U,B.NULL_ORDINATE=A.NaN,B.X=0,B.Y=1,B.Z=2,B.M=3;var V=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(p){if(!(p instanceof t))return!1;var m=p;return this.isNull()?m.isNull():(this||_)._maxx===m.getMaxX()&&(this||_)._maxy===m.getMaxY()&&(this||_)._minx===m.getMinX()&&(this||_)._miny===m.getMinY()}},{key:"intersection",value:function(p){if(this.isNull()||p.isNull()||!this.intersects(p))return new t;var m=(this||_)._minx>p._minx?(this||_)._minx:p._minx,k=(this||_)._miny>p._miny?(this||_)._miny:p._miny;return new t(m,(this||_)._maxx<p._maxx?(this||_)._maxx:p._maxx,k,(this||_)._maxy<p._maxy?(this||_)._maxy:p._maxy)}},{key:"isNull",value:function(){return(this||_)._maxx<(this||_)._minx}},{key:"getMaxX",value:function(){return(this||_)._maxx}},{key:"covers",value:function(){if(1===arguments.length){if(arguments[0]instanceof B){var p=arguments[0];return this.covers(p.x,p.y)}if(arguments[0]instanceof t){var m=arguments[0];return!this.isNull()&&!m.isNull()&&m.getMinX()>=(this||_)._minx&&m.getMaxX()<=(this||_)._maxx&&m.getMinY()>=(this||_)._miny&&m.getMaxY()<=(this||_)._maxy}}else if(2===arguments.length){var k=arguments[0],N=arguments[1];return!this.isNull()&&k>=(this||_)._minx&&k<=(this||_)._maxx&&N>=(this||_)._miny&&N<=(this||_)._maxy}}},{key:"intersects",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var p=arguments[0];return!this.isNull()&&!p.isNull()&&!(p._minx>(this||_)._maxx||p._maxx<(this||_)._minx||p._miny>(this||_)._maxy||p._maxy<(this||_)._miny)}if(arguments[0]instanceof B){var m=arguments[0];return this.intersects(m.x,m.y)}}else if(2===arguments.length){if(arguments[0]instanceof B&&arguments[1]instanceof B){var k=arguments[0],N=arguments[1];return!this.isNull()&&!((k.x<N.x?k.x:N.x)>(this||_)._maxx)&&!((k.x>N.x?k.x:N.x)<(this||_)._minx)&&!((k.y<N.y?k.y:N.y)>(this||_)._maxy)&&!((k.y>N.y?k.y:N.y)<(this||_)._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var T=arguments[0],S=arguments[1];return!this.isNull()&&!(T>(this||_)._maxx||T<(this||_)._minx||S>(this||_)._maxy||S<(this||_)._miny)}}}},{key:"getMinY",value:function(){return(this||_)._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var _=this.getWidth(),p=this.getHeight();return Math.sqrt(_*_+p*p)}},{key:"getMinX",value:function(){return(this||_)._minx}},{key:"expandToInclude",value:function(){if(1===arguments.length){if(arguments[0]instanceof B){var p=arguments[0];this.expandToInclude(p.x,p.y)}else if(arguments[0]instanceof t){var m=arguments[0];if(m.isNull())return null;this.isNull()?((this||_)._minx=m.getMinX(),(this||_)._maxx=m.getMaxX(),(this||_)._miny=m.getMinY(),(this||_)._maxy=m.getMaxY()):(m._minx<(this||_)._minx&&((this||_)._minx=m._minx),m._maxx>(this||_)._maxx&&((this||_)._maxx=m._maxx),m._miny<(this||_)._miny&&((this||_)._miny=m._miny),m._maxy>(this||_)._maxy&&((this||_)._maxy=m._maxy))}}else if(2===arguments.length){var k=arguments[0],N=arguments[1];this.isNull()?((this||_)._minx=k,(this||_)._maxx=k,(this||_)._miny=N,(this||_)._maxy=N):(k<(this||_)._minx&&((this||_)._minx=k),k>(this||_)._maxx&&((this||_)._maxx=k),N<(this||_)._miny&&((this||_)._miny=N),N>(this||_)._maxy&&((this||_)._maxy=N))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var _=this.getWidth(),p=this.getHeight();return _<p?_:p}},{key:"getWidth",value:function(){return this.isNull()?0:(this||_)._maxx-(this||_)._minx}},{key:"compareTo",value:function(p){var m=p;return this.isNull()?m.isNull()?0:-1:m.isNull()?1:(this||_)._minx<m._minx?-1:(this||_)._minx>m._minx?1:(this||_)._miny<m._miny?-1:(this||_)._miny>m._miny?1:(this||_)._maxx<m._maxx?-1:(this||_)._maxx>m._maxx?1:(this||_)._maxy<m._maxy?-1:(this||_)._maxy>m._maxy?1:0}},{key:"translate",value:function(_,p){if(this.isNull())return null;this.init(this.getMinX()+_,this.getMaxX()+_,this.getMinY()+p,this.getMaxY()+p)}},{key:"copy",value:function(){return new t(this||_)}},{key:"toString",value:function(){return"Env["+(this||_)._minx+" : "+(this||_)._maxx+", "+(this||_)._miny+" : "+(this||_)._maxy+"]"}},{key:"setToNull",value:function(){(this||_)._minx=0,(this||_)._maxx=-1,(this||_)._miny=0,(this||_)._maxy=-1}},{key:"disjoint",value:function(p){return!(!this.isNull()&&!p.isNull())||p._minx>(this||_)._maxx||p._maxx<(this||_)._minx||p._miny>(this||_)._maxy||p._maxy<(this||_)._miny}},{key:"getHeight",value:function(){return this.isNull()?0:(this||_)._maxy-(this||_)._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var _=this.getWidth(),p=this.getHeight();return _>p?_:p}},{key:"expandBy",value:function(){if(1===arguments.length){var p=arguments[0];this.expandBy(p,p)}else if(2===arguments.length){var m=arguments[0],k=arguments[1];if(this.isNull())return null;(this||_)._minx-=m,(this||_)._maxx+=m,(this||_)._miny-=k,(this||_)._maxy+=k,((this||_)._minx>(this||_)._maxx||(this||_)._miny>(this||_)._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var _=arguments[0];return this.covers(_)}if(arguments[0]instanceof B){var p=arguments[0];return this.covers(p)}}else if(2===arguments.length){var m=arguments[0],k=arguments[1];return this.covers(m,k)}}},{key:"centre",value:function(){return this.isNull()?null:new B((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof B){var p=arguments[0];this.init(p.x,p.x,p.y,p.y)}else if(arguments[0]instanceof t){var m=arguments[0];(this||_)._minx=m._minx,(this||_)._maxx=m._maxx,(this||_)._miny=m._miny,(this||_)._maxy=m._maxy}}else if(2===arguments.length){var k=arguments[0],N=arguments[1];this.init(k.x,N.x,k.y,N.y)}else if(4===arguments.length){var T=arguments[0],S=arguments[1],L=arguments[2],C=arguments[3];T<S?((this||_)._minx=T,(this||_)._maxx=S):((this||_)._minx=S,(this||_)._maxx=T),L<C?((this||_)._miny=L,(this||_)._maxy=C):((this||_)._miny=C,(this||_)._maxy=L)}}},{key:"getMaxY",value:function(){return(this||_)._maxy}},{key:"distance",value:function(p){if(this.intersects(p))return 0;var m=0;(this||_)._maxx<p._minx?m=p._minx-(this||_)._maxx:(this||_)._minx>p._maxx&&(m=(this||_)._minx-p._maxx);var k=0;return(this||_)._maxy<p._miny?k=p._miny-(this||_)._maxy:(this||_)._miny>p._maxy&&(k=(this||_)._miny-p._maxy),0===m?k:0===k?m:Math.sqrt(m*m+k*k)}},{key:"hashCode",value:function(){var p=17;return 37*(p=37*(p=37*(p=37*p+B.hashCode((this||_)._minx))+B.hashCode((this||_)._maxx))+B.hashCode((this||_)._miny))+B.hashCode((this||_)._maxy)}},{key:"interfaces_",get:function(){return[x,E]}}],[{key:"constructor_",value:function(){if((this||_)._minx=null,(this||_)._maxx=null,(this||_)._miny=null,(this||_)._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof B){var p=arguments[0];this.init(p.x,p.x,p.y,p.y)}else if(arguments[0]instanceof t){var m=arguments[0];this.init(m)}}else if(2===arguments.length){var k=arguments[0],N=arguments[1];this.init(k.x,N.x,k.y,N.y)}else if(4===arguments.length){var T=arguments[0],S=arguments[1],L=arguments[2],C=arguments[3];this.init(T,S,L,C)}}},{key:"intersects",value:function(){if(3===arguments.length){var _=arguments[0],p=arguments[1],m=arguments[2];return m.x>=(_.x<p.x?_.x:p.x)&&m.x<=(_.x>p.x?_.x:p.x)&&m.y>=(_.y<p.y?_.y:p.y)&&m.y<=(_.y>p.y?_.y:p.y)}if(4===arguments.length){var k=arguments[0],N=arguments[1],T=arguments[2],S=arguments[3],L=Math.min(T.x,S.x),C=Math.max(T.x,S.x),R=Math.min(k.x,N.x),w=Math.max(k.x,N.x);return!(R>C)&&!(w<L)&&(L=Math.min(T.y,S.y),C=Math.max(T.y,S.y),R=Math.min(k.y,N.y),w=Math.max(k.y,N.y),!(R>C)&&!(w<L))}}}])}(),H=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===t.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return(this||_)._factory}},{key:"getGeometryN",value:function(p){return this||_}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(p){return(this||_)===p||this.equalsExact(p,0)}},{key:"geometryChanged",value:function(){this.apply(t.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){(this||_)._envelope=null}},{key:"equalsNorm",value:function(_){return null!==_&&this.norm().equalsExact(_.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var _;if(1===arguments.length){var p=arguments[0];return _=p,this.getTypeCode()!==_.getTypeCode()?this.getTypeCode()-_.getTypeCode():this.isEmpty()&&_.isEmpty()?0:this.isEmpty()?-1:_.isEmpty()?1:this.compareToSameClass(p)}if(2===arguments.length){var m=arguments[0],k=arguments[1];return _=m,this.getTypeCode()!==_.getTypeCode()?this.getTypeCode()-_.getTypeCode():this.isEmpty()&&_.isEmpty()?0:this.isEmpty()?-1:_.isEmpty()?1:this.compareToSameClass(m,k)}}},{key:"getUserData",value:function(){return(this||_)._userData}},{key:"getSRID",value:function(){return(this||_)._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(_){if(_.getTypeCode()===t.TYPECODE_GEOMETRYCOLLECTION)throw new k("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(_,p,m){return 0===m?_.equals(p):_.distance(p)<=m}},{key:"norm",value:function(){var _=this.copy();return _.normalize(),_}},{key:"reverse",value:function(){var p=this.reverseInternal();return null!=(this||_).envelope&&(p.envelope=(this||_).envelope.copy()),p.setSRID(this.getSRID()),p}},{key:"copy",value:function(){var p=this.copyInternal();return p.envelope=null==(this||_)._envelope?null:(this||_)._envelope.copy(),p._SRID=(this||_)._SRID,p._userData=(this||_)._userData,p}},{key:"getPrecisionModel",value:function(){return(this||_)._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return null===(this||_)._envelope&&((this||_)._envelope=this.computeEnvelopeInternal()),new V((this||_)._envelope)}},{key:"setSRID",value:function(p){(this||_)._SRID=p}},{key:"setUserData",value:function(p){(this||_)._userData=p}},{key:"compare",value:function(_,p){for(var m=_.iterator(),k=p.iterator();m.hasNext()&&k.hasNext();){var N=m.next(),T=k.next(),S=N.compareTo(T);if(0!==S)return S}return m.hasNext()?1:k.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(_){return this.getClass()===_.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===t.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===t.TYPECODE_MULTIPOINT||this.getTypeCode()===t.TYPECODE_MULTILINESTRING||this.getTypeCode()===t.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[I,x,E]}},{key:"getClass",value:function(){return t}}],[{key:"hasNonEmptyElements",value:function(_){for(var p=0;p<_.length;p++)if(!_[p].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(_){for(var p=0;p<_.length;p++)if(null===_[p])return!0;return!1}}])}();H.constructor_=function(p){p&&((this||_)._envelope=null,(this||_)._userData=null,(this||_)._factory=p,(this||_)._SRID=p.getSRID())},H.TYPECODE_POINT=0,H.TYPECODE_MULTIPOINT=1,H.TYPECODE_LINESTRING=2,H.TYPECODE_LINEARRING=3,H.TYPECODE_MULTILINESTRING=4,H.TYPECODE_POLYGON=5,H.TYPECODE_MULTIPOLYGON=6,H.TYPECODE_GEOMETRYCOLLECTION=7,H.TYPENAME_POINT="Point",H.TYPENAME_MULTIPOINT="MultiPoint",H.TYPENAME_LINESTRING="LineString",H.TYPENAME_LINEARRING="LinearRing",H.TYPENAME_MULTILINESTRING="MultiLineString",H.TYPENAME_POLYGON="Polygon",H.TYPENAME_MULTIPOLYGON="MultiPolygon",H.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",H.geometryChangedFilter={get interfaces_(){return[N]},filter:function(_){_.geometryChangedAction()}};var Z=function(){function t(){n(this||_,t)}return s(t,null,[{key:"toLocationSymbol",value:function(_){switch(_){case t.EXTERIOR:return"e";case t.BOUNDARY:return"b";case t.INTERIOR:return"i";case t.NONE:return"-"}throw new k("Unknown location value: "+_)}}])}();Z.INTERIOR=0,Z.BOUNDARY=1,Z.EXTERIOR=2,Z.NONE=-1;var j=function(){return s((function t(){n(this||_,t)}),[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),W=function(p){function i(p){var m;return n(this||_,i),(m=e(this||_,i,[p])).name=Object.keys({NoSuchElementException:i})[0],m}return l(i,p),s(i)}(m),K=function(p){function i(p){var m;return n(this||_,i),(m=e(this||_,i,[p])).name=Object.keys({UnsupportedOperationException:i})[0],m}return l(i,p),s(i)}(m),J=function(p){function i(){return n(this||_,i),e(this||_,i,arguments)}return l(i,p),s(i,[{key:"contains",value:function(){}}])}(j),Q=function(p){function i(p){var m;return n(this||_,i),(m=e(this||_,i)).map=new Map,p instanceof j&&m.addAll(p),m}return l(i,p),s(i,[{key:"contains",value:function(p){var m=p.hashCode?p.hashCode():p;return!!(this||_).map.has(m)}},{key:"add",value:function(p){var m=p.hashCode?p.hashCode():p;return!(this||_).map.has(m)&&!!(this||_).map.set(m,p)}},{key:"addAll",value:function(_){var p,m=a(_);try{for(m.s();!(p=m.n()).done;){var k=p.value;this.add(k)}}catch(_){m.e(_)}finally{m.f()}return!0}},{key:"remove",value:function(){throw new K}},{key:"size",value:function(){return(this||_).map.size}},{key:"isEmpty",value:function(){return 0===(this||_).map.size}},{key:"toArray",value:function(){return Array.from((this||_).map.values())}},{key:"iterator",value:function(){return new $((this||_).map)}},{key:Symbol.iterator,value:function(){return(this||_).map}}])}(J),$=function(){return s((function t(p){n(this||_,t),(this||_).iterator=p.values();var m=(this||_).iterator.next(),k=m.done,N=m.value;(this||_).done=k,(this||_).value=N}),[{key:"next",value:function(){if((this||_).done)throw new W;var p=(this||_).value,m=(this||_).iterator.next(),k=m.done,N=m.value;return(this||_).done=k,(this||_).value=N,p}},{key:"hasNext",value:function(){return!(this||_).done}},{key:"remove",value:function(){throw new K}}])}(),tt=function(){function t(){n(this||_,t)}return s(t,null,[{key:"opposite",value:function(_){return _===t.LEFT?t.RIGHT:_===t.RIGHT?t.LEFT:_}}])}();tt.ON=0,tt.LEFT=1,tt.RIGHT=2;var et=function(p){function i(p){var m;return n(this||_,i),(m=e(this||_,i,[p])).name=Object.keys({EmptyStackException:i})[0],m}return l(i,p),s(i)}(m),nt=function(p){function i(p){var m;return n(this||_,i),(m=e(this||_,i,[p])).name=Object.keys({IndexOutOfBoundsException:i})[0],m}return l(i,p),s(i)}(m),it=function(p){function i(){return n(this||_,i),e(this||_,i,arguments)}return l(i,p),s(i,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(j),st=function(p){function i(){var p;return n(this||_,i),(p=e(this||_,i)).array=[],p}return l(i,p),s(i,[{key:"add",value:function(p){return(this||_).array.push(p),!0}},{key:"get",value:function(p){if(p<0||p>=this.size())throw new nt;return(this||_).array[p]}},{key:"push",value:function(p){return(this||_).array.push(p),p}},{key:"pop",value:function(){if(0===(this||_).array.length)throw new et;return(this||_).array.pop()}},{key:"peek",value:function(){if(0===(this||_).array.length)throw new et;return(this||_).array[(this||_).array.length-1]}},{key:"empty",value:function(){return 0===(this||_).array.length}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(p){return(this||_).array.indexOf(p)}},{key:"size",value:function(){return(this||_).array.length}},{key:"toArray",value:function(){return(this||_).array.slice()}}])}(it);function rt(_,p){return _.interfaces_&&_.interfaces_.indexOf(p)>-1}var at=function(){return s((function t(p){n(this||_,t),(this||_).str=p}),[{key:"append",value:function(p){(this||_).str+=p}},{key:"setCharAt",value:function(p,m){(this||_).str=(this||_).str.substr(0,p)+m+(this||_).str.substr(p+1)}},{key:"toString",value:function(){return(this||_).str}}])}(),ot=function(){function t(p){n(this||_,t),(this||_).value=p}return s(t,[{key:"intValue",value:function(){return(this||_).value}},{key:"compareTo",value:function(p){return(this||_).value<p?-1:(this||_).value>p?1:0}}],[{key:"compare",value:function(_,p){return _<p?-1:_>p?1:0}},{key:"isNan",value:function(_){return Number.isNaN(_)}},{key:"valueOf",value:function(_){return new t(_)}}])}(),ut=function(){return s((function t(){n(this||_,t)}),null,[{key:"isWhitespace",value:function(_){return _<=32&&_>=0||127===_}},{key:"toUpperCase",value:function(_){return _.toUpperCase()}}])}(),lt=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"le",value:function(p){return(this||_)._hi<p._hi||(this||_)._hi===p._hi&&(this||_)._lo<=p._lo}},{key:"extractSignificantDigits",value:function(_,p){var m=this.abs(),k=t.magnitude(m._hi),N=t.TEN.pow(k);(m=m.divide(N)).gt(t.TEN)?(m=m.divide(t.TEN),k+=1):m.lt(t.ONE)&&(m=m.multiply(t.TEN),k-=1);for(var T=k+1,S=new at,L=t.MAX_PRINT_DIGITS-1,C=0;C<=L;C++){_&&C===T&&S.append(".");var R=Math.trunc(m._hi);if(R<0)break;var w=!1,O=0;R>9?(w=!0,O="9"):O="0"+R,S.append(O),m=m.subtract(t.valueOf(R)).multiply(t.TEN),w&&m.selfAdd(t.TEN);var b=!0,M=t.magnitude(m._hi);if(M<0&&Math.abs(M)>=L-C&&(b=!1),!b)break}return p[0]=k,S.toString()}},{key:"sqr",value:function(){return this.multiply(this||_)}},{key:"doubleValue",value:function(){return(this||_)._hi+(this||_)._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof t){var _=arguments[0];return this.add(_.negate())}if("number"==typeof arguments[0]){var p=arguments[0];return this.add(-p)}}},{key:"equals",value:function(){if(1===arguments.length&&arguments[0]instanceof t){var p=arguments[0];return(this||_)._hi===p._hi&&(this||_)._lo===p._lo}}},{key:"isZero",value:function(){return 0===(this||_)._hi&&0===(this||_)._lo}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof t){var p=arguments[0];return this.isNaN()?this||_:this.selfAdd(-p._hi,-p._lo)}if("number"==typeof arguments[0]){var m=arguments[0];return this.isNaN()?this||_:this.selfAdd(-m,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(p){return this.le(p)?this||_:p}},{key:"selfDivide",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var p=arguments[0];return this.selfDivide(p._hi,p._lo)}if("number"==typeof arguments[0]){var m=arguments[0];return this.selfDivide(m,0)}}else if(2===arguments.length){var k,N,T,S,L=arguments[0],C=arguments[1],R=null,w=null,O=null,b=null;return T=(this||_)._hi/L,b=(R=(O=t.SPLIT*T)-(R=O-T))*(w=(b=t.SPLIT*L)-(w=b-L))-(S=T*L)+R*(N=L-w)+(k=T-R)*w+k*N,b=T+(O=((this||_)._hi-S-b+(this||_)._lo-T*C)/L),(this||_)._hi=b,(this||_)._lo=T-b+O,this||_}}},{key:"dump",value:function(){return"DD<"+(this||_)._hi+", "+(this||_)._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof t){var p,m,k,N,T=arguments[0],S=null,L=null,C=null,R=null;return p=(k=(this||_)._hi/T._hi)-(S=(C=t.SPLIT*k)-(S=C-k)),R=S*(L=(R=t.SPLIT*T._hi)-(L=R-T._hi))-(N=k*T._hi)+S*(m=T._hi-L)+p*L+p*m,new t(R=k+(C=((this||_)._hi-N-R+(this||_)._lo-k*T._lo)/T._hi),k-R+C)}if("number"==typeof arguments[0]){var w=arguments[0];return A.isNaN(w)?t.createNaN():t.copy(this||_).selfDivide(w,0)}}},{key:"ge",value:function(p){return(this||_)._hi>p._hi||(this||_)._hi===p._hi&&(this||_)._lo>=p._lo}},{key:"pow",value:function(p){if(0===p)return t.valueOf(1);var m=new t(this||_),k=t.valueOf(1),N=Math.abs(p);if(N>1)for(;N>0;)N%2==1&&k.selfMultiply(m),(N/=2)>0&&(m=m.sqr());else k=m;return p<0?k.reciprocal():k}},{key:"ceil",value:function(){if(this.isNaN())return t.NaN;var p=Math.ceil((this||_)._hi),m=0;return p===(this||_)._hi&&(m=Math.ceil((this||_)._lo)),new t(p,m)}},{key:"compareTo",value:function(p){var m=p;return(this||_)._hi<m._hi?-1:(this||_)._hi>m._hi?1:(this||_)._lo<m._lo?-1:(this||_)._lo>m._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this||_:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof t){var p=arguments[0];return this.init(p),this||_}if("number"==typeof arguments[0]){var m=arguments[0];return this.init(m),this||_}}},{key:"max",value:function(p){return this.ge(p)?this||_:p}},{key:"sqrt",value:function(){if(this.isZero())return t.valueOf(0);if(this.isNegative())return t.NaN;var p=1/Math.sqrt((this||_)._hi),m=(this||_)._hi*p,k=t.valueOf(m),N=this.subtract(k.sqr())._hi*(.5*p);return k.add(N)}},{key:"selfAdd",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var p=arguments[0];return this.selfAdd(p._hi,p._lo)}if("number"==typeof arguments[0]){var m,k,N,T,S,L=arguments[0],C=null;return C=(N=(this||_)._hi+L)-(T=N-(this||_)._hi),k=(S=(C=L-T+((this||_)._hi-C))+(this||_)._lo)+(N-(m=N+S)),(this||_)._hi=m+k,(this||_)._lo=k+(m-(this||_)._hi),this||_}}else if(2===arguments.length){var R,w,O,b,M=arguments[0],D=arguments[1],F=null,G=null,q=null;O=(this||_)._hi+M,w=(this||_)._lo+D,G=O-(q=O-(this||_)._hi),F=w-(b=w-(this||_)._lo);var Y=(R=O+(q=(G=M-q+((this||_)._hi-G))+w))+(q=(F=D-b+((this||_)._lo-F))+(q+(O-R))),X=q+(R-Y);return(this||_)._hi=Y,(this||_)._lo=X,this||_}}},{key:"selfMultiply",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var p=arguments[0];return this.selfMultiply(p._hi,p._lo)}if("number"==typeof arguments[0]){var m=arguments[0];return this.selfMultiply(m,0)}}else if(2===arguments.length){var k,N,T=arguments[0],S=arguments[1],L=null,C=null,R=null,w=null;L=(R=t.SPLIT*(this||_)._hi)-(this||_)._hi,w=t.SPLIT*T,L=R-L,k=(this||_)._hi-L,C=w-T;var O=(R=(this||_)._hi*T)+(w=L*(C=w-C)-R+L*(N=T-C)+k*C+k*N+((this||_)._hi*S+(this||_)._lo*T)),b=w+(L=R-O);return(this||_)._hi=O,(this||_)._lo=b,this||_}}},{key:"selfSqr",value:function(){return this.selfMultiply(this||_)}},{key:"floor",value:function(){if(this.isNaN())return t.NaN;var p=Math.floor((this||_)._hi),m=0;return p===(this||_)._hi&&(m=Math.floor((this||_)._lo)),new t(p,m)}},{key:"negate",value:function(){return this.isNaN()?this||_:new t(-(this||_)._hi,-(this||_)._lo)}},{key:"clone",value:function(){try{return null}catch(_){if(_ instanceof CloneNotSupportedException)return null;throw _}}},{key:"multiply",value:function(){if(arguments[0]instanceof t){var p=arguments[0];return p.isNaN()?t.createNaN():t.copy(this||_).selfMultiply(p)}if("number"==typeof arguments[0]){var m=arguments[0];return A.isNaN(m)?t.createNaN():t.copy(this||_).selfMultiply(m,0)}}},{key:"isNaN",value:function(){return A.isNaN((this||_)._hi)}},{key:"intValue",value:function(){return Math.trunc((this||_)._hi)}},{key:"toString",value:function(){var p=t.magnitude((this||_)._hi);return p>=-3&&p<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var _=this.getSpecialNumberString();if(null!==_)return _;var p=new Array(1).fill(null),m=this.extractSignificantDigits(!0,p),k=p[0]+1,N=m;if("."===m.charAt(0))N="0"+m;else if(k<0)N="0."+t.stringOfChar("0",-k)+m;else if(-1===m.indexOf(".")){var T=k-m.length;N=m+t.stringOfChar("0",T)+".0"}return this.isNegative()?"-"+N:N}},{key:"reciprocal",value:function(){var p,m,k,N,T=null,S=null,L=null,C=null;p=(k=1/(this||_)._hi)-(T=(L=t.SPLIT*k)-(T=L-k)),S=(C=t.SPLIT*(this||_)._hi)-(this||_)._hi;var R=k+(L=(1-(N=k*(this||_)._hi)-(C=T*(S=C-S)-N+T*(m=(this||_)._hi-S)+p*S+p*m)-k*(this||_)._lo)/(this||_)._hi);return new t(R,k-R+L)}},{key:"toSciNotation",value:function(){if(this.isZero())return t.SCI_NOT_ZERO;var _=this.getSpecialNumberString();if(null!==_)return _;var p=new Array(1).fill(null),m=this.extractSignificantDigits(!1,p),k=t.SCI_NOT_EXPONENT_CHAR+p[0];if("0"===m.charAt(0))throw new IllegalStateException("Found leading zero: "+m);var N="";m.length>1&&(N=m.substring(1));var T=m.charAt(0)+"."+N;return this.isNegative()?"-"+T+k:T+k}},{key:"abs",value:function(){return this.isNaN()?t.NaN:this.isNegative()?this.negate():new t(this||_)}},{key:"isPositive",value:function(){return(this||_)._hi>0||0===(this||_)._hi&&(this||_)._lo>0}},{key:"lt",value:function(p){return(this||_)._hi<p._hi||(this||_)._hi===p._hi&&(this||_)._lo<p._lo}},{key:"add",value:function(){if(arguments[0]instanceof t){var p=arguments[0];return t.copy(this||_).selfAdd(p)}if("number"==typeof arguments[0]){var m=arguments[0];return t.copy(this||_).selfAdd(m)}}},{key:"init",value:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var p=arguments[0];(this||_)._hi=p,(this||_)._lo=0}else if(arguments[0]instanceof t){var m=arguments[0];(this||_)._hi=m._hi,(this||_)._lo=m._lo}}else if(2===arguments.length){var k=arguments[0],N=arguments[1];(this||_)._hi=k,(this||_)._lo=N}}},{key:"gt",value:function(p){return(this||_)._hi>p._hi||(this||_)._hi===p._hi&&(this||_)._lo>p._lo}},{key:"isNegative",value:function(){return(this||_)._hi<0||0===(this||_)._hi&&(this||_)._lo<0}},{key:"trunc",value:function(){return this.isNaN()?t.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return(this||_)._hi>0?1:(this||_)._hi<0?-1:(this||_)._lo>0?1:(this||_)._lo<0?-1:0}},{key:"interfaces_",get:function(){return[E,x,I]}}],[{key:"constructor_",value:function(){if((this||_)._hi=0,(this||_)._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var p=arguments[0];this.init(p)}else if(arguments[0]instanceof t){var m=arguments[0];this.init(m)}else if("string"==typeof arguments[0]){var k=arguments[0];t.constructor_.call(this||_,t.parse(k))}}else if(2===arguments.length){var N=arguments[0],T=arguments[1];this.init(N,T)}}},{key:"determinant",value:function(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var _=arguments[0],p=arguments[1],m=arguments[2],k=arguments[3];return t.determinant(t.valueOf(_),t.valueOf(p),t.valueOf(m),t.valueOf(k))}if(arguments[3]instanceof t&&arguments[2]instanceof t&&arguments[0]instanceof t&&arguments[1]instanceof t){var N=arguments[1],T=arguments[2],S=arguments[3];return arguments[0].multiply(S).selfSubtract(N.multiply(T))}}},{key:"sqr",value:function(_){return t.valueOf(_).selfMultiply(_)}},{key:"valueOf",value:function(){if("string"==typeof arguments[0]){var _=arguments[0];return t.parse(_)}if("number"==typeof arguments[0])return new t(arguments[0])}},{key:"sqrt",value:function(_){return t.valueOf(_).sqrt()}},{key:"parse",value:function(_){for(var p=0,m=_.length;ut.isWhitespace(_.charAt(p));)p++;var k=!1;if(p<m){var N=_.charAt(p);"-"!==N&&"+"!==N||(p++,"-"===N&&(k=!0))}for(var T=new t,S=0,L=0,C=0,R=!1;!(p>=m);){var w=_.charAt(p);if(p++,ut.isDigit(w)){var O=w-"0";T.selfMultiply(t.TEN),T.selfAdd(O),S++}else{if("."!==w){if("e"===w||"E"===w){var b=_.substring(p);try{C=ot.parseInt(b)}catch(p){throw p instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+b+" in string "+_):p}break}throw new NumberFormatException("Unexpected character '"+w+"' at position "+p+" in string "+_)}L=S,R=!0}}var M=T;R||(L=S);var D=S-L-C;if(0===D)M=T;else if(D>0){var F=t.TEN.pow(D);M=T.divide(F)}else if(D<0){var G=t.TEN.pow(-D);M=T.multiply(G)}return k?M.negate():M}},{key:"createNaN",value:function(){return new t(A.NaN,A.NaN)}},{key:"copy",value:function(_){return new t(_)}},{key:"magnitude",value:function(_){var p=Math.abs(_),m=Math.log(p)/Math.log(10),k=Math.trunc(Math.floor(m));return 10*Math.pow(10,k)<=p&&(k+=1),k}},{key:"stringOfChar",value:function(_,p){for(var m=new at,k=0;k<p;k++)m.append(_);return m.toString()}}])}();lt.PI=new lt(3.141592653589793,12246467991473532e-32),lt.TWO_PI=new lt(6.283185307179586,24492935982947064e-32),lt.PI_2=new lt(1.5707963267948966,6123233995736766e-32),lt.E=new lt(2.718281828459045,14456468917292502e-32),lt.NaN=new lt(A.NaN,A.NaN),lt.EPS=123259516440783e-46,lt.SPLIT=134217729,lt.MAX_PRINT_DIGITS=32,lt.TEN=lt.valueOf(10),lt.ONE=lt.valueOf(1),lt.SCI_NOT_EXPONENT_CHAR="E",lt.SCI_NOT_ZERO="0.0E0";var ht=function(){function t(){n(this||_,t)}return s(t,null,[{key:"orientationIndex",value:function(_,p,m){var k=t.orientationIndexFilter(_,p,m);if(k<=1)return k;var N=lt.valueOf(p.x).selfAdd(-_.x),T=lt.valueOf(p.y).selfAdd(-_.y),S=lt.valueOf(m.x).selfAdd(-p.x),L=lt.valueOf(m.y).selfAdd(-p.y);return N.selfMultiply(L).selfSubtract(T.selfMultiply(S)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof lt&&arguments[2]instanceof lt&&arguments[0]instanceof lt&&arguments[1]instanceof lt){var _=arguments[1],p=arguments[2],m=arguments[3];return arguments[0].multiply(m).selfSubtract(_.multiply(p)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var k=arguments[0],N=arguments[1],T=arguments[2],S=arguments[3],L=lt.valueOf(k),C=lt.valueOf(N),R=lt.valueOf(T),w=lt.valueOf(S);return L.multiply(w).selfSubtract(C.multiply(R)).signum()}}},{key:"intersection",value:function(_,p,m,k){var N=new lt(_.y).selfSubtract(p.y),T=new lt(p.x).selfSubtract(_.x),S=new lt(_.x).selfMultiply(p.y).selfSubtract(new lt(p.x).selfMultiply(_.y)),L=new lt(m.y).selfSubtract(k.y),C=new lt(k.x).selfSubtract(m.x),R=new lt(m.x).selfMultiply(k.y).selfSubtract(new lt(k.x).selfMultiply(m.y)),w=T.multiply(R).selfSubtract(C.multiply(S)),O=L.multiply(S).selfSubtract(N.multiply(R)),b=N.multiply(C).selfSubtract(L.multiply(T)),M=w.selfDivide(b).doubleValue(),D=O.selfDivide(b).doubleValue();return A.isNaN(M)||A.isInfinite(M)||A.isNaN(D)||A.isInfinite(D)?null:new B(M,D)}},{key:"orientationIndexFilter",value:function(_,p,m){var k=null,N=(_.x-m.x)*(p.y-m.y),T=(_.y-m.y)*(p.x-m.x),S=N-T;if(N>0){if(T<=0)return t.signum(S);k=N+T}else{if(!(N<0))return t.signum(S);if(T>=0)return t.signum(S);k=-N-T}var L=t.DP_SAFE_EPSILON*k;return S>=L||-S>=L?t.signum(S):2}},{key:"signum",value:function(_){return _>0?1:_<0?-1:0}}])}();ht.DP_SAFE_EPSILON=1e-15;var ct=function(){return s((function t(){n(this||_,t)}),[{key:"getM",value:function(_){if(this.hasM()){var p=this.getDimension()-this.getMeasures();return this.getOrdinate(_,p)}return A.NaN}},{key:"setOrdinate",value:function(_,p,m){}},{key:"getZ",value:function(_){return this.hasZ()?this.getOrdinate(_,2):A.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(_,p){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(_){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(_){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(_){}},{key:"copy",value:function(){}},{key:"getY",value:function(_){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[I]}}])}();ct.X=0,ct.Y=1,ct.Z=2,ct.M=3;var ft=function(){function t(){n(this||_,t)}return s(t,null,[{key:"index",value:function(_,p,m){return ht.orientationIndex(_,p,m)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var _=arguments[0],p=_.length-1;if(p<3)throw new k("Ring has fewer than 4 points, so orientation cannot be determined");for(var m=_[0],N=0,T=1;T<=p;T++){var S=_[T];S.y>m.y&&(m=S,N=T)}var L=N;do{(L-=1)<0&&(L=p)}while(_[L].equals2D(m)&&L!==N);var C=N;do{C=(C+1)%p}while(_[C].equals2D(m)&&C!==N);var R=_[L],w=_[C];if(R.equals2D(m)||w.equals2D(m)||R.equals2D(w))return!1;var O=t.index(R,m,w);return 0===O?R.x>w.x:O>0}if(rt(arguments[0],ct)){var b=arguments[0],M=b.size()-1;if(M<3)throw new k("Ring has fewer than 4 points, so orientation cannot be determined");for(var D=b.getCoordinate(0),F=0,G=1;G<=M;G++){var q=b.getCoordinate(G);q.y>D.y&&(D=q,F=G)}var Y=null,X=F;do{(X-=1)<0&&(X=M),Y=b.getCoordinate(X)}while(Y.equals2D(D)&&X!==F);var z=null,B=F;do{B=(B+1)%M,z=b.getCoordinate(B)}while(z.equals2D(D)&&B!==F);if(Y.equals2D(D)||z.equals2D(D)||Y.equals2D(z))return!1;var U=t.index(Y,D,z);return 0===U?Y.x>z.x:U>0}}}])}();ft.CLOCKWISE=-1,ft.RIGHT=ft.CLOCKWISE,ft.COUNTERCLOCKWISE=1,ft.LEFT=ft.COUNTERCLOCKWISE,ft.COLLINEAR=0,ft.STRAIGHT=ft.COLLINEAR;var gt=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"getCoordinate",value:function(){return(this||_)._minCoord}},{key:"getRightmostSide",value:function(p,m){var k=this.getRightmostSideOfSegment(p,m);return k<0&&(k=this.getRightmostSideOfSegment(p,m-1)),k<0&&((this||_)._minCoord=null,this.checkForRightmostCoordinate(p)),k}},{key:"findRightmostEdgeAtVertex",value:function(){var p=(this||_)._minDe.getEdge().getCoordinates();q.isTrue((this||_)._minIndex>0&&(this||_)._minIndex<p.length,"rightmost point expected to be interior vertex of edge");var m=p[(this||_)._minIndex-1],k=p[(this||_)._minIndex+1],N=ft.index((this||_)._minCoord,k,m),T=!1;(m.y<(this||_)._minCoord.y&&k.y<(this||_)._minCoord.y&&N===ft.COUNTERCLOCKWISE||m.y>(this||_)._minCoord.y&&k.y>(this||_)._minCoord.y&&N===ft.CLOCKWISE)&&(T=!0),T&&((this||_)._minIndex=(this||_)._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(_,p){var m=_.getEdge().getCoordinates();if(p<0||p+1>=m.length)return-1;if(m[p].y===m[p+1].y)return-1;var k=tt.LEFT;return m[p].y<m[p+1].y&&(k=tt.RIGHT),k}},{key:"getEdge",value:function(){return(this||_)._orientedDe}},{key:"checkForRightmostCoordinate",value:function(p){for(var m=p.getEdge().getCoordinates(),k=0;k<m.length-1;k++)(null===(this||_)._minCoord||m[k].x>(this||_)._minCoord.x)&&((this||_)._minDe=p,(this||_)._minIndex=k,(this||_)._minCoord=m[k])}},{key:"findRightmostEdgeAtNode",value:function(){var p=(this||_)._minDe.getNode().getEdges();(this||_)._minDe=p.getRightmostEdge(),(this||_)._minDe.isForward()||((this||_)._minDe=(this||_)._minDe.getSym(),(this||_)._minIndex=(this||_)._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(p){for(var m=p.iterator();m.hasNext();){var k=m.next();k.isForward()&&this.checkForRightmostCoordinate(k)}q.isTrue(0!==(this||_)._minIndex||(this||_)._minCoord.equals((this||_)._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===(this||_)._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),(this||_)._orientedDe=(this||_)._minDe,this.getRightmostSide((this||_)._minDe,(this||_)._minIndex)===tt.LEFT&&((this||_)._orientedDe=(this||_)._minDe.getSym())}}],[{key:"constructor_",value:function(){(this||_)._minIndex=-1,(this||_)._minCoord=null,(this||_)._minDe=null,(this||_)._orientedDe=null}}])}(),vt=function(p){function i(p,m){var k;return n(this||_,i),(k=e(this||_,i,[m?p+" [ "+m+" ]":p])).pt=m?new B(m):void 0,k.name=Object.keys({TopologyException:i})[0],k}return l(i,p),s(i,[{key:"getCoordinate",value:function(){return(this||_).pt}}])}(F),yt=function(){return s((function t(){n(this||_,t),(this||_).array=[]}),[{key:"addLast",value:function(p){(this||_).array.push(p)}},{key:"removeFirst",value:function(){return(this||_).array.shift()}},{key:"isEmpty",value:function(){return 0===(this||_).array.length}}])}(),dt=function(p){function i(p){var m;return n(this||_,i),(m=e(this||_,i)).array=[],p instanceof j&&m.addAll(p),m}return l(i,p),s(i,[{key:"interfaces_",get:function(){return[it,j]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(p){return 1===arguments.length?(this||_).array.push(p):(this||_).array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){(this||_).array=[]}},{key:"addAll",value:function(p){var m,k=a(p);try{for(k.s();!(m=k.n()).done;){var N=m.value;(this||_).array.push(N)}}catch(p){k.e(p)}finally{k.f()}}},{key:"set",value:function(p,m){var k=(this||_).array[p];return(this||_).array[p]=m,k}},{key:"iterator",value:function(){return new _t(this||_)}},{key:"get",value:function(p){if(p<0||p>=this.size())throw new nt;return(this||_).array[p]}},{key:"isEmpty",value:function(){return 0===(this||_).array.length}},{key:"sort",value:function(p){p?(this||_).array.sort((function(_,m){return p.compare(_,m)})):(this||_).array.sort()}},{key:"size",value:function(){return(this||_).array.length}},{key:"toArray",value:function(){return(this||_).array.slice()}},{key:"remove",value:function(p){for(var m=0,k=(this||_).array.length;m<k;m++)if((this||_).array[m]===p)return!!(this||_).array.splice(m,1);return!1}},{key:Symbol.iterator,value:function(){return(this||_).array.values()}}])}(it),_t=function(){return s((function t(p){n(this||_,t),(this||_).arrayList=p,(this||_).position=0}),[{key:"next",value:function(){if((this||_).position===(this||_).arrayList.size())throw new W;return(this||_).arrayList.get((this||_).position++)}},{key:"hasNext",value:function(){return(this||_).position<(this||_).arrayList.size()}},{key:"set",value:function(p){return(this||_).arrayList.set((this||_).position-1,p)}},{key:"remove",value:function(){(this||_).arrayList.remove((this||_).arrayList.get((this||_).position))}}])}(),pt=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"clearVisitedEdges",value:function(){for(var p=(this||_)._dirEdgeList.iterator();p.hasNext();)p.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return(this||_)._rightMostCoord}},{key:"computeNodeDepth",value:function(_){for(var p=null,m=_.getEdges().iterator();m.hasNext();){var k=m.next();if(k.isVisited()||k.getSym().isVisited()){p=k;break}}if(null===p)throw new vt("unable to find edge to compute depths at "+_.getCoordinate());_.getEdges().computeDepths(p);for(var N=_.getEdges().iterator();N.hasNext();){var T=N.next();T.setVisited(!0),this.copySymDepths(T)}}},{key:"computeDepth",value:function(p){this.clearVisitedEdges();var m=(this||_)._finder.getEdge();m.getNode(),m.getLabel(),m.setEdgeDepths(tt.RIGHT,p),this.copySymDepths(m),this.computeDepths(m)}},{key:"create",value:function(p){this.addReachable(p),(this||_)._finder.findEdge((this||_)._dirEdgeList),(this||_)._rightMostCoord=(this||_)._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var p=(this||_)._dirEdgeList.iterator();p.hasNext();){var m=p.next();m.getDepth(tt.RIGHT)>=1&&m.getDepth(tt.LEFT)<=0&&!m.isInteriorAreaEdge()&&m.setInResult(!0)}}},{key:"computeDepths",value:function(_){var p=new Q,m=new yt,k=_.getNode();for(m.addLast(k),p.add(k),_.setVisited(!0);!m.isEmpty();){var N=m.removeFirst();p.add(N),this.computeNodeDepth(N);for(var T=N.getEdges().iterator();T.hasNext();){var S=T.next().getSym();if(!S.isVisited()){var L=S.getNode();p.contains(L)||(m.addLast(L),p.add(L))}}}}},{key:"compareTo",value:function(p){var m=p;return(this||_)._rightMostCoord.x<m._rightMostCoord.x?-1:(this||_)._rightMostCoord.x>m._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(null===(this||_)._env){for(var p=new V,m=(this||_)._dirEdgeList.iterator();m.hasNext();)for(var k=m.next().getEdge().getCoordinates(),N=0;N<k.length-1;N++)p.expandToInclude(k[N]);(this||_)._env=p}return(this||_)._env}},{key:"addReachable",value:function(_){var p=new st;for(p.add(_);!p.empty();){var m=p.pop();this.add(m,p)}}},{key:"copySymDepths",value:function(_){var p=_.getSym();p.setDepth(tt.LEFT,_.getDepth(tt.RIGHT)),p.setDepth(tt.RIGHT,_.getDepth(tt.LEFT))}},{key:"add",value:function(p,m){p.setVisited(!0),(this||_)._nodes.add(p);for(var k=p.getEdges().iterator();k.hasNext();){var N=k.next();(this||_)._dirEdgeList.add(N);var T=N.getSym().getNode();T.isVisited()||m.push(T)}}},{key:"getNodes",value:function(){return(this||_)._nodes}},{key:"getDirectedEdges",value:function(){return(this||_)._dirEdgeList}},{key:"interfaces_",get:function(){return[x]}}],[{key:"constructor_",value:function(){(this||_)._finder=null,(this||_)._dirEdgeList=new dt,(this||_)._nodes=new dt,(this||_)._rightMostCoord=null,(this||_)._env=null,(this||_)._finder=new gt}}])}(),mt=function(){return s((function t(){n(this||_,t)}),null,[{key:"intersection",value:function(_,p,m,k){var N=_.x<p.x?_.x:p.x,T=_.y<p.y?_.y:p.y,S=_.x>p.x?_.x:p.x,L=_.y>p.y?_.y:p.y,C=m.x<k.x?m.x:k.x,R=m.y<k.y?m.y:k.y,w=m.x>k.x?m.x:k.x,O=m.y>k.y?m.y:k.y,b=((N>C?N:C)+(S<w?S:w))/2,M=((T>R?T:R)+(L<O?L:O))/2,D=_.x-b,F=_.y-M,G=p.x-b,q=p.y-M,Y=m.x-b,X=m.y-M,z=k.x-b,U=k.y-M,V=F-q,H=G-D,Z=D*q-G*F,j=X-U,W=z-Y,K=Y*U-z*X,J=V*W-j*H,Q=(H*K-W*Z)/J,$=(j*Z-V*K)/J;return A.isNaN(Q)||A.isInfinite(Q)||A.isNaN($)||A.isInfinite($)?null:new B(Q+b,$+M)}}])}(),kt=function(){return s((function t(){n(this||_,t)}),null,[{key:"arraycopy",value:function(_,p,m,k,N){for(var T=0,S=p;S<p+N;S++)m[k+T]=_[S],T++}},{key:"getProperty",value:function(_){return{"line.separator":"\n"}[_]}}])}(),xt=function(){function t(){n(this||_,t)}return s(t,null,[{key:"log10",value:function(_){var p=Math.log(_);return A.isInfinite(p)||A.isNaN(p)?p:p/t.LOG_10}},{key:"min",value:function(_,p,m,k){var N=_;return p<N&&(N=p),m<N&&(N=m),k<N&&(N=k),N}},{key:"clamp",value:function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var _=arguments[0],p=arguments[1],m=arguments[2];return _<p?p:_>m?m:_}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var k=arguments[0],N=arguments[1],T=arguments[2];return k<N?N:k>T?T:k}}},{key:"wrap",value:function(_,p){return _<0?p- -_%p:_%p}},{key:"max",value:function(){if(3===arguments.length){var _=arguments[1],p=arguments[2],m=arguments[0];return _>m&&(m=_),p>m&&(m=p),m}if(4===arguments.length){var k=arguments[1],N=arguments[2],T=arguments[3],S=arguments[0];return k>S&&(S=k),N>S&&(S=N),T>S&&(S=T),S}}},{key:"average",value:function(_,p){return(_+p)/2}}])}();xt.LOG_10=Math.log(10);var Et=function(){function t(){n(this||_,t)}return s(t,null,[{key:"segmentToSegment",value:function(_,p,m,k){if(_.equals(p))return t.pointToSegment(_,m,k);if(m.equals(k))return t.pointToSegment(k,_,p);var N=!1;if(V.intersects(_,p,m,k)){var T=(p.x-_.x)*(k.y-m.y)-(p.y-_.y)*(k.x-m.x);if(0===T)N=!0;else{var S=(_.y-m.y)*(k.x-m.x)-(_.x-m.x)*(k.y-m.y),L=((_.y-m.y)*(p.x-_.x)-(_.x-m.x)*(p.y-_.y))/T,C=S/T;(C<0||C>1||L<0||L>1)&&(N=!0)}}else N=!0;return N?xt.min(t.pointToSegment(_,m,k),t.pointToSegment(p,m,k),t.pointToSegment(m,_,p),t.pointToSegment(k,_,p)):0}},{key:"pointToSegment",value:function(_,p,m){if(p.x===m.x&&p.y===m.y)return _.distance(p);var k=(m.x-p.x)*(m.x-p.x)+(m.y-p.y)*(m.y-p.y),N=((_.x-p.x)*(m.x-p.x)+(_.y-p.y)*(m.y-p.y))/k;if(N<=0)return _.distance(p);if(N>=1)return _.distance(m);var T=((p.y-_.y)*(m.x-p.x)-(p.x-_.x)*(m.y-p.y))/k;return Math.abs(T)*Math.sqrt(k)}},{key:"pointToLinePerpendicular",value:function(_,p,m){var k=(m.x-p.x)*(m.x-p.x)+(m.y-p.y)*(m.y-p.y),N=((p.y-_.y)*(m.x-p.x)-(p.x-_.x)*(m.y-p.y))/k;return Math.abs(N)*Math.sqrt(k)}},{key:"pointToSegmentString",value:function(_,p){if(0===p.length)throw new k("Line array must contain at least one vertex");for(var m=_.distance(p[0]),N=0;N<p.length-1;N++){var T=t.pointToSegment(_,p[N],p[N+1]);T<m&&(m=T)}return m}}])}(),It=function(){return s((function t(){n(this||_,t)}),[{key:"create",value:function(){if(1===arguments.length)arguments[0]instanceof Array||rt(arguments[0],ct);else if(2===arguments.length);else if(3===arguments.length){var _=arguments[0],p=arguments[1];return this.create(_,p)}}}])}(),Nt=function(){return s((function t(){n(this||_,t)}),[{key:"filter",value:function(_){}}])}(),Tt=function(){return s((function t(){n(this||_,t)}),null,[{key:"ofLine",value:function(_){var p=_.size();if(p<=1)return 0;var m=0,k=new B;_.getCoordinate(0,k);for(var N=k.x,T=k.y,S=1;S<p;S++){_.getCoordinate(S,k);var L=k.x,C=k.y,R=L-N,w=C-T;m+=Math.sqrt(R*R+w*w),N=L,T=C}return m}}])}(),St=s((function t(){n(this||_,t)})),Lt=function(){function t(){n(this||_,t)}return s(t,null,[{key:"copyCoord",value:function(_,p,m,k){for(var N=Math.min(_.getDimension(),m.getDimension()),T=0;T<N;T++)m.setOrdinate(k,T,_.getOrdinate(p,T))}},{key:"isRing",value:function(_){var p=_.size();return 0===p||!(p<=3)&&_.getOrdinate(0,ct.X)===_.getOrdinate(p-1,ct.X)&&_.getOrdinate(0,ct.Y)===_.getOrdinate(p-1,ct.Y)}},{key:"scroll",value:function(){if(2===arguments.length){if(rt(arguments[0],ct)&&Number.isInteger(arguments[1])){var _=arguments[0],p=arguments[1];t.scroll(_,p,t.isRing(_))}else if(rt(arguments[0],ct)&&arguments[1]instanceof B){var m=arguments[0],k=arguments[1],N=t.indexOf(k,m);if(N<=0)return null;t.scroll(m,N)}}else if(3===arguments.length){var T=arguments[0],S=arguments[1],L=arguments[2];if(S<=0)return null;for(var C=T.copy(),R=L?T.size()-1:T.size(),w=0;w<R;w++)for(var O=0;O<T.getDimension();O++)T.setOrdinate(w,O,C.getOrdinate((S+w)%R,O));if(L)for(var b=0;b<T.getDimension();b++)T.setOrdinate(R,b,T.getOrdinate(0,b))}}},{key:"isEqual",value:function(_,p){var m=_.size();if(m!==p.size())return!1;for(var k=Math.min(_.getDimension(),p.getDimension()),N=0;N<m;N++)for(var T=0;T<k;T++){var S=_.getOrdinate(N,T),L=p.getOrdinate(N,T);if(_.getOrdinate(N,T)!==p.getOrdinate(N,T)&&(!A.isNaN(S)||!A.isNaN(L)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(1===arguments.length){var _=arguments[0];return t.minCoordinateIndex(_,0,_.size()-1)}if(3===arguments.length){for(var p=arguments[0],m=arguments[2],k=-1,N=null,T=arguments[1];T<=m;T++){var S=p.getCoordinate(T);(null===N||N.compareTo(S)>0)&&(N=S,k=T)}return k}}},{key:"extend",value:function(_,p,m){var k=_.create(m,p.getDimension()),N=p.size();if(t.copy(p,0,k,0,N),N>0)for(var T=N;T<m;T++)t.copy(p,N-1,k,T,1);return k}},{key:"reverse",value:function(_){for(var p=_.size()-1,m=Math.trunc(p/2),k=0;k<=m;k++)t.swap(_,k,p-k)}},{key:"swap",value:function(_,p,m){if(p===m)return null;for(var k=0;k<_.getDimension();k++){var N=_.getOrdinate(p,k);_.setOrdinate(p,k,_.getOrdinate(m,k)),_.setOrdinate(m,k,N)}}},{key:"copy",value:function(_,p,m,k,N){for(var T=0;T<N;T++)t.copyCoord(_,p+T,m,k+T)}},{key:"ensureValidRing",value:function(_,p){var m=p.size();return 0===m?p:m<=3?t.createClosedRing(_,p,4):p.getOrdinate(0,ct.X)===p.getOrdinate(m-1,ct.X)&&p.getOrdinate(0,ct.Y)===p.getOrdinate(m-1,ct.Y)?p:t.createClosedRing(_,p,m+1)}},{key:"indexOf",value:function(_,p){for(var m=0;m<p.size();m++)if(_.x===p.getOrdinate(m,ct.X)&&_.y===p.getOrdinate(m,ct.Y))return m;return-1}},{key:"createClosedRing",value:function(_,p,m){var k=_.create(m,p.getDimension()),N=p.size();t.copy(p,0,k,0,N);for(var T=N;T<m;T++)t.copy(p,0,k,T,1);return k}},{key:"minCoordinate",value:function(_){for(var p=null,m=0;m<_.size();m++){var k=_.getCoordinate(m);(null===p||p.compareTo(k)>0)&&(p=k)}return p}}])}(),Ct=function(){function t(){n(this||_,t)}return s(t,null,[{key:"toDimensionSymbol",value:function(_){switch(_){case t.FALSE:return t.SYM_FALSE;case t.TRUE:return t.SYM_TRUE;case t.DONTCARE:return t.SYM_DONTCARE;case t.P:return t.SYM_P;case t.L:return t.SYM_L;case t.A:return t.SYM_A}throw new k("Unknown dimension value: "+_)}},{key:"toDimensionValue",value:function(_){switch(ut.toUpperCase(_)){case t.SYM_FALSE:return t.FALSE;case t.SYM_TRUE:return t.TRUE;case t.SYM_DONTCARE:return t.DONTCARE;case t.SYM_P:return t.P;case t.SYM_L:return t.L;case t.SYM_A:return t.A}throw new k("Unknown dimension symbol: "+_)}}])}();Ct.P=0,Ct.L=1,Ct.A=2,Ct.FALSE=-1,Ct.TRUE=-2,Ct.DONTCARE=-3,Ct.SYM_FALSE="F",Ct.SYM_TRUE="T",Ct.SYM_DONTCARE="*",Ct.SYM_P="0",Ct.SYM_L="1",Ct.SYM_A="2";var Rt=function(){return s((function t(){n(this||_,t)}),[{key:"filter",value:function(_){}}])}(),wt=function(){return s((function t(){n(this||_,t)}),[{key:"filter",value:function(_,p){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),Ot=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new V:(this||_)._points.expandEnvelope(new V)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return(this||_)._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new i((this||_)._points.copy(),(this||_)._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof H){var p=arguments[0],m=arguments[1];if(!this.isEquivalentClass(p))return!1;var k=p;if((this||_)._points.size()!==k._points.size())return!1;for(var N=0;N<(this||_)._points.size();N++)if(!this.equal((this||_)._points.getCoordinate(N),k._points.getCoordinate(N),m))return!1;return!0}return f(i,"equalsExact",this||_,1).apply(this||_,arguments)}},{key:"normalize",value:function(){for(var p=0;p<Math.trunc((this||_)._points.size()/2);p++){var m=(this||_)._points.size()-1-p;if(!(this||_)._points.getCoordinate(p).equals((this||_)._points.getCoordinate(m))){if((this||_)._points.getCoordinate(p).compareTo((this||_)._points.getCoordinate(m))>0){var k=(this||_)._points.copy();Lt.reverse(k),(this||_)._points=k}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:(this||_)._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Ct.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var p=(this||_)._points.copy();return Lt.reverse(p),this.getFactory().createLineString(p)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return H.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Tt.ofLine((this||_)._points)}},{key:"getNumPoints",value:function(){return(this||_)._points.size()}},{key:"compareToSameClass",value:function(){if(1===arguments.length){for(var p=arguments[0],m=0,k=0;m<(this||_)._points.size()&&k<p._points.size();){var N=(this||_)._points.getCoordinate(m).compareTo(p._points.getCoordinate(k));if(0!==N)return N;m++,k++}return m<(this||_)._points.size()?1:k<p._points.size()?-1:0}if(2===arguments.length){var T=arguments[0];return arguments[1].compare((this||_)._points,T._points)}}},{key:"apply",value:function(){if(rt(arguments[0],Nt))for(var p=arguments[0],m=0;m<(this||_)._points.size();m++)p.filter((this||_)._points.getCoordinate(m));else if(rt(arguments[0],wt)){var k=arguments[0];if(0===(this||_)._points.size())return null;for(var T=0;T<(this||_)._points.size()&&(k.filter((this||_)._points,T),!k.isDone());T++);k.isGeometryChanged()&&this.geometryChanged()}else(rt(arguments[0],Rt)||rt(arguments[0],N))&&arguments[0].filter(this||_)}},{key:"getBoundary",value:function(){throw new K}},{key:"isEquivalentClass",value:function(_){return _ instanceof i}},{key:"getCoordinateN",value:function(p){return(this||_)._points.getCoordinate(p)}},{key:"getGeometryType",value:function(){return H.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return(this||_)._points}},{key:"isEmpty",value:function(){return 0===(this||_)._points.size()}},{key:"init",value:function(p){if(null===p&&(p=this.getFactory().getCoordinateSequenceFactory().create([])),1===p.size())throw new k("Invalid number of points in LineString (found "+p.size()+" - must be 0 or >= 2)");(this||_)._points=p}},{key:"isCoordinate",value:function(p){for(var m=0;m<(this||_)._points.size();m++)if((this||_)._points.getCoordinate(m).equals(p))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(p){return this.getFactory().createPoint((this||_)._points.getCoordinate(p))}},{key:"interfaces_",get:function(){return[St]}}],[{key:"constructor_",value:function(){if((this||_)._points=null,0===arguments.length);else if(2===arguments.length){var p=arguments[0],m=arguments[1];H.constructor_.call(this||_,m),this.init(p)}}}])}(H),bt=s((function t(){n(this||_,t)})),At=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new V;var p=new V;return p.expandToInclude((this||_)._coordinates.getX(0),(this||_)._coordinates.getY(0)),p}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new i((this||_)._coordinates.copy(),(this||_)._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof H){var p=arguments[0],m=arguments[1];return!!this.isEquivalentClass(p)&&(!(!this.isEmpty()||!p.isEmpty())||this.isEmpty()===p.isEmpty()&&this.equal(p.getCoordinate(),this.getCoordinate(),m))}return f(i,"equalsExact",this||_,1).apply(this||_,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==(this||_)._coordinates.size()?(this||_)._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Ct.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint((this||_)._coordinates.copy())}},{key:"getTypeCode",value:function(){return H.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var p=arguments[0];return this.getCoordinate().compareTo(p.getCoordinate())}if(2===arguments.length){var m=arguments[0];return arguments[1].compare((this||_)._coordinates,m._coordinates)}}},{key:"apply",value:function(){if(rt(arguments[0],Nt)){var p=arguments[0];if(this.isEmpty())return null;p.filter(this.getCoordinate())}else if(rt(arguments[0],wt)){var m=arguments[0];if(this.isEmpty())return null;m.filter((this||_)._coordinates,0),m.isGeometryChanged()&&this.geometryChanged()}else(rt(arguments[0],Rt)||rt(arguments[0],N))&&arguments[0].filter(this||_)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return H.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return(this||_)._coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===(this||_)._coordinates.size()}},{key:"init",value:function(p){null===p&&(p=this.getFactory().getCoordinateSequenceFactory().create([])),q.isTrue(p.size()<=1),(this||_)._coordinates=p}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[bt]}}],[{key:"constructor_",value:function(){(this||_)._coordinates=null;var p=arguments[0],m=arguments[1];H.constructor_.call(this||_,m),this.init(p)}}])}(H),Mt=function(){function t(){n(this||_,t)}return s(t,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var _=arguments[0];return Math.abs(t.ofRingSigned(_))}if(rt(arguments[0],ct)){var p=arguments[0];return Math.abs(t.ofRingSigned(p))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var _=arguments[0];if(_.length<3)return 0;for(var p=0,m=_[0].x,k=1;k<_.length-1;k++){var N=_[k].x-m,T=_[k+1].y;p+=N*(_[k-1].y-T)}return p/2}if(rt(arguments[0],ct)){var S=arguments[0],L=S.size();if(L<3)return 0;var C=new B,R=new B,w=new B;S.getCoordinate(0,R),S.getCoordinate(1,w);var O=R.x;w.x-=O;for(var b=0,M=1;M<L-1;M++)C.y=R.y,R.x=w.x,R.y=w.y,S.getCoordinate(M+1,w),w.x-=O,b+=R.x*(C.y-w.y);return b/2}}}])}(),Pt=function(){return s((function t(){n(this||_,t)}),null,[{key:"sort",value:function(){var _=arguments,p=arguments[0];if(1===arguments.length)p.sort((function(_,p){return _.compareTo(p)}));else if(2===arguments.length)p.sort((function(p,m){return _[1].compare(p,m)}));else if(3===arguments.length){var m=p.slice(arguments[1],arguments[2]);m.sort();var k=p.slice(0,arguments[1]).concat(m,p.slice(arguments[2],p.length));p.splice(0,p.length);var N,T=a(k);try{for(T.s();!(N=T.n()).done;){var S=N.value;p.push(S)}}catch(_){T.e(_)}finally{T.f()}}else if(4===arguments.length){var L=p.slice(arguments[1],arguments[2]);L.sort((function(p,m){return _[3].compare(p,m)}));var C=p.slice(0,arguments[1]).concat(L,p.slice(arguments[2],p.length));p.splice(0,p.length);var R,w=a(C);try{for(w.s();!(R=w.n()).done;){var O=R.value;p.push(O)}}catch(_){w.e(_)}finally{w.f()}}}},{key:"asList",value:function(_){var p,m=new dt,k=a(_);try{for(k.s();!(p=k.n()).done;){var N=p.value;m.add(N)}}catch(_){k.e(_)}finally{k.f()}return m}},{key:"copyOf",value:function(_,p){return _.slice(0,p)}}])}(),Dt=s((function t(){n(this||_,t)})),Ft=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"computeEnvelopeInternal",value:function(){return(this||_)._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var p=new Array(this.getNumPoints()).fill(null),m=-1,k=(this||_)._shell.getCoordinates(),N=0;N<k.length;N++)p[++m]=k[N];for(var T=0;T<(this||_)._holes.length;T++)for(var S=(this||_)._holes[T].getCoordinates(),L=0;L<S.length;L++)p[++m]=S[L];return p}},{key:"getArea",value:function(){var p=0;p+=Mt.ofRing((this||_)._shell.getCoordinateSequence());for(var m=0;m<(this||_)._holes.length;m++)p-=Mt.ofRing((this||_)._holes[m].getCoordinateSequence());return p}},{key:"copyInternal",value:function(){for(var p=(this||_)._shell.copy(),m=new Array((this||_)._holes.length).fill(null),k=0;k<(this||_)._holes.length;k++)m[k]=(this||_)._holes[k].copy();return new i(p,m,(this||_)._factory)}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===(this||_)._shell)return!1;if(5!==(this||_)._shell.getNumPoints())return!1;for(var p=(this||_)._shell.getCoordinateSequence(),m=this.getEnvelopeInternal(),k=0;k<5;k++){var N=p.getX(k);if(N!==m.getMinX()&&N!==m.getMaxX())return!1;var T=p.getY(k);if(T!==m.getMinY()&&T!==m.getMaxY())return!1}for(var S=p.getX(0),L=p.getY(0),C=1;C<=4;C++){var R=p.getX(C),w=p.getY(C);if(R!==S===(w!==L))return!1;S=R,L=w}return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof H){var p=arguments[0],m=arguments[1];if(!this.isEquivalentClass(p))return!1;var k=p,N=(this||_)._shell,T=k._shell;if(!N.equalsExact(T,m))return!1;if((this||_)._holes.length!==k._holes.length)return!1;for(var S=0;S<(this||_)._holes.length;S++)if(!(this||_)._holes[S].equalsExact(k._holes[S],m))return!1;return!0}return f(i,"equalsExact",this||_,1).apply(this||_,arguments)}},{key:"normalize",value:function(){if(0===arguments.length){(this||_)._shell=this.normalized((this||_)._shell,!0);for(var p=0;p<(this||_)._holes.length;p++)(this||_)._holes[p]=this.normalized((this||_)._holes[p],!1);Pt.sort((this||_)._holes)}else if(2===arguments.length){var m=arguments[0],k=arguments[1];if(m.isEmpty())return null;var N=m.getCoordinateSequence(),T=Lt.minCoordinateIndex(N,0,N.size()-2);Lt.scroll(N,T,!0),ft.isCCW(N)===k&&Lt.reverse(N)}}},{key:"getCoordinate",value:function(){return(this||_)._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return(this||_)._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var _=this.getExteriorRing().reverse(),p=new Array(this.getNumInteriorRing()).fill(null),m=0;m<p.length;m++)p[m]=this.getInteriorRingN(m).reverse();return this.getFactory().createPolygon(_,p)}},{key:"getTypeCode",value:function(){return H.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var p=0;p+=(this||_)._shell.getLength();for(var m=0;m<(this||_)._holes.length;m++)p+=(this||_)._holes[m].getLength();return p}},{key:"getNumPoints",value:function(){for(var p=(this||_)._shell.getNumPoints(),m=0;m<(this||_)._holes.length;m++)p+=(this||_)._holes[m].getNumPoints();return p}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(_,p){var m=_.copy();return this.normalize(m,p),m}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var p=arguments[0],m=(this||_)._shell,k=p._shell;return m.compareToSameClass(k)}if(2===arguments.length){var N=arguments[1],T=arguments[0],S=(this||_)._shell,L=T._shell,C=S.compareToSameClass(L,N);if(0!==C)return C;for(var R=this.getNumInteriorRing(),w=T.getNumInteriorRing(),O=0;O<R&&O<w;){var b=this.getInteriorRingN(O),M=T.getInteriorRingN(O),D=b.compareToSameClass(M,N);if(0!==D)return D;O++}return O<R?1:O<w?-1:0}}},{key:"apply",value:function(){if(rt(arguments[0],Nt)){var p=arguments[0];(this||_)._shell.apply(p);for(var m=0;m<(this||_)._holes.length;m++)(this||_)._holes[m].apply(p)}else if(rt(arguments[0],wt)){var k=arguments[0];if((this||_)._shell.apply(k),!k.isDone())for(var T=0;T<(this||_)._holes.length&&((this||_)._holes[T].apply(k),!k.isDone());T++);k.isGeometryChanged()&&this.geometryChanged()}else if(rt(arguments[0],Rt))arguments[0].filter(this||_);else if(rt(arguments[0],N)){var S=arguments[0];S.filter(this||_),(this||_)._shell.apply(S);for(var L=0;L<(this||_)._holes.length;L++)(this||_)._holes[L].apply(S)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var p=new Array((this||_)._holes.length+1).fill(null);p[0]=(this||_)._shell;for(var m=0;m<(this||_)._holes.length;m++)p[m+1]=(this||_)._holes[m];return p.length<=1?this.getFactory().createLinearRing(p[0].getCoordinateSequence()):this.getFactory().createMultiLineString(p)}},{key:"getGeometryType",value:function(){return H.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return(this||_)._shell}},{key:"isEmpty",value:function(){return(this||_)._shell.isEmpty()}},{key:"getInteriorRingN",value:function(p){return(this||_)._holes[p]}},{key:"interfaces_",get:function(){return[Dt]}}],[{key:"constructor_",value:function(){(this||_)._shell=null,(this||_)._holes=null;var p=arguments[0],m=arguments[1],N=arguments[2];if(H.constructor_.call(this||_,N),null===p&&(p=this.getFactory().createLinearRing()),null===m&&(m=[]),H.hasNullElements(m))throw new k("holes must not contain null elements");if(p.isEmpty()&&H.hasNonEmptyElements(m))throw new k("shell is empty but holes are not");(this||_)._shell=p,(this||_)._holes=m}}])}(H),Gt=function(p){function i(){return n(this||_,i),e(this||_,i,arguments)}return l(i,p),s(i)}(J),qt=function(p){function i(p){var m;return n(this||_,i),(m=e(this||_,i)).array=[],p instanceof j&&m.addAll(p),m}return l(i,p),s(i,[{key:"contains",value:function(p){var m,k=a((this||_).array);try{for(k.s();!(m=k.n()).done;)if(0===m.value.compareTo(p))return!0}catch(p){k.e(p)}finally{k.f()}return!1}},{key:"add",value:function(p){if(this.contains(p))return!1;for(var m=0,k=(this||_).array.length;m<k;m++)if(1===(this||_).array[m].compareTo(p))return!!(this||_).array.splice(m,0,p);return(this||_).array.push(p),!0}},{key:"addAll",value:function(_){var p,m=a(_);try{for(m.s();!(p=m.n()).done;){var k=p.value;this.add(k)}}catch(_){m.e(_)}finally{m.f()}return!0}},{key:"remove",value:function(){throw new K}},{key:"size",value:function(){return(this||_).array.length}},{key:"isEmpty",value:function(){return 0===(this||_).array.length}},{key:"toArray",value:function(){return(this||_).array.slice()}},{key:"iterator",value:function(){return new Yt((this||_).array)}}])}(Gt),Yt=function(){return s((function t(p){n(this||_,t),(this||_).array=p,(this||_).position=0}),[{key:"next",value:function(){if((this||_).position===(this||_).array.length)throw new W;return(this||_).array[(this||_).position++]}},{key:"hasNext",value:function(){return(this||_).position<(this||_).array.length}},{key:"remove",value:function(){throw new K}}])}(),Xt=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"computeEnvelopeInternal",value:function(){for(var p=new V,m=0;m<(this||_)._geometries.length;m++)p.expandToInclude((this||_)._geometries[m].getEnvelopeInternal());return p}},{key:"getGeometryN",value:function(p){return(this||_)._geometries[p]}},{key:"getCoordinates",value:function(){for(var p=new Array(this.getNumPoints()).fill(null),m=-1,k=0;k<(this||_)._geometries.length;k++)for(var N=(this||_)._geometries[k].getCoordinates(),T=0;T<N.length;T++)p[++m]=N[T];return p}},{key:"getArea",value:function(){for(var p=0,m=0;m<(this||_)._geometries.length;m++)p+=(this||_)._geometries[m].getArea();return p}},{key:"copyInternal",value:function(){for(var p=new Array((this||_)._geometries.length).fill(null),m=0;m<p.length;m++)p[m]=(this||_)._geometries[m].copy();return new i(p,(this||_)._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof H){var p=arguments[0],m=arguments[1];if(!this.isEquivalentClass(p))return!1;var k=p;if((this||_)._geometries.length!==k._geometries.length)return!1;for(var N=0;N<(this||_)._geometries.length;N++)if(!(this||_)._geometries[N].equalsExact(k._geometries[N],m))return!1;return!0}return f(i,"equalsExact",this||_,1).apply(this||_,arguments)}},{key:"normalize",value:function(){for(var p=0;p<(this||_)._geometries.length;p++)(this||_)._geometries[p].normalize();Pt.sort((this||_)._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:(this||_)._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var p=Ct.FALSE,m=0;m<(this||_)._geometries.length;m++)p=Math.max(p,(this||_)._geometries[m].getBoundaryDimension());return p}},{key:"reverseInternal",value:function(){for(var p=(this||_)._geometries.length,m=new dt(p),k=0;k<p;k++)m.add((this||_)._geometries[k].reverse());return this.getFactory().buildGeometry(m)}},{key:"getTypeCode",value:function(){return H.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var p=Ct.FALSE,m=0;m<(this||_)._geometries.length;m++)p=Math.max(p,(this||_)._geometries[m].getDimension());return p}},{key:"getLength",value:function(){for(var p=0,m=0;m<(this||_)._geometries.length;m++)p+=(this||_)._geometries[m].getLength();return p}},{key:"getNumPoints",value:function(){for(var p=0,m=0;m<(this||_)._geometries.length;m++)p+=(this||_)._geometries[m].getNumPoints();return p}},{key:"getNumGeometries",value:function(){return(this||_)._geometries.length}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var p=arguments[0],m=new qt(Pt.asList((this||_)._geometries)),k=new qt(Pt.asList(p._geometries));return this.compare(m,k)}if(2===arguments.length){for(var N=arguments[1],T=arguments[0],S=this.getNumGeometries(),L=T.getNumGeometries(),C=0;C<S&&C<L;){var R=this.getGeometryN(C),w=T.getGeometryN(C),O=R.compareToSameClass(w,N);if(0!==O)return O;C++}return C<S?1:C<L?-1:0}}},{key:"apply",value:function(){if(rt(arguments[0],Nt))for(var p=arguments[0],m=0;m<(this||_)._geometries.length;m++)(this||_)._geometries[m].apply(p);else if(rt(arguments[0],wt)){var k=arguments[0];if(0===(this||_)._geometries.length)return null;for(var T=0;T<(this||_)._geometries.length&&((this||_)._geometries[T].apply(k),!k.isDone());T++);k.isGeometryChanged()&&this.geometryChanged()}else if(rt(arguments[0],Rt)){var S=arguments[0];S.filter(this||_);for(var L=0;L<(this||_)._geometries.length;L++)(this||_)._geometries[L].apply(S)}else if(rt(arguments[0],N)){var C=arguments[0];C.filter(this||_);for(var R=0;R<(this||_)._geometries.length;R++)(this||_)._geometries[R].apply(C)}}},{key:"getBoundary",value:function(){return H.checkNotGeometryCollection(this||_),q.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return H.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var p=0;p<(this||_)._geometries.length;p++)if(!(this||_)._geometries[p].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if((this||_)._geometries=null,0===arguments.length);else if(2===arguments.length){var p=arguments[0],m=arguments[1];if(H.constructor_.call(this||_,m),null===p&&(p=[]),H.hasNullElements(p))throw new k("geometries must not contain null elements");(this||_)._geometries=p}}}])}(H),zt=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"copyInternal",value:function(){for(var p=new Array((this||_)._geometries.length).fill(null),m=0;m<p.length;m++)p[m]=(this||_)._geometries[m].copy();return new i(p,(this||_)._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof H){var p=arguments[0],m=arguments[1];return!!this.isEquivalentClass(p)&&f(i,"equalsExact",this||_,1).call(this||_,p,m)}return f(i,"equalsExact",this||_,1).apply(this||_,arguments)}},{key:"getCoordinate",value:function(){if(1===arguments.length&&Number.isInteger(arguments[0])){var p=arguments[0];return(this||_)._geometries[p].getCoordinate()}return f(i,"getCoordinate",this||_,1).apply(this||_,arguments)}},{key:"getBoundaryDimension",value:function(){return Ct.FALSE}},{key:"getTypeCode",value:function(){return H.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return H.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[bt]}}],[{key:"constructor_",value:function(){var p=arguments[0],m=arguments[1];Xt.constructor_.call(this||_,p,m)}}])}(Xt),Bt=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"copyInternal",value:function(){return new i((this||_)._points.copy(),(this||_)._factory)}},{key:"getBoundaryDimension",value:function(){return Ct.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||f(i,"isClosed",this||_,1).call(this||_)}},{key:"reverseInternal",value:function(){var p=(this||_)._points.copy();return Lt.reverse(p),this.getFactory().createLinearRing(p)}},{key:"getTypeCode",value:function(){return H.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!f(i,"isClosed",this||_,1).call(this||_))throw new k("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<i.MINIMUM_VALID_SIZE)throw new k("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return H.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var p=arguments[0],m=arguments[1];Ot.constructor_.call(this||_,p,m),this.validateConstruction()}}])}(Ot);Bt.MINIMUM_VALID_SIZE=4;var Ut=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"setOrdinate",value:function(p,m){switch(p){case i.X:(this||_).x=m;break;case i.Y:(this||_).y=m;break;default:throw new k("Invalid ordinate index: "+p)}}},{key:"getZ",value:function(){return B.NULL_ORDINATE}},{key:"getOrdinate",value:function(p){switch(p){case i.X:return(this||_).x;case i.Y:return(this||_).y}throw new k("Invalid ordinate index: "+p)}},{key:"setZ",value:function(_){throw new k("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new i(this||_)}},{key:"toString",value:function(){return"("+(this||_).x+", "+(this||_).y+")"}},{key:"setCoordinate",value:function(p){(this||_).x=p.x,(this||_).y=p.y,(this||_).z=p.getZ()}}],[{key:"constructor_",value:function(){if(0===arguments.length)B.constructor_.call(this||_);else if(1===arguments.length){if(arguments[0]instanceof i){var p=arguments[0];B.constructor_.call(this||_,p.x,p.y)}else if(arguments[0]instanceof B){var m=arguments[0];B.constructor_.call(this||_,m.x,m.y)}}else if(2===arguments.length){var k=arguments[0],N=arguments[1];B.constructor_.call(this||_,k,N,B.NULL_ORDINATE)}}}])}(B);Ut.X=0,Ut.Y=1,Ut.Z=-1,Ut.M=-1;var Vt=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"getM",value:function(){return(this||_)._m}},{key:"setOrdinate",value:function(p,m){switch(p){case i.X:(this||_).x=m;break;case i.Y:(this||_).y=m;break;case i.M:(this||_)._m=m;break;default:throw new k("Invalid ordinate index: "+p)}}},{key:"setM",value:function(p){(this||_)._m=p}},{key:"getZ",value:function(){return B.NULL_ORDINATE}},{key:"getOrdinate",value:function(p){switch(p){case i.X:return(this||_).x;case i.Y:return(this||_).y;case i.M:return(this||_)._m}throw new k("Invalid ordinate index: "+p)}},{key:"setZ",value:function(_){throw new k("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new i(this||_)}},{key:"toString",value:function(){return"("+(this||_).x+", "+(this||_).y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(p){(this||_).x=p.x,(this||_).y=p.y,(this||_).z=p.getZ(),(this||_)._m=p.getM()}}],[{key:"constructor_",value:function(){if((this||_)._m=null,0===arguments.length)B.constructor_.call(this||_),(this||_)._m=0;else if(1===arguments.length){if(arguments[0]instanceof i){var p=arguments[0];B.constructor_.call(this||_,p.x,p.y),(this||_)._m=p._m}else if(arguments[0]instanceof B){var m=arguments[0];B.constructor_.call(this||_,m.x,m.y),(this||_)._m=this.getM()}}else if(3===arguments.length){var k=arguments[0],N=arguments[1],T=arguments[2];B.constructor_.call(this||_,k,N,B.NULL_ORDINATE),(this||_)._m=T}}}])}(B);Vt.X=0,Vt.Y=1,Vt.Z=-1,Vt.M=2;var Ht=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"getM",value:function(){return(this||_)._m}},{key:"setOrdinate",value:function(p,m){switch(p){case B.X:(this||_).x=m;break;case B.Y:(this||_).y=m;break;case B.Z:(this||_).z=m;break;case B.M:(this||_)._m=m;break;default:throw new k("Invalid ordinate index: "+p)}}},{key:"setM",value:function(p){(this||_)._m=p}},{key:"getOrdinate",value:function(p){switch(p){case B.X:return(this||_).x;case B.Y:return(this||_).y;case B.Z:return this.getZ();case B.M:return this.getM()}throw new k("Invalid ordinate index: "+p)}},{key:"copy",value:function(){return new i(this||_)}},{key:"toString",value:function(){return"("+(this||_).x+", "+(this||_).y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(p){(this||_).x=p.x,(this||_).y=p.y,(this||_).z=p.getZ(),(this||_)._m=p.getM()}}],[{key:"constructor_",value:function(){if((this||_)._m=null,0===arguments.length)B.constructor_.call(this||_),(this||_)._m=0;else if(1===arguments.length){if(arguments[0]instanceof i){var p=arguments[0];B.constructor_.call(this||_,p),(this||_)._m=p._m}else if(arguments[0]instanceof B){var m=arguments[0];B.constructor_.call(this||_,m),(this||_)._m=this.getM()}}else if(4===arguments.length){var k=arguments[0],N=arguments[1],T=arguments[2],S=arguments[3];B.constructor_.call(this||_,k,N,T),(this||_)._m=S}}}])}(B),Zt=function(){function t(){n(this||_,t)}return s(t,null,[{key:"measures",value:function(_){return _ instanceof Ut?0:_ instanceof Vt||_ instanceof Ht?1:0}},{key:"dimension",value:function(_){return _ instanceof Ut?2:_ instanceof Vt?3:_ instanceof Ht?4:3}},{key:"create",value:function(){if(1===arguments.length){var _=arguments[0];return t.create(_,0)}if(2===arguments.length){var p=arguments[0],m=arguments[1];return 2===p?new Ut:3===p&&0===m?new B:3===p&&1===m?new Vt:4===p&&1===m?new Ht:new B}}}])}(),jt=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"getCoordinate",value:function(_){return this.get(_)}},{key:"addAll",value:function(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&rt(arguments[0],j)){for(var p=arguments[1],m=!1,k=arguments[0].iterator();k.hasNext();)this.add(k.next(),p),m=!0;return m}return f(i,"addAll",this||_,1).apply(this||_,arguments)}},{key:"clone",value:function(){for(var p=f(i,"clone",this||_,1).call(this||_),m=0;m<this.size();m++)p.add(m,this.get(m).clone());return p}},{key:"toCoordinateArray",value:function(){if(0===arguments.length)return this.toArray(i.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(i.coordArrayType);for(var _=this.size(),p=new Array(_).fill(null),m=0;m<_;m++)p[m]=this.get(_-m-1);return p}}},{key:"add",value:function(){if(1===arguments.length){var p=arguments[0];return f(i,"add",this||_,1).call(this||_,p)}if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var m=arguments[0],k=arguments[1];return this.add(m,k,!0),!0}if(arguments[0]instanceof B&&"boolean"==typeof arguments[1]){var N=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(N))return null;f(i,"add",this||_,1).call(this||_,N)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var T=arguments[0],S=arguments[1];return this.add(T,S),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var L=arguments[0],C=arguments[1];if(arguments[2])for(var R=0;R<L.length;R++)this.add(L[R],C);else for(var w=L.length-1;w>=0;w--)this.add(L[w],C);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof B){var O=arguments[0],b=arguments[1];if(!arguments[2]){var M=this.size();if(M>0){if(O>0&&this.get(O-1).equals2D(b))return null;if(O<M&&this.get(O).equals2D(b))return null}}f(i,"add",this||_,1).call(this||_,O,b)}}else if(4===arguments.length){var D=arguments[0],F=arguments[1],G=arguments[2],q=arguments[3],Y=1;G>q&&(Y=-1);for(var X=G;X!==q;X+=Y)this.add(D[X],F);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var _=this.get(0).copy();this.add(_,!1)}}}],[{key:"constructor_",value:function(){if(0===arguments.length);else if(1===arguments.length){var _=arguments[0];this.ensureCapacity(_.length),this.add(_,!0)}else if(2===arguments.length){var p=arguments[0],m=arguments[1];this.ensureCapacity(p.length),this.add(p,m)}}}])}(dt);jt.coordArrayType=new Array(0).fill(null);var Wt=function(){function t(){n(this||_,t)}return s(t,null,[{key:"isRing",value:function(_){return!(_.length<4)&&!!_[0].equals2D(_[_.length-1])}},{key:"ptNotInList",value:function(_,p){for(var m=0;m<_.length;m++){var k=_[m];if(t.indexOf(k,p)<0)return k}return null}},{key:"scroll",value:function(_,p){var m=t.indexOf(p,_);if(m<0)return null;var k=new Array(_.length).fill(null);kt.arraycopy(_,m,k,0,_.length-m),kt.arraycopy(_,0,k,_.length-m,m),kt.arraycopy(k,0,_,0,_.length)}},{key:"equals",value:function(){if(2===arguments.length){var _=arguments[0],p=arguments[1];if(_===p)return!0;if(null===_||null===p)return!1;if(_.length!==p.length)return!1;for(var m=0;m<_.length;m++)if(!_[m].equals(p[m]))return!1;return!0}if(3===arguments.length){var k=arguments[0],N=arguments[1],T=arguments[2];if(k===N)return!0;if(null===k||null===N)return!1;if(k.length!==N.length)return!1;for(var S=0;S<k.length;S++)if(0!==T.compare(k[S],N[S]))return!1;return!0}}},{key:"intersection",value:function(_,p){for(var m=new jt,k=0;k<_.length;k++)p.intersects(_[k])&&m.add(_[k],!0);return m.toCoordinateArray()}},{key:"measures",value:function(_){if(null===_||0===_.length)return 0;var p,m=0,k=a(_);try{for(k.s();!(p=k.n()).done;){var N=p.value;m=Math.max(m,Zt.measures(N))}}catch(_){k.e(_)}finally{k.f()}return m}},{key:"hasRepeatedPoints",value:function(_){for(var p=1;p<_.length;p++)if(_[p-1].equals(_[p]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(_){return t.hasRepeatedPoints(_)?new jt(_,!1).toCoordinateArray():_}},{key:"reverse",value:function(_){for(var p=_.length-1,m=Math.trunc(p/2),k=0;k<=m;k++){var N=_[k];_[k]=_[p-k],_[p-k]=N}}},{key:"removeNull",value:function(_){for(var p=0,m=0;m<_.length;m++)null!==_[m]&&p++;var k=new Array(p).fill(null);if(0===p)return k;for(var N=0,T=0;T<_.length;T++)null!==_[T]&&(k[N++]=_[T]);return k}},{key:"copyDeep",value:function(){if(1===arguments.length){for(var _=arguments[0],p=new Array(_.length).fill(null),m=0;m<_.length;m++)p[m]=_[m].copy();return p}if(5===arguments.length)for(var k=arguments[0],N=arguments[1],T=arguments[2],S=arguments[3],L=arguments[4],C=0;C<L;C++)T[S+C]=k[N+C].copy()}},{key:"isEqualReversed",value:function(_,p){for(var m=0;m<_.length;m++){var k=_[m],N=p[_.length-m-1];if(0!==k.compareTo(N))return!1}return!0}},{key:"envelope",value:function(_){for(var p=new V,m=0;m<_.length;m++)p.expandToInclude(_[m]);return p}},{key:"toCoordinateArray",value:function(_){return _.toArray(t.coordArrayType)}},{key:"dimension",value:function(_){if(null===_||0===_.length)return 3;var p,m=0,k=a(_);try{for(k.s();!(p=k.n()).done;){var N=p.value;m=Math.max(m,Zt.dimension(N))}}catch(_){k.e(_)}finally{k.f()}return m}},{key:"atLeastNCoordinatesOrNothing",value:function(_,p){return p.length>=_?p:[]}},{key:"indexOf",value:function(_,p){for(var m=0;m<p.length;m++)if(_.equals(p[m]))return m;return-1}},{key:"increasingDirection",value:function(_){for(var p=0;p<Math.trunc(_.length/2);p++){var m=_.length-1-p,k=_[p].compareTo(_[m]);if(0!==k)return k}return 1}},{key:"compare",value:function(_,p){for(var m=0;m<_.length&&m<p.length;){var k=_[m].compareTo(p[m]);if(0!==k)return k;m++}return m<p.length?-1:m<_.length?1:0}},{key:"minCoordinate",value:function(_){for(var p=null,m=0;m<_.length;m++)(null===p||p.compareTo(_[m])>0)&&(p=_[m]);return p}},{key:"extract",value:function(_,p,m){p=xt.clamp(p,0,_.length);var k=(m=xt.clamp(m,-1,_.length))-p+1;m<0&&(k=0),p>=_.length&&(k=0),m<p&&(k=0);var N=new Array(k).fill(null);if(0===k)return N;for(var T=0,S=p;S<=m;S++)N[T++]=_[S];return N}}])}(),Kt=function(){return s((function t(){n(this||_,t)}),[{key:"compare",value:function(_,p){var m=_,k=p;return Wt.compare(m,k)}},{key:"interfaces_",get:function(){return[P]}}])}(),Jt=function(){return s((function t(){n(this||_,t)}),[{key:"compare",value:function(_,p){var m=_,k=p;if(m.length<k.length)return-1;if(m.length>k.length)return 1;if(0===m.length)return 0;var N=Wt.compare(m,k);return Wt.isEqualReversed(m,k)?0:N}},{key:"OLDcompare",value:function(_,p){var m=_,k=p;if(m.length<k.length)return-1;if(m.length>k.length)return 1;if(0===m.length)return 0;for(var N=Wt.increasingDirection(m),T=Wt.increasingDirection(k),S=N>0?0:m.length-1,L=T>0?0:m.length-1,C=0;C<m.length;C++){var R=m[S].compareTo(k[L]);if(0!==R)return R;S+=N,L+=T}return 0}},{key:"interfaces_",get:function(){return[P]}}])}();Wt.ForwardComparator=Kt,Wt.BidirectionalComparator=Jt,Wt.coordArrayType=new Array(0).fill(null);var Qt=function(){return s((function t(p){n(this||_,t),(this||_).str=p}),[{key:"append",value:function(p){(this||_).str+=p}},{key:"setCharAt",value:function(p,m){(this||_).str=(this||_).str.substr(0,p)+m+(this||_).str.substr(p+1)}},{key:"toString",value:function(){return(this||_).str}}])}(),$t=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"getM",value:function(p){return this.hasM()?(this||_)._coordinates[p].getM():A.NaN}},{key:"setOrdinate",value:function(p,m,k){switch(m){case ct.X:(this||_)._coordinates[p].x=k;break;case ct.Y:(this||_)._coordinates[p].y=k;break;default:(this||_)._coordinates[p].setOrdinate(m,k)}}},{key:"getZ",value:function(p){return this.hasZ()?(this||_)._coordinates[p].getZ():A.NaN}},{key:"size",value:function(){return(this||_)._coordinates.length}},{key:"getOrdinate",value:function(p,m){switch(m){case ct.X:return(this||_)._coordinates[p].x;case ct.Y:return(this||_)._coordinates[p].y;default:return(this||_)._coordinates[p].getOrdinate(m)}}},{key:"getCoordinate",value:function(){if(1===arguments.length){var p=arguments[0];return(this||_)._coordinates[p]}if(2===arguments.length){var m=arguments[0];arguments[1].setCoordinate((this||_)._coordinates[m])}}},{key:"getCoordinateCopy",value:function(p){var m=this.createCoordinate();return m.setCoordinate((this||_)._coordinates[p]),m}},{key:"createCoordinate",value:function(){return Zt.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return(this||_)._dimension}},{key:"getX",value:function(p){return(this||_)._coordinates[p].x}},{key:"getMeasures",value:function(){return(this||_)._measures}},{key:"expandEnvelope",value:function(p){for(var m=0;m<(this||_)._coordinates.length;m++)p.expandToInclude((this||_)._coordinates[m]);return p}},{key:"copy",value:function(){for(var p=new Array(this.size()).fill(null),m=0;m<(this||_)._coordinates.length;m++){var k=this.createCoordinate();k.setCoordinate((this||_)._coordinates[m]),p[m]=k}return new t(p,(this||_)._dimension,(this||_)._measures)}},{key:"toString",value:function(){if((this||_)._coordinates.length>0){var p=new Qt(17*(this||_)._coordinates.length);p.append("("),p.append((this||_)._coordinates[0]);for(var m=1;m<(this||_)._coordinates.length;m++)p.append(", "),p.append((this||_)._coordinates[m]);return p.append(")"),p.toString()}return"()"}},{key:"getY",value:function(p){return(this||_)._coordinates[p].y}},{key:"toCoordinateArray",value:function(){return(this||_)._coordinates}},{key:"interfaces_",get:function(){return[ct,E]}}],[{key:"constructor_",value:function(){if((this||_)._dimension=3,(this||_)._measures=0,(this||_)._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var p=arguments[0];t.constructor_.call(this||_,p,Wt.dimension(p),Wt.measures(p))}else if(Number.isInteger(arguments[0])){var m=arguments[0];(this||_)._coordinates=new Array(m).fill(null);for(var k=0;k<m;k++)(this||_)._coordinates[k]=new B}else if(rt(arguments[0],ct)){var N=arguments[0];if(null===N)return(this||_)._coordinates=new Array(0).fill(null),null;(this||_)._dimension=N.getDimension(),(this||_)._measures=N.getMeasures(),(this||_)._coordinates=new Array(N.size()).fill(null);for(var T=0;T<(this||_)._coordinates.length;T++)(this||_)._coordinates[T]=N.getCoordinateCopy(T)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var S=arguments[0],L=arguments[1];t.constructor_.call(this||_,S,L,Wt.measures(S))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var C=arguments[0],R=arguments[1];(this||_)._coordinates=new Array(C).fill(null),(this||_)._dimension=R;for(var w=0;w<C;w++)(this||_)._coordinates[w]=Zt.create(R)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var O=arguments[0],b=arguments[1],M=arguments[2];(this||_)._dimension=b,(this||_)._measures=M,(this||_)._coordinates=null===O?new Array(0).fill(null):O}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var D=arguments[0],F=arguments[1],G=arguments[2];(this||_)._coordinates=new Array(D).fill(null),(this||_)._dimension=F,(this||_)._measures=G;for(var q=0;q<D;q++)(this||_)._coordinates[q]=this.createCoordinate()}}}])}(),te=function(){function t(){n(this||_,t)}return s(t,[{key:"readResolve",value:function(){return t.instance()}},{key:"create",value:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new $t(arguments[0]);if(rt(arguments[0],ct))return new $t(arguments[0])}else{if(2===arguments.length){var _=arguments[1];return _>3&&(_=3),_<2&&(_=2),new $t(arguments[0],_)}if(3===arguments.length){var p=arguments[2],m=arguments[1]-p;return p>1&&(p=1),m>3&&(m=3),m<2&&(m=2),new $t(arguments[0],m+p,p)}}}},{key:"interfaces_",get:function(){return[It,E]}}],[{key:"instance",value:function(){return t.instanceObject}}])}();te.instanceObject=new te;var ee=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"copyInternal",value:function(){for(var p=new Array((this||_)._geometries.length).fill(null),m=0;m<p.length;m++)p[m]=(this||_)._geometries[m].copy();return new i(p,(this||_)._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof H){var p=arguments[0],m=arguments[1];return!!this.isEquivalentClass(p)&&f(i,"equalsExact",this||_,1).call(this||_,p,m)}return f(i,"equalsExact",this||_,1).apply(this||_,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return H.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var p=new dt,m=0;m<(this||_)._geometries.length;m++)for(var k=(this||_)._geometries[m].getBoundary(),N=0;N<k.getNumGeometries();N++)p.add(k.getGeometryN(N));var T=new Array(p.size()).fill(null);return this.getFactory().createMultiLineString(p.toArray(T))}},{key:"getGeometryType",value:function(){return H.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[Dt]}}],[{key:"constructor_",value:function(){var p=arguments[0],m=arguments[1];Xt.constructor_.call(this||_,p,m)}}])}(Xt),ne=function(){return s((function t(){n(this||_,t)}),[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),ie=function(p){function i(){var p;return n(this||_,i),(p=e(this||_,i)).map=new Map,p}return l(i,p),s(i,[{key:"get",value:function(p){return(this||_).map.get(p)||null}},{key:"put",value:function(p,m){return(this||_).map.set(p,m),m}},{key:"values",value:function(){for(var p=new dt,m=(this||_).map.values(),k=m.next();!k.done;)p.add(k.value),k=m.next();return p}},{key:"entrySet",value:function(){var p=new Q;return(this||_).map.entries().forEach((function(_){return p.add(_)})),p}},{key:"size",value:function(){return(this||_).map.size()}}])}(ne),re=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"equals",value:function(p){if(!(p instanceof t))return!1;var m=p;return(this||_)._modelType===m._modelType&&(this||_)._scale===m._scale}},{key:"compareTo",value:function(_){var p=_,m=this.getMaximumSignificantDigits(),k=p.getMaximumSignificantDigits();return ot.compare(m,k)}},{key:"getScale",value:function(){return(this||_)._scale}},{key:"isFloating",value:function(){return(this||_)._modelType===t.FLOATING||(this||_)._modelType===t.FLOATING_SINGLE}},{key:"getType",value:function(){return(this||_)._modelType}},{key:"toString",value:function(){var p="UNKNOWN";return(this||_)._modelType===t.FLOATING?p="Floating":(this||_)._modelType===t.FLOATING_SINGLE?p="Floating-Single":(this||_)._modelType===t.FIXED&&(p="Fixed (Scale="+this.getScale()+")"),p}},{key:"makePrecise",value:function(){if("number"==typeof arguments[0]){var p=arguments[0];return A.isNaN(p)||(this||_)._modelType===t.FLOATING_SINGLE?p:(this||_)._modelType===t.FIXED?Math.round(p*(this||_)._scale)/(this||_)._scale:p}if(arguments[0]instanceof B){var m=arguments[0];if((this||_)._modelType===t.FLOATING)return null;m.x=this.makePrecise(m.x),m.y=this.makePrecise(m.y)}}},{key:"getMaximumSignificantDigits",value:function(){var p=16;return(this||_)._modelType===t.FLOATING?p=16:(this||_)._modelType===t.FLOATING_SINGLE?p=6:(this||_)._modelType===t.FIXED&&(p=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),p}},{key:"setScale",value:function(p){(this||_)._scale=Math.abs(p)}},{key:"interfaces_",get:function(){return[E,x]}}],[{key:"constructor_",value:function(){if((this||_)._modelType=null,(this||_)._scale=null,0===arguments.length)(this||_)._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof se){var p=arguments[0];(this||_)._modelType=p,p===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var m=arguments[0];(this||_)._modelType=t.FIXED,this.setScale(m)}else if(arguments[0]instanceof t){var k=arguments[0];(this||_)._modelType=k._modelType,(this||_)._scale=k._scale}}},{key:"mostPrecise",value:function(_,p){return _.compareTo(p)>=0?_:p}}])}(),se=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"readResolve",value:function(){return t.nameToTypeMap.get((this||_)._name)}},{key:"toString",value:function(){return(this||_)._name}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){(this||_)._name=null;var p=arguments[0];(this||_)._name=p,t.nameToTypeMap.put(p,this||_)}}])}();se.nameToTypeMap=new ie,re.Type=se,re.FIXED=new se("FIXED"),re.FLOATING=new se("FLOATING"),re.FLOATING_SINGLE=new se("FLOATING SINGLE"),re.maximumPreciseValue=9007199254740992;var ae=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"copyInternal",value:function(){for(var p=new Array((this||_)._geometries.length).fill(null),m=0;m<p.length;m++)p[m]=(this||_)._geometries[m].copy();return new i(p,(this||_)._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof H){var p=arguments[0],m=arguments[1];return!!this.isEquivalentClass(p)&&f(i,"equalsExact",this||_,1).call(this||_,p,m)}return f(i,"equalsExact",this||_,1).apply(this||_,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Ct.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var p=0;p<(this||_)._geometries.length;p++)if(!(this||_)._geometries[p].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return H.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new K}},{key:"getGeometryType",value:function(){return H.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[St]}}],[{key:"constructor_",value:function(){var p=arguments[0],m=arguments[1];Xt.constructor_.call(this||_,p,m)}}])}(Xt),oe=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"createEmpty",value:function(_){switch(_){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new k("Invalid dimension: "+_)}}},{key:"toGeometry",value:function(_){return _.isNull()?this.createPoint():_.getMinX()===_.getMaxX()&&_.getMinY()===_.getMaxY()?this.createPoint(new B(_.getMinX(),_.getMinY())):_.getMinX()===_.getMaxX()||_.getMinY()===_.getMaxY()?this.createLineString([new B(_.getMinX(),_.getMinY()),new B(_.getMaxX(),_.getMaxY())]):this.createPolygon(this.createLinearRing([new B(_.getMinX(),_.getMinY()),new B(_.getMinX(),_.getMaxY()),new B(_.getMaxX(),_.getMaxY()),new B(_.getMaxX(),_.getMinY()),new B(_.getMinX(),_.getMinY())]),null)}},{key:"createLineString",value:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var p=arguments[0];return this.createLineString(null!==p?this.getCoordinateSequenceFactory().create(p):null)}if(rt(arguments[0],ct))return new Ot(arguments[0],this||_)}}},{key:"createMultiLineString",value:function(){return 0===arguments.length?new ae(null,this||_):1===arguments.length?new ae(arguments[0],this||_):void 0}},{key:"buildGeometry",value:function(_){for(var p=null,m=!1,k=!1,N=_.iterator();N.hasNext();){var T=N.next(),S=T.getTypeCode();null===p&&(p=S),S!==p&&(m=!0),T instanceof Xt&&(k=!0)}if(null===p)return this.createGeometryCollection();if(m||k)return this.createGeometryCollection(t.toGeometryArray(_));var L=_.iterator().next();if(_.size()>1){if(L instanceof Ft)return this.createMultiPolygon(t.toPolygonArray(_));if(L instanceof Ot)return this.createMultiLineString(t.toLineStringArray(_));if(L instanceof At)return this.createMultiPoint(t.toPointArray(_));q.shouldNeverReachHere("Unhandled geometry type: "+L.getGeometryType())}return L}},{key:"createMultiPointFromCoords",value:function(_){return this.createMultiPoint(null!==_?this.getCoordinateSequenceFactory().create(_):null)}},{key:"createPoint",value:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof B){var p=arguments[0];return this.createPoint(null!==p?this.getCoordinateSequenceFactory().create([p]):null)}if(rt(arguments[0],ct))return new At(arguments[0],this||_)}}},{key:"getCoordinateSequenceFactory",value:function(){return(this||_)._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(rt(arguments[0],ct)){var p=arguments[0];return this.createPolygon(this.createLinearRing(p))}if(arguments[0]instanceof Array){var m=arguments[0];return this.createPolygon(this.createLinearRing(m))}if(arguments[0]instanceof Bt){var k=arguments[0];return this.createPolygon(k,null)}}else if(2===arguments.length)return new Ft(arguments[0],arguments[1],this||_)}},{key:"getSRID",value:function(){return(this||_)._SRID}},{key:"createGeometryCollection",value:function(){return 0===arguments.length?new Xt(null,this||_):1===arguments.length?new Xt(arguments[0],this||_):void 0}},{key:"getPrecisionModel",value:function(){return(this||_)._precisionModel}},{key:"createLinearRing",value:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var p=arguments[0];return this.createLinearRing(null!==p?this.getCoordinateSequenceFactory().create(p):null)}if(rt(arguments[0],ct))return new Bt(arguments[0],this||_)}}},{key:"createMultiPolygon",value:function(){return 0===arguments.length?new ee(null,this||_):1===arguments.length?new ee(arguments[0],this||_):void 0}},{key:"createMultiPoint",value:function(){if(0===arguments.length)return new zt(null,this||_);if(1===arguments.length){if(arguments[0]instanceof Array)return new zt(arguments[0],this||_);if(rt(arguments[0],ct)){var p=arguments[0];if(null===p)return this.createMultiPoint(new Array(0).fill(null));for(var m=new Array(p.size()).fill(null),k=0;k<p.size();k++){var N=this.getCoordinateSequenceFactory().create(1,p.getDimension(),p.getMeasures());Lt.copy(p,k,N,0,1),m[k]=this.createPoint(N)}return this.createMultiPoint(m)}}}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){if((this||_)._precisionModel=null,(this||_)._coordinateSequenceFactory=null,(this||_)._SRID=null,0===arguments.length)t.constructor_.call(this||_,new re,0);else if(1===arguments.length){if(rt(arguments[0],It)){var p=arguments[0];t.constructor_.call(this||_,new re,0,p)}else if(arguments[0]instanceof re){var m=arguments[0];t.constructor_.call(this||_,m,0,t.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var k=arguments[0],N=arguments[1];t.constructor_.call(this||_,k,N,t.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var T=arguments[0],S=arguments[1],L=arguments[2];(this||_)._precisionModel=T,(this||_)._coordinateSequenceFactory=L,(this||_)._SRID=S}}},{key:"toMultiPolygonArray",value:function(_){var p=new Array(_.size()).fill(null);return _.toArray(p)}},{key:"toGeometryArray",value:function(_){if(null===_)return null;var p=new Array(_.size()).fill(null);return _.toArray(p)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return te.instance()}},{key:"toMultiLineStringArray",value:function(_){var p=new Array(_.size()).fill(null);return _.toArray(p)}},{key:"toLineStringArray",value:function(_){var p=new Array(_.size()).fill(null);return _.toArray(p)}},{key:"toMultiPointArray",value:function(_){var p=new Array(_.size()).fill(null);return _.toArray(p)}},{key:"toLinearRingArray",value:function(_){var p=new Array(_.size()).fill(null);return _.toArray(p)}},{key:"toPointArray",value:function(_){var p=new Array(_.size()).fill(null);return _.toArray(p)}},{key:"toPolygonArray",value:function(_){var p=new Array(_.size()).fill(null);return _.toArray(p)}},{key:"createPointFromInternalCoord",value:function(_,p){return p.getPrecisionModel().makePrecise(_),p.getFactory().createPoint(_)}}])}(),ue="XY",le="XYZ",he="XYM",ce="XYZM",fe={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},ge="EMPTY",ve=1,ye=2,de=3,_e=4,pe=5,me=6;for(var ke in fe)fe[ke].toUpperCase();var xe=function(){return s((function t(p){n(this||_,t),(this||_).wkt=p,(this||_).index_=-1}),[{key:"isAlpha_",value:function(_){return _>="a"&&_<="z"||_>="A"&&_<="Z"}},{key:"isNumeric_",value:function(_,p){return _>="0"&&_<="9"||"."==_&&!(void 0!==p&&p)}},{key:"isWhiteSpace_",value:function(_){return" "==_||"\t"==_||"\r"==_||"\n"==_}},{key:"nextChar_",value:function(){return(this||_).wkt.charAt(++(this||_).index_)}},{key:"nextToken",value:function(){var p,m=this.nextChar_(),k=(this||_).index_,N=m;if("("==m)p=ye;else if(","==m)p=pe;else if(")"==m)p=de;else if(this.isNumeric_(m)||"-"==m)p=_e,N=this.readNumber_();else if(this.isAlpha_(m))p=ve,N=this.readText_();else{if(this.isWhiteSpace_(m))return this.nextToken();if(""!==m)throw new Error("Unexpected character: "+m);p=me}return{position:k,value:N,type:p}}},{key:"readNumber_",value:function(){var p,m=(this||_).index_,k=!1,N=!1;do{"."==p?k=!0:"e"!=p&&"E"!=p||(N=!0),p=this.nextChar_()}while(this.isNumeric_(p,k)||!N&&("e"==p||"E"==p)||N&&("-"==p||"+"==p));return parseFloat((this||_).wkt.substring(m,(this||_).index_--))}},{key:"readText_",value:function(){var p,m=(this||_).index_;do{p=this.nextChar_()}while(this.isAlpha_(p));return(this||_).wkt.substring(m,(this||_).index_--).toUpperCase()}}])}(),Te=function(){return s((function t(p,m){n(this||_,t),(this||_).lexer_=p,(this||_).token_,(this||_).layout_=ue,(this||_).factory=m}),[{key:"consume_",value:function(){(this||_).token_=(this||_).lexer_.nextToken()}},{key:"isTokenType",value:function(p){return(this||_).token_.type==p}},{key:"match",value:function(_){var p=this.isTokenType(_);return p&&this.consume_(),p}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var p=ue,m=(this||_).token_;if(this.isTokenType(ve)){var k=m.value;"Z"===k?p=le:"M"===k?p=he:"ZM"===k&&(p=ce),p!==ue&&this.consume_()}return p}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(ye)){var _=[];do{_.push(this.parseGeometry_())}while(this.match(pe));if(this.match(de))return _}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(ye)){var _=this.parsePoint_();if(this.match(de))return _}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(ye)){var _=this.parsePointList_();if(this.match(de))return _}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(ye)){var _=this.parseLineStringTextList_();if(this.match(de))return _}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var p;if(this.match(ye)){if(p=(this||_).token_.type==ye?this.parsePointTextList_():this.parsePointList_(),this.match(de))return p}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(ye)){var _=this.parseLineStringTextList_();if(this.match(de))return _}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(ye)){var _=this.parsePolygonTextList_();if(this.match(de))return _}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var p=[],m=(this||_).layout_.length,k=0;k<m;++k){var N=(this||_).token_;if(!this.match(_e))break;p.push(N.value)}if(p.length==m)return p;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var _=[this.parsePoint_()];this.match(pe);)_.push(this.parsePoint_());return _}},{key:"parsePointTextList_",value:function(){for(var _=[this.parsePointText_()];this.match(pe);)_.push(this.parsePointText_());return _}},{key:"parseLineStringTextList_",value:function(){for(var _=[this.parseLineStringText_()];this.match(pe);)_.push(this.parseLineStringText_());return _}},{key:"parsePolygonTextList_",value:function(){for(var _=[this.parsePolygonText_()];this.match(pe);)_.push(this.parsePolygonText_());return _}},{key:"isEmptyGeometry_",value:function(){var p=this.isTokenType(ve)&&(this||_).token_.value==ge;return p&&this.consume_(),p}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+(this||_).token_.value+"` at position "+(this||_).token_.position+" in `"+(this||_).lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var p=(this||_).factory,e=function(_){return i(B,g(_))},n=function(_){var m=_.map((function(_){return p.createLinearRing(_.map(e))}));return m.length>1?p.createPolygon(m[0],m.slice(1)):p.createPolygon(m[0])},m=(this||_).token_;if(this.match(ve)){var k=m.value;if((this||_).layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==k){var N=this.parseGeometryCollectionText_();return p.createGeometryCollection(N)}switch(k){case"POINT":var T=this.parsePointText_();return T?p.createPoint(i(B,g(T))):p.createPoint();case"LINESTRING":var S=this.parseLineStringText_().map(e);return p.createLineString(S);case"LINEARRING":var L=this.parseLineStringText_().map(e);return p.createLinearRing(L);case"POLYGON":var C=this.parsePolygonText_();return C&&0!==C.length?n(C):p.createPolygon();case"MULTIPOINT":var R=this.parseMultiPointText_();if(!R||0===R.length)return p.createMultiPoint();var w=R.map(e).map((function(_){return p.createPoint(_)}));return p.createMultiPoint(w);case"MULTILINESTRING":var O=this.parseMultiLineStringText_().map((function(_){return p.createLineString(_.map(e))}));return p.createMultiLineString(O);case"MULTIPOLYGON":var b=this.parseMultiPolygonText_();if(!b||0===b.length)return p.createMultiPolygon();var M=b.map(n);return p.createMultiPolygon(M);default:throw new Error("Invalid geometry type: "+k)}}throw new Error(this.formatErrorMessage_())}}])}();function Ie(_){if(_.isEmpty())return"";var p=_.getCoordinate(),m=[p.x,p.y];return void 0===p.z||Number.isNaN(p.z)||m.push(p.z),void 0===p.m||Number.isNaN(p.m)||m.push(p.m),m.join(" ")}function Ee(_){for(var p=_.getCoordinates().map((function(_){var p=[_.x,_.y];return void 0===_.z||Number.isNaN(_.z)||p.push(_.z),void 0===_.m||Number.isNaN(_.m)||p.push(_.m),p})),m=[],k=0,N=p.length;k<N;++k)m.push(p[k].join(" "));return m.join(", ")}function Ne(_){var p=[];p.push("("+Ee(_.getExteriorRing())+")");for(var m=0,k=_.getNumInteriorRing();m<k;++m)p.push("("+Ee(_.getInteriorRingN(m))+")");return p.join(", ")}var Le={Point:Ie,LineString:Ee,LinearRing:Ee,Polygon:Ne,MultiPoint:function(_){for(var p=[],m=0,k=_.getNumGeometries();m<k;++m)p.push("("+Ie(_.getGeometryN(m))+")");return p.join(", ")},MultiLineString:function(_){for(var p=[],m=0,k=_.getNumGeometries();m<k;++m)p.push("("+Ee(_.getGeometryN(m))+")");return p.join(", ")},MultiPolygon:function(_){for(var p=[],m=0,k=_.getNumGeometries();m<k;++m)p.push("("+Ne(_.getGeometryN(m))+")");return p.join(", ")},GeometryCollection:function(_){for(var p=[],m=0,k=_.getNumGeometries();m<k;++m)p.push(Se(_.getGeometryN(m)));return p.join(", ")}};function Se(_){var p=_.getGeometryType(),m=Le[p];p=p.toUpperCase();var k=function(_){var p="";if(_.isEmpty())return p;var m=_.getCoordinate();return void 0===m.z||Number.isNaN(m.z)||(p+="Z"),void 0===m.m||Number.isNaN(m.m)||(p+="M"),p}(_);return k.length>0&&(p+=" "+k),_.isEmpty()?p+" "+ge:p+" ("+m(_)+")"}var Ce=function(){return s((function t(p){n(this||_,t),(this||_).geometryFactory=p||new oe,(this||_).precisionModel=(this||_).geometryFactory.getPrecisionModel()}),[{key:"read",value:function(p){var m=new xe(p);return new Te(m,(this||_).geometryFactory).parse()}},{key:"write",value:function(_){return Se(_)}}])}(),Re=function(){return s((function t(p){n(this||_,t),(this||_).parser=new Ce(p)}),[{key:"write",value:function(p){return(this||_).parser.write(p)}}],[{key:"toLineString",value:function(_,p){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+_.x+" "+_.y+", "+p.x+" "+p.y+" )"}}])}(),we=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"getIndexAlongSegment",value:function(p,m){return this.computeIntLineIndex(),(this||_)._intLineIndex[p][m]}},{key:"getTopologySummary",value:function(){var p=new Qt;return this.isEndPoint()&&p.append(" endpoint"),(this||_)._isProper&&p.append(" proper"),this.isCollinear()&&p.append(" collinear"),p.toString()}},{key:"computeIntersection",value:function(p,m,k,N){(this||_)._inputLines[0][0]=p,(this||_)._inputLines[0][1]=m,(this||_)._inputLines[1][0]=k,(this||_)._inputLines[1][1]=N,(this||_)._result=this.computeIntersect(p,m,k,N)}},{key:"getIntersectionNum",value:function(){return(this||_)._result}},{key:"computeIntLineIndex",value:function(){if(0===arguments.length)null===(this||_)._intLineIndex&&((this||_)._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var p=arguments[0];this.getEdgeDistance(p,0)>this.getEdgeDistance(p,1)?((this||_)._intLineIndex[p][0]=0,(this||_)._intLineIndex[p][1]=1):((this||_)._intLineIndex[p][0]=1,(this||_)._intLineIndex[p][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&(this||_)._isProper}},{key:"setPrecisionModel",value:function(p){(this||_)._precisionModel=p}},{key:"isInteriorIntersection",value:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var p=arguments[0],m=0;m<(this||_)._result;m++)if(!(this||_)._intPt[m].equals2D((this||_)._inputLines[p][0])&&!(this||_)._intPt[m].equals2D((this||_)._inputLines[p][1]))return!0;return!1}}},{key:"getIntersection",value:function(p){return(this||_)._intPt[p]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!(this||_)._isProper}},{key:"hasIntersection",value:function(){return(this||_)._result!==t.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(p,m){return t.computeEdgeDistance((this||_)._intPt[m],(this||_)._inputLines[p][0],(this||_)._inputLines[p][1])}},{key:"isCollinear",value:function(){return(this||_)._result===t.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Re.toLineString((this||_)._inputLines[0][0],(this||_)._inputLines[0][1])+" - "+Re.toLineString((this||_)._inputLines[1][0],(this||_)._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(p,m){return(this||_)._inputLines[p][m]}},{key:"isIntersection",value:function(p){for(var m=0;m<(this||_)._result;m++)if((this||_)._intPt[m].equals2D(p))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(p,m){return this.computeIntLineIndex(),(this||_)._intPt[(this||_)._intLineIndex[p][m]]}}],[{key:"constructor_",value:function(){(this||_)._result=null,(this||_)._inputLines=Array(2).fill().map((function(){return Array(2)})),(this||_)._intPt=new Array(2).fill(null),(this||_)._intLineIndex=null,(this||_)._isProper=null,(this||_)._pa=null,(this||_)._pb=null,(this||_)._precisionModel=null,(this||_)._intPt[0]=new B,(this||_)._intPt[1]=new B,(this||_)._pa=(this||_)._intPt[0],(this||_)._pb=(this||_)._intPt[1],(this||_)._result=0}},{key:"computeEdgeDistance",value:function(_,p,m){var k=Math.abs(m.x-p.x),N=Math.abs(m.y-p.y),T=-1;if(_.equals(p))T=0;else if(_.equals(m))T=k>N?k:N;else{var S=Math.abs(_.x-p.x),L=Math.abs(_.y-p.y);0!==(T=k>N?S:L)||_.equals(p)||(T=Math.max(S,L))}return q.isTrue(!(0===T&&!_.equals(p)),"Bad distance calculation"),T}},{key:"nonRobustComputeEdgeDistance",value:function(_,p,m){var k=_.x-p.x,N=_.y-p.y,T=Math.sqrt(k*k+N*N);return q.isTrue(!(0===T&&!_.equals(p)),"Invalid distance calculation"),T}}])}();we.DONT_INTERSECT=0,we.DO_INTERSECT=1,we.COLLINEAR=2,we.NO_INTERSECTION=0,we.POINT_INTERSECTION=1,we.COLLINEAR_INTERSECTION=2;var Oe=function(p){function i(){return n(this||_,i),e(this||_,i)}return l(i,p),s(i,[{key:"isInSegmentEnvelopes",value:function(p){var m=new V((this||_)._inputLines[0][0],(this||_)._inputLines[0][1]),k=new V((this||_)._inputLines[1][0],(this||_)._inputLines[1][1]);return m.contains(p)&&k.contains(p)}},{key:"computeIntersection",value:function(){if(3!==arguments.length)return f(i,"computeIntersection",this||_,1).apply(this||_,arguments);var p=arguments[0],m=arguments[1],k=arguments[2];if((this||_)._isProper=!1,V.intersects(m,k,p)&&0===ft.index(m,k,p)&&0===ft.index(k,m,p))return(this||_)._isProper=!0,(p.equals(m)||p.equals(k))&&((this||_)._isProper=!1),(this||_)._result=we.POINT_INTERSECTION,null;(this||_)._result=we.NO_INTERSECTION}},{key:"intersection",value:function(p,m,k,N){var T=this.intersectionSafe(p,m,k,N);return this.isInSegmentEnvelopes(T)||(T=new B(i.nearestEndpoint(p,m,k,N))),null!==(this||_)._precisionModel&&(this||_)._precisionModel.makePrecise(T),T}},{key:"checkDD",value:function(_,p,m,k,N){var T=ht.intersection(_,p,m,k),S=this.isInSegmentEnvelopes(T);kt.out.println("DD in env = "+S+"  --------------------- "+T),N.distance(T)>1e-4&&kt.out.println("Distance = "+N.distance(T))}},{key:"intersectionSafe",value:function(_,p,m,k){var N=mt.intersection(_,p,m,k);return null===N&&(N=i.nearestEndpoint(_,p,m,k)),N}},{key:"computeCollinearIntersection",value:function(p,m,k,N){var T=V.intersects(p,m,k),S=V.intersects(p,m,N),L=V.intersects(k,N,p),C=V.intersects(k,N,m);return T&&S?((this||_)._intPt[0]=k,(this||_)._intPt[1]=N,we.COLLINEAR_INTERSECTION):L&&C?((this||_)._intPt[0]=p,(this||_)._intPt[1]=m,we.COLLINEAR_INTERSECTION):T&&L?((this||_)._intPt[0]=k,(this||_)._intPt[1]=p,!k.equals(p)||S||C?we.COLLINEAR_INTERSECTION:we.POINT_INTERSECTION):T&&C?((this||_)._intPt[0]=k,(this||_)._intPt[1]=m,!k.equals(m)||S||L?we.COLLINEAR_INTERSECTION:we.POINT_INTERSECTION):S&&L?((this||_)._intPt[0]=N,(this||_)._intPt[1]=p,!N.equals(p)||T||C?we.COLLINEAR_INTERSECTION:we.POINT_INTERSECTION):S&&C?((this||_)._intPt[0]=N,(this||_)._intPt[1]=m,!N.equals(m)||T||L?we.COLLINEAR_INTERSECTION:we.POINT_INTERSECTION):we.NO_INTERSECTION}},{key:"computeIntersect",value:function(p,m,k,N){if((this||_)._isProper=!1,!V.intersects(p,m,k,N))return we.NO_INTERSECTION;var T=ft.index(p,m,k),S=ft.index(p,m,N);if(T>0&&S>0||T<0&&S<0)return we.NO_INTERSECTION;var L=ft.index(k,N,p),C=ft.index(k,N,m);return L>0&&C>0||L<0&&C<0?we.NO_INTERSECTION:0===T&&0===S&&0===L&&0===C?this.computeCollinearIntersection(p,m,k,N):(0===T||0===S||0===L||0===C?((this||_)._isProper=!1,p.equals2D(k)||p.equals2D(N)?(this||_)._intPt[0]=p:m.equals2D(k)||m.equals2D(N)?(this||_)._intPt[0]=m:0===T?(this||_)._intPt[0]=new B(k):0===S?(this||_)._intPt[0]=new B(N):0===L?(this||_)._intPt[0]=new B(p):0===C&&((this||_)._intPt[0]=new B(m))):((this||_)._isProper=!0,(this||_)._intPt[0]=this.intersection(p,m,k,N)),we.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(_,p,m,k){var N=_,T=Et.pointToSegment(_,m,k),S=Et.pointToSegment(p,m,k);return S<T&&(T=S,N=p),(S=Et.pointToSegment(m,_,p))<T&&(T=S,N=m),(S=Et.pointToSegment(k,_,p))<T&&(T=S,N=k),N}}])}(we),be=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"countSegment",value:function(p,m){if(p.x<(this||_)._p.x&&m.x<(this||_)._p.x)return null;if((this||_)._p.x===m.x&&(this||_)._p.y===m.y)return(this||_)._isPointOnSegment=!0,null;if(p.y===(this||_)._p.y&&m.y===(this||_)._p.y){var k=p.x,N=m.x;return k>N&&(k=m.x,N=p.x),(this||_)._p.x>=k&&(this||_)._p.x<=N&&((this||_)._isPointOnSegment=!0),null}if(p.y>(this||_)._p.y&&m.y<=(this||_)._p.y||m.y>(this||_)._p.y&&p.y<=(this||_)._p.y){var T=ft.index(p,m,(this||_)._p);if(T===ft.COLLINEAR)return(this||_)._isPointOnSegment=!0,null;m.y<p.y&&(T=-T),T===ft.LEFT&&(this||_)._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==Z.EXTERIOR}},{key:"getLocation",value:function(){return(this||_)._isPointOnSegment?Z.BOUNDARY:(this||_)._crossingCount%2==1?Z.INTERIOR:Z.EXTERIOR}},{key:"isOnSegment",value:function(){return(this||_)._isPointOnSegment}}],[{key:"constructor_",value:function(){(this||_)._p=null,(this||_)._crossingCount=0,(this||_)._isPointOnSegment=!1;var p=arguments[0];(this||_)._p=p}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof B&&rt(arguments[1],ct)){for(var _=arguments[1],p=new t(arguments[0]),m=new B,k=new B,N=1;N<_.size();N++)if(_.getCoordinate(N,m),_.getCoordinate(N-1,k),p.countSegment(m,k),p.isOnSegment())return p.getLocation();return p.getLocation()}if(arguments[0]instanceof B&&arguments[1]instanceof Array){for(var T=arguments[1],S=new t(arguments[0]),L=1;L<T.length;L++){var C=T[L],R=T[L-1];if(S.countSegment(C,R),S.isOnSegment())return S.getLocation()}return S.getLocation()}}}])}(),Ae=function(){function t(){n(this||_,t)}return s(t,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof B&&rt(arguments[1],ct)){for(var _=arguments[0],p=arguments[1],m=new Oe,k=new B,N=new B,T=p.size(),S=1;S<T;S++)if(p.getCoordinate(S-1,k),p.getCoordinate(S,N),m.computeIntersection(_,k,N),m.hasIntersection())return!0;return!1}if(arguments[0]instanceof B&&arguments[1]instanceof Array){for(var L=arguments[0],C=arguments[1],R=new Oe,w=1;w<C.length;w++){var O=C[w-1],b=C[w];if(R.computeIntersection(L,O,b),R.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(_,p){return be.locatePointInRing(_,p)}},{key:"isInRing",value:function(_,p){return t.locateInRing(_,p)!==Z.EXTERIOR}}])}(),Me=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"setAllLocations",value:function(p){for(var m=0;m<(this||_).location.length;m++)(this||_).location[m]=p}},{key:"isNull",value:function(){for(var p=0;p<(this||_).location.length;p++)if((this||_).location[p]!==Z.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(p){for(var m=0;m<(this||_).location.length;m++)(this||_).location[m]===Z.NONE&&((this||_).location[m]=p)}},{key:"isLine",value:function(){return 1===(this||_).location.length}},{key:"merge",value:function(p){if(p.location.length>(this||_).location.length){var m=new Array(3).fill(null);m[tt.ON]=(this||_).location[tt.ON],m[tt.LEFT]=Z.NONE,m[tt.RIGHT]=Z.NONE,(this||_).location=m}for(var k=0;k<(this||_).location.length;k++)(this||_).location[k]===Z.NONE&&k<p.location.length&&((this||_).location[k]=p.location[k])}},{key:"getLocations",value:function(){return(this||_).location}},{key:"flip",value:function(){if((this||_).location.length<=1)return null;var p=(this||_).location[tt.LEFT];(this||_).location[tt.LEFT]=(this||_).location[tt.RIGHT],(this||_).location[tt.RIGHT]=p}},{key:"toString",value:function(){var p=new at;return(this||_).location.length>1&&p.append(Z.toLocationSymbol((this||_).location[tt.LEFT])),p.append(Z.toLocationSymbol((this||_).location[tt.ON])),(this||_).location.length>1&&p.append(Z.toLocationSymbol((this||_).location[tt.RIGHT])),p.toString()}},{key:"setLocations",value:function(p,m,k){(this||_).location[tt.ON]=p,(this||_).location[tt.LEFT]=m,(this||_).location[tt.RIGHT]=k}},{key:"get",value:function(p){return p<(this||_).location.length?(this||_).location[p]:Z.NONE}},{key:"isArea",value:function(){return(this||_).location.length>1}},{key:"isAnyNull",value:function(){for(var p=0;p<(this||_).location.length;p++)if((this||_).location[p]===Z.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(1===arguments.length){var p=arguments[0];this.setLocation(tt.ON,p)}else if(2===arguments.length){var m=arguments[0],k=arguments[1];(this||_).location[m]=k}}},{key:"init",value:function(p){(this||_).location=new Array(p).fill(null),this.setAllLocations(Z.NONE)}},{key:"isEqualOnSide",value:function(p,m){return(this||_).location[m]===p.location[m]}},{key:"allPositionsEqual",value:function(p){for(var m=0;m<(this||_).location.length;m++)if((this||_).location[m]!==p)return!1;return!0}}],[{key:"constructor_",value:function(){if((this||_).location=null,1===arguments.length){if(arguments[0]instanceof Array){var p=arguments[0];this.init(p.length)}else if(Number.isInteger(arguments[0])){var m=arguments[0];this.init(1),(this||_).location[tt.ON]=m}else if(arguments[0]instanceof t){var k=arguments[0];if(this.init(k.location.length),null!==k)for(var N=0;N<(this||_).location.length;N++)(this||_).location[N]=k.location[N]}}else if(3===arguments.length){var T=arguments[0],S=arguments[1],L=arguments[2];this.init(3),(this||_).location[tt.ON]=T,(this||_).location[tt.LEFT]=S,(this||_).location[tt.RIGHT]=L}}}])}(),Pe=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"getGeometryCount",value:function(){var p=0;return(this||_).elt[0].isNull()||p++,(this||_).elt[1].isNull()||p++,p}},{key:"setAllLocations",value:function(p,m){(this||_).elt[p].setAllLocations(m)}},{key:"isNull",value:function(p){return(this||_).elt[p].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(1===arguments.length){var p=arguments[0];this.setAllLocationsIfNull(0,p),this.setAllLocationsIfNull(1,p)}else if(2===arguments.length){var m=arguments[0],k=arguments[1];(this||_).elt[m].setAllLocationsIfNull(k)}}},{key:"isLine",value:function(p){return(this||_).elt[p].isLine()}},{key:"merge",value:function(p){for(var m=0;m<2;m++)null===(this||_).elt[m]&&null!==p.elt[m]?(this||_).elt[m]=new Me(p.elt[m]):(this||_).elt[m].merge(p.elt[m])}},{key:"flip",value:function(){(this||_).elt[0].flip(),(this||_).elt[1].flip()}},{key:"getLocation",value:function(){if(1===arguments.length){var p=arguments[0];return(this||_).elt[p].get(tt.ON)}if(2===arguments.length){var m=arguments[0],k=arguments[1];return(this||_).elt[m].get(k)}}},{key:"toString",value:function(){var p=new at;return null!==(this||_).elt[0]&&(p.append("A:"),p.append((this||_).elt[0].toString())),null!==(this||_).elt[1]&&(p.append(" B:"),p.append((this||_).elt[1].toString())),p.toString()}},{key:"isArea",value:function(){if(0===arguments.length)return(this||_).elt[0].isArea()||(this||_).elt[1].isArea();if(1===arguments.length){var p=arguments[0];return(this||_).elt[p].isArea()}}},{key:"isAnyNull",value:function(p){return(this||_).elt[p].isAnyNull()}},{key:"setLocation",value:function(){if(2===arguments.length){var p=arguments[0],m=arguments[1];(this||_).elt[p].setLocation(tt.ON,m)}else if(3===arguments.length){var k=arguments[0],N=arguments[1],T=arguments[2];(this||_).elt[k].setLocation(N,T)}}},{key:"isEqualOnSide",value:function(p,m){return(this||_).elt[0].isEqualOnSide(p.elt[0],m)&&(this||_).elt[1].isEqualOnSide(p.elt[1],m)}},{key:"allPositionsEqual",value:function(p,m){return(this||_).elt[p].allPositionsEqual(m)}},{key:"toLine",value:function(p){(this||_).elt[p].isArea()&&((this||_).elt[p]=new Me((this||_).elt[p].location[0]))}}],[{key:"constructor_",value:function(){if((this||_).elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var p=arguments[0];(this||_).elt[0]=new Me(p),(this||_).elt[1]=new Me(p)}else if(arguments[0]instanceof t){var m=arguments[0];(this||_).elt[0]=new Me(m.elt[0]),(this||_).elt[1]=new Me(m.elt[1])}}else if(2===arguments.length){var k=arguments[0],N=arguments[1];(this||_).elt[0]=new Me(Z.NONE),(this||_).elt[1]=new Me(Z.NONE),(this||_).elt[k].setLocation(N)}else if(3===arguments.length){var T=arguments[0],S=arguments[1],L=arguments[2];(this||_).elt[0]=new Me(T,S,L),(this||_).elt[1]=new Me(T,S,L)}else if(4===arguments.length){var C=arguments[0],R=arguments[1],w=arguments[2],O=arguments[3];(this||_).elt[0]=new Me(Z.NONE,Z.NONE,Z.NONE),(this||_).elt[1]=new Me(Z.NONE,Z.NONE,Z.NONE),(this||_).elt[C].setLocations(R,w,O)}}},{key:"toLineLabel",value:function(_){for(var p=new t(Z.NONE),m=0;m<2;m++)p.setLocation(m,_.getLocation(m));return p}}])}(),De=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"computeRing",value:function(){if(null!==(this||_)._ring)return null;for(var p=new Array((this||_)._pts.size()).fill(null),m=0;m<(this||_)._pts.size();m++)p[m]=(this||_)._pts.get(m);(this||_)._ring=(this||_)._geometryFactory.createLinearRing(p),(this||_)._isHole=ft.isCCW((this||_)._ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===(this||_)._label.getGeometryCount()}},{key:"computePoints",value:function(p){(this||_)._startDe=p;var m=p,k=!0;do{if(null===m)throw new vt("Found null DirectedEdge");if(m.getEdgeRing()===(this||_))throw new vt("Directed Edge visited twice during ring-building at "+m.getCoordinate());(this||_)._edges.add(m);var N=m.getLabel();q.isTrue(N.isArea()),this.mergeLabel(N),this.addPoints(m.getEdge(),m.isForward(),k),k=!1,this.setEdgeRing(m,this||_),m=this.getNext(m)}while(m!==(this||_)._startDe)}},{key:"getLinearRing",value:function(){return(this||_)._ring}},{key:"getCoordinate",value:function(p){return(this||_)._pts.get(p)}},{key:"computeMaxNodeDegree",value:function(){(this||_)._maxNodeDegree=0;var p=(this||_)._startDe;do{var m=p.getNode().getEdges().getOutgoingDegree(this||_);m>(this||_)._maxNodeDegree&&((this||_)._maxNodeDegree=m),p=this.getNext(p)}while(p!==(this||_)._startDe);(this||_)._maxNodeDegree*=2}},{key:"addPoints",value:function(p,m,k){var N=p.getCoordinates();if(m){var T=1;k&&(T=0);for(var S=T;S<N.length;S++)(this||_)._pts.add(N[S])}else{var L=N.length-2;k&&(L=N.length-1);for(var C=L;C>=0;C--)(this||_)._pts.add(N[C])}}},{key:"isHole",value:function(){return(this||_)._isHole}},{key:"setInResult",value:function(){var p=(this||_)._startDe;do{p.getEdge().setInResult(!0),p=p.getNext()}while(p!==(this||_)._startDe)}},{key:"containsPoint",value:function(p){var m=this.getLinearRing();if(!m.getEnvelopeInternal().contains(p))return!1;if(!Ae.isInRing(p,m.getCoordinates()))return!1;for(var k=(this||_)._holes.iterator();k.hasNext();)if(k.next().containsPoint(p))return!1;return!0}},{key:"addHole",value:function(p){(this||_)._holes.add(p)}},{key:"isShell",value:function(){return null===(this||_)._shell}},{key:"getLabel",value:function(){return(this||_)._label}},{key:"getEdges",value:function(){return(this||_)._edges}},{key:"getMaxNodeDegree",value:function(){return(this||_)._maxNodeDegree<0&&this.computeMaxNodeDegree(),(this||_)._maxNodeDegree}},{key:"getShell",value:function(){return(this||_)._shell}},{key:"mergeLabel",value:function(){if(1===arguments.length){var p=arguments[0];this.mergeLabel(p,0),this.mergeLabel(p,1)}else if(2===arguments.length){var m=arguments[1],k=arguments[0].getLocation(m,tt.RIGHT);if(k===Z.NONE)return null;if((this||_)._label.getLocation(m)===Z.NONE)return(this||_)._label.setLocation(m,k),null}}},{key:"setShell",value:function(p){(this||_)._shell=p,null!==p&&p.addHole(this||_)}},{key:"toPolygon",value:function(p){for(var m=new Array((this||_)._holes.size()).fill(null),k=0;k<(this||_)._holes.size();k++)m[k]=(this||_)._holes.get(k).getLinearRing();return p.createPolygon(this.getLinearRing(),m)}}],[{key:"constructor_",value:function(){if((this||_)._startDe=null,(this||_)._maxNodeDegree=-1,(this||_)._edges=new dt,(this||_)._pts=new dt,(this||_)._label=new Pe(Z.NONE),(this||_)._ring=null,(this||_)._isHole=null,(this||_)._shell=null,(this||_)._holes=new dt,(this||_)._geometryFactory=null,0===arguments.length);else if(2===arguments.length){var p=arguments[0],m=arguments[1];(this||_)._geometryFactory=m,this.computePoints(p),this.computeRing()}}}])}(),Fe=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"setEdgeRing",value:function(_,p){_.setMinEdgeRing(p)}},{key:"getNext",value:function(_){return _.getNextMin()}}],[{key:"constructor_",value:function(){var p=arguments[0],m=arguments[1];De.constructor_.call(this||_,p,m)}}])}(De),Ge=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"buildMinimalRings",value:function(){var p=new dt,m=(this||_)._startDe;do{if(null===m.getMinEdgeRing()){var k=new Fe(m,(this||_)._geometryFactory);p.add(k)}m=m.getNext()}while(m!==(this||_)._startDe);return p}},{key:"setEdgeRing",value:function(_,p){_.setEdgeRing(p)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var p=(this||_)._startDe;do{p.getNode().getEdges().linkMinimalDirectedEdges(this||_),p=p.getNext()}while(p!==(this||_)._startDe)}},{key:"getNext",value:function(_){return _.getNext()}}],[{key:"constructor_",value:function(){var p=arguments[0],m=arguments[1];De.constructor_.call(this||_,p,m)}}])}(De),qe=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"setVisited",value:function(p){(this||_)._isVisited=p}},{key:"setInResult",value:function(p){(this||_)._isInResult=p}},{key:"isCovered",value:function(){return(this||_)._isCovered}},{key:"isCoveredSet",value:function(){return(this||_)._isCoveredSet}},{key:"setLabel",value:function(p){(this||_)._label=p}},{key:"getLabel",value:function(){return(this||_)._label}},{key:"setCovered",value:function(p){(this||_)._isCovered=p,(this||_)._isCoveredSet=!0}},{key:"updateIM",value:function(p){q.isTrue((this||_)._label.getGeometryCount()>=2,"found partial label"),this.computeIM(p)}},{key:"isInResult",value:function(){return(this||_)._isInResult}},{key:"isVisited",value:function(){return(this||_)._isVisited}}],[{key:"constructor_",value:function(){if((this||_)._label=null,(this||_)._isInResult=!1,(this||_)._isCovered=!1,(this||_)._isCoveredSet=!1,(this||_)._isVisited=!1,0===arguments.length);else if(1===arguments.length){var p=arguments[0];(this||_)._label=p}}}])}(),Ye=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"isIncidentEdgeInResult",value:function(){for(var _=this.getEdges().getEdges().iterator();_.hasNext();)if(_.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return 1===(this||_)._label.getGeometryCount()}},{key:"getCoordinate",value:function(){return(this||_)._coord}},{key:"print",value:function(p){p.println("node "+(this||_)._coord+" lbl: "+(this||_)._label)}},{key:"computeIM",value:function(_){}},{key:"computeMergedLocation",value:function(p,m){var k=Z.NONE;if(k=(this||_)._label.getLocation(m),!p.isNull(m)){var N=p.getLocation(m);k!==Z.BOUNDARY&&(k=N)}return k}},{key:"setLabel",value:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return f(i,"setLabel",this||_,1).apply(this||_,arguments);var p=arguments[0],m=arguments[1];null===(this||_)._label?(this||_)._label=new Pe(p,m):(this||_)._label.setLocation(p,m)}},{key:"getEdges",value:function(){return(this||_)._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof i){var p=arguments[0];this.mergeLabel(p._label)}else if(arguments[0]instanceof Pe)for(var m=arguments[0],k=0;k<2;k++){var N=this.computeMergedLocation(m,k);(this||_)._label.getLocation(k)===Z.NONE&&(this||_)._label.setLocation(k,N)}}},{key:"add",value:function(p){(this||_)._edges.insert(p),p.setNode(this||_)}},{key:"setLabelBoundary",value:function(p){if(null===(this||_)._label)return null;var m=Z.NONE;null!==(this||_)._label&&(m=(this||_)._label.getLocation(p));var k=null;switch(m){case Z.BOUNDARY:k=Z.INTERIOR;break;case Z.INTERIOR:default:k=Z.BOUNDARY}(this||_)._label.setLocation(p,k)}}],[{key:"constructor_",value:function(){(this||_)._coord=null,(this||_)._edges=null;var p=arguments[0],m=arguments[1];(this||_)._coord=p,(this||_)._edges=m,(this||_)._label=new Pe(0,Z.NONE)}}])}(qe),He=function(p){function i(){return n(this||_,i),e(this||_,i,arguments)}return l(i,p),s(i)}(ne);function ze(_){return null==_?0:_.color}function Xe(_){return null==_?null:_.parent}function Be(_,p){null!==_&&(_.color=p)}function Ue(_){return null==_?null:_.left}function Ve(_){return null==_?null:_.right}var Ze=function(p){function i(){var p;return n(this||_,i),(p=e(this||_,i)).root_=null,p.size_=0,p}return l(i,p),s(i,[{key:"get",value:function(p){for(var m=(this||_).root_;null!==m;){var k=p.compareTo(m.key);if(k<0)m=m.left;else{if(!(k>0))return m.value;m=m.right}}return null}},{key:"put",value:function(p,m){if(null===(this||_).root_)return(this||_).root_={key:p,value:m,left:null,right:null,parent:null,color:0,getValue:function(){return(this||_).value},getKey:function(){return(this||_).key}},(this||_).size_=1,null;var k,N,T=(this||_).root_;do{if(k=T,(N=p.compareTo(T.key))<0)T=T.left;else{if(!(N>0)){var S=T.value;return T.value=m,S}T=T.right}}while(null!==T);var L={key:p,left:null,right:null,value:m,parent:k,color:0,getValue:function(){return(this||_).value},getKey:function(){return(this||_).key}};return N<0?k.left=L:k.right=L,this.fixAfterInsertion(L),(this||_).size_++,null}},{key:"fixAfterInsertion",value:function(p){var m;for(p.color=1;null!=p&&p!==(this||_).root_&&1===p.parent.color;)Xe(p)===Ue(Xe(Xe(p)))?1===ze(m=Ve(Xe(Xe(p))))?(Be(Xe(p),0),Be(m,0),Be(Xe(Xe(p)),1),p=Xe(Xe(p))):(p===Ve(Xe(p))&&(p=Xe(p),this.rotateLeft(p)),Be(Xe(p),0),Be(Xe(Xe(p)),1),this.rotateRight(Xe(Xe(p)))):1===ze(m=Ue(Xe(Xe(p))))?(Be(Xe(p),0),Be(m,0),Be(Xe(Xe(p)),1),p=Xe(Xe(p))):(p===Ue(Xe(p))&&(p=Xe(p),this.rotateRight(p)),Be(Xe(p),0),Be(Xe(Xe(p)),1),this.rotateLeft(Xe(Xe(p))));(this||_).root_.color=0}},{key:"values",value:function(){var _=new dt,p=this.getFirstEntry();if(null!==p)for(_.add(p.value);null!==(p=i.successor(p));)_.add(p.value);return _}},{key:"entrySet",value:function(){var _=new Q,p=this.getFirstEntry();if(null!==p)for(_.add(p);null!==(p=i.successor(p));)_.add(p);return _}},{key:"rotateLeft",value:function(p){if(null!=p){var m=p.right;p.right=m.left,null!=m.left&&(m.left.parent=p),m.parent=p.parent,null==p.parent?(this||_).root_=m:p.parent.left===p?p.parent.left=m:p.parent.right=m,m.left=p,p.parent=m}}},{key:"rotateRight",value:function(p){if(null!=p){var m=p.left;p.left=m.right,null!=m.right&&(m.right.parent=p),m.parent=p.parent,null==p.parent?(this||_).root_=m:p.parent.right===p?p.parent.right=m:p.parent.left=m,m.right=p,p.parent=m}}},{key:"getFirstEntry",value:function(){var p=(this||_).root_;if(null!=p)for(;null!=p.left;)p=p.left;return p}},{key:"size",value:function(){return(this||_).size_}},{key:"containsKey",value:function(p){for(var m=(this||_).root_;null!==m;){var k=p.compareTo(m.key);if(k<0)m=m.left;else{if(!(k>0))return!0;m=m.right}}return!1}}],[{key:"successor",value:function(_){var p;if(null===_)return null;if(null!==_.right){for(p=_.right;null!==p.left;)p=p.left;return p}p=_.parent;for(var m=_;null!==p&&m===p.right;)m=p,p=p.parent;return p}}])}(He),je=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"find",value:function(p){return(this||_).nodeMap.get(p)}},{key:"addNode",value:function(){if(arguments[0]instanceof B){var p=arguments[0],m=(this||_).nodeMap.get(p);return null===m&&(m=(this||_).nodeFact.createNode(p),(this||_).nodeMap.put(p,m)),m}if(arguments[0]instanceof Ye){var k=arguments[0],N=(this||_).nodeMap.get(k.getCoordinate());return null===N?((this||_).nodeMap.put(k.getCoordinate(),k),k):(N.mergeLabel(k),N)}}},{key:"print",value:function(_){for(var p=this.iterator();p.hasNext();)p.next().print(_)}},{key:"iterator",value:function(){return(this||_).nodeMap.values().iterator()}},{key:"values",value:function(){return(this||_).nodeMap.values()}},{key:"getBoundaryNodes",value:function(_){for(var p=new dt,m=this.iterator();m.hasNext();){var k=m.next();k.getLabel().getLocation(_)===Z.BOUNDARY&&p.add(k)}return p}},{key:"add",value:function(_){var p=_.getCoordinate();this.addNode(p).add(_)}}],[{key:"constructor_",value:function(){(this||_).nodeMap=new Ze,(this||_).nodeFact=null;var p=arguments[0];(this||_).nodeFact=p}}])}(),We=function(){function t(){n(this||_,t)}return s(t,null,[{key:"isNorthern",value:function(_){return _===t.NE||_===t.NW}},{key:"isOpposite",value:function(_,p){return _!==p&&2===(_-p+4)%4}},{key:"commonHalfPlane",value:function(_,p){if(_===p)return _;if(2===(_-p+4)%4)return-1;var m=_<p?_:p;return 0===m&&3===(_>p?_:p)?3:m}},{key:"isInHalfPlane",value:function(_,p){return p===t.SE?_===t.SE||_===t.SW:_===p||_===p+1}},{key:"quadrant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var _=arguments[0],p=arguments[1];if(0===_&&0===p)throw new k("Cannot compute the quadrant for point ( "+_+", "+p+" )");return _>=0?p>=0?t.NE:t.SE:p>=0?t.NW:t.SW}if(arguments[0]instanceof B&&arguments[1]instanceof B){var m=arguments[0],N=arguments[1];if(N.x===m.x&&N.y===m.y)throw new k("Cannot compute the quadrant for two identical points "+m);return N.x>=m.x?N.y>=m.y?t.NE:t.SE:N.y>=m.y?t.NW:t.SW}}}])}();We.NE=0,We.NW=1,We.SW=2,We.SE=3;var Ke=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"compareDirection",value:function(p){return(this||_)._dx===p._dx&&(this||_)._dy===p._dy?0:(this||_)._quadrant>p._quadrant?1:(this||_)._quadrant<p._quadrant?-1:ft.index(p._p0,p._p1,(this||_)._p1)}},{key:"getDy",value:function(){return(this||_)._dy}},{key:"getCoordinate",value:function(){return(this||_)._p0}},{key:"setNode",value:function(p){(this||_)._node=p}},{key:"print",value:function(p){var m=Math.atan2((this||_)._dy,(this||_)._dx),k=this.getClass().getName(),N=k.lastIndexOf("."),T=k.substring(N+1);p.print("  "+T+": "+(this||_)._p0+" - "+(this||_)._p1+" "+(this||_)._quadrant+":"+m+"   "+(this||_)._label)}},{key:"compareTo",value:function(_){var p=_;return this.compareDirection(p)}},{key:"getDirectedCoordinate",value:function(){return(this||_)._p1}},{key:"getDx",value:function(){return(this||_)._dx}},{key:"getLabel",value:function(){return(this||_)._label}},{key:"getEdge",value:function(){return(this||_)._edge}},{key:"getQuadrant",value:function(){return(this||_)._quadrant}},{key:"getNode",value:function(){return(this||_)._node}},{key:"toString",value:function(){var p=Math.atan2((this||_)._dy,(this||_)._dx),m=this.getClass().getName(),k=m.lastIndexOf(".");return"  "+m.substring(k+1)+": "+(this||_)._p0+" - "+(this||_)._p1+" "+(this||_)._quadrant+":"+p+"   "+(this||_)._label}},{key:"computeLabel",value:function(_){}},{key:"init",value:function(p,m){(this||_)._p0=p,(this||_)._p1=m,(this||_)._dx=m.x-p.x,(this||_)._dy=m.y-p.y,(this||_)._quadrant=We.quadrant((this||_)._dx,(this||_)._dy),q.isTrue(!(0===(this||_)._dx&&0===(this||_)._dy),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[x]}}],[{key:"constructor_",value:function(){if((this||_)._edge=null,(this||_)._label=null,(this||_)._node=null,(this||_)._p0=null,(this||_)._p1=null,(this||_)._dx=null,(this||_)._dy=null,(this||_)._quadrant=null,1===arguments.length){var p=arguments[0];(this||_)._edge=p}else if(3===arguments.length){var m=arguments[0],k=arguments[1],N=arguments[2];t.constructor_.call(this||_,m,k,N,null)}else if(4===arguments.length){var T=arguments[0],S=arguments[1],L=arguments[2],C=arguments[3];t.constructor_.call(this||_,T),this.init(S,L),(this||_)._label=C}}}])}(),Je=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"getNextMin",value:function(){return(this||_)._nextMin}},{key:"getDepth",value:function(p){return(this||_)._depth[p]}},{key:"setVisited",value:function(p){(this||_)._isVisited=p}},{key:"computeDirectedLabel",value:function(){(this||_)._label=new Pe((this||_)._edge.getLabel()),(this||_)._isForward||(this||_)._label.flip()}},{key:"getNext",value:function(){return(this||_)._next}},{key:"setDepth",value:function(p,m){if(-999!==(this||_)._depth[p]&&(this||_)._depth[p]!==m)throw new vt("assigned depths do not match",this.getCoordinate());(this||_)._depth[p]=m}},{key:"isInteriorAreaEdge",value:function(){for(var p=!0,m=0;m<2;m++)(this||_)._label.isArea(m)&&(this||_)._label.getLocation(m,tt.LEFT)===Z.INTERIOR&&(this||_)._label.getLocation(m,tt.RIGHT)===Z.INTERIOR||(p=!1);return p}},{key:"setNextMin",value:function(p){(this||_)._nextMin=p}},{key:"print",value:function(p){f(i,"print",this||_,1).call(this||_,p),p.print(" "+(this||_)._depth[tt.LEFT]+"/"+(this||_)._depth[tt.RIGHT]),p.print(" ("+this.getDepthDelta()+")"),(this||_)._isInResult&&p.print(" inResult")}},{key:"setMinEdgeRing",value:function(p){(this||_)._minEdgeRing=p}},{key:"isLineEdge",value:function(){var p=(this||_)._label.isLine(0)||(this||_)._label.isLine(1),m=!(this||_)._label.isArea(0)||(this||_)._label.allPositionsEqual(0,Z.EXTERIOR),k=!(this||_)._label.isArea(1)||(this||_)._label.allPositionsEqual(1,Z.EXTERIOR);return p&&m&&k}},{key:"setEdgeRing",value:function(p){(this||_)._edgeRing=p}},{key:"getMinEdgeRing",value:function(){return(this||_)._minEdgeRing}},{key:"getDepthDelta",value:function(){var p=(this||_)._edge.getDepthDelta();return(this||_)._isForward||(p=-p),p}},{key:"setInResult",value:function(p){(this||_)._isInResult=p}},{key:"getSym",value:function(){return(this||_)._sym}},{key:"isForward",value:function(){return(this||_)._isForward}},{key:"getEdge",value:function(){return(this||_)._edge}},{key:"printEdge",value:function(p){this.print(p),p.print(" "),(this||_)._isForward?(this||_)._edge.print(p):(this||_)._edge.printReverse(p)}},{key:"setSym",value:function(p){(this||_)._sym=p}},{key:"setVisitedEdge",value:function(p){this.setVisited(p),(this||_)._sym.setVisited(p)}},{key:"setEdgeDepths",value:function(p,m){var k=this.getEdge().getDepthDelta();(this||_)._isForward||(k=-k);var N=1;p===tt.LEFT&&(N=-1);var T=tt.opposite(p),S=m+k*N;this.setDepth(p,m),this.setDepth(T,S)}},{key:"getEdgeRing",value:function(){return(this||_)._edgeRing}},{key:"isInResult",value:function(){return(this||_)._isInResult}},{key:"setNext",value:function(p){(this||_)._next=p}},{key:"isVisited",value:function(){return(this||_)._isVisited}}],[{key:"constructor_",value:function(){(this||_)._isForward=null,(this||_)._isInResult=!1,(this||_)._isVisited=!1,(this||_)._sym=null,(this||_)._next=null,(this||_)._nextMin=null,(this||_)._edgeRing=null,(this||_)._minEdgeRing=null,(this||_)._depth=[0,-999,-999];var p=arguments[0],m=arguments[1];if(Ke.constructor_.call(this||_,p),(this||_)._isForward=m,m)this.init(p.getCoordinate(0),p.getCoordinate(1));else{var k=p.getNumPoints()-1;this.init(p.getCoordinate(k),p.getCoordinate(k-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(_,p){return _===Z.EXTERIOR&&p===Z.INTERIOR?1:_===Z.INTERIOR&&p===Z.EXTERIOR?-1:0}}])}(Ke),Qe=function(){return s((function t(){n(this||_,t)}),[{key:"createNode",value:function(_){return new Ye(_,null)}}])}(),$e=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"printEdges",value:function(p){p.println("Edges:");for(var m=0;m<(this||_)._edges.size();m++){p.println("edge "+m+":");var k=(this||_)._edges.get(m);k.print(p),k.eiList.print(p)}}},{key:"find",value:function(p){return(this||_)._nodes.find(p)}},{key:"addNode",value:function(){if(arguments[0]instanceof Ye){var p=arguments[0];return(this||_)._nodes.addNode(p)}if(arguments[0]instanceof B){var m=arguments[0];return(this||_)._nodes.addNode(m)}}},{key:"getNodeIterator",value:function(){return(this||_)._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var p=(this||_)._nodes.iterator();p.hasNext();)p.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(_){kt.out.println(_)}},{key:"isBoundaryNode",value:function(p,m){var k=(this||_)._nodes.find(m);if(null===k)return!1;var N=k.getLabel();return null!==N&&N.getLocation(p)===Z.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var p=(this||_)._nodes.iterator();p.hasNext();)p.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(_,p,m,k){return!!_.equals(m)&&ft.index(_,p,k)===ft.COLLINEAR&&We.quadrant(_,p)===We.quadrant(m,k)}},{key:"getEdgeEnds",value:function(){return(this||_)._edgeEndList}},{key:"debugPrint",value:function(_){kt.out.print(_)}},{key:"getEdgeIterator",value:function(){return(this||_)._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(p,m){for(var k=0;k<(this||_)._edges.size();k++){var N=(this||_)._edges.get(k),T=N.getCoordinates();if(this.matchInSameDirection(p,m,T[0],T[1]))return N;if(this.matchInSameDirection(p,m,T[T.length-1],T[T.length-2]))return N}return null}},{key:"insertEdge",value:function(p){(this||_)._edges.add(p)}},{key:"findEdgeEnd",value:function(_){for(var p=this.getEdgeEnds().iterator();p.hasNext();){var m=p.next();if(m.getEdge()===_)return m}return null}},{key:"addEdges",value:function(p){for(var m=p.iterator();m.hasNext();){var k=m.next();(this||_)._edges.add(k);var N=new Je(k,!0),T=new Je(k,!1);N.setSym(T),T.setSym(N),this.add(N),this.add(T)}}},{key:"add",value:function(p){(this||_)._nodes.add(p),(this||_)._edgeEndList.add(p)}},{key:"getNodes",value:function(){return(this||_)._nodes.values()}},{key:"findEdge",value:function(p,m){for(var k=0;k<(this||_)._edges.size();k++){var N=(this||_)._edges.get(k),T=N.getCoordinates();if(p.equals(T[0])&&m.equals(T[1]))return N}return null}}],[{key:"constructor_",value:function(){if((this||_)._edges=new dt,(this||_)._nodes=null,(this||_)._edgeEndList=new dt,0===arguments.length)(this||_)._nodes=new je(new Qe);else if(1===arguments.length){var p=arguments[0];(this||_)._nodes=new je(p)}}},{key:"linkResultDirectedEdges",value:function(_){for(var p=_.iterator();p.hasNext();)p.next().getEdges().linkResultDirectedEdges()}}])}(),tn=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"sortShellsAndHoles",value:function(_,p,m){for(var k=_.iterator();k.hasNext();){var N=k.next();N.isHole()?m.add(N):p.add(N)}}},{key:"computePolygons",value:function(p){for(var m=new dt,k=p.iterator();k.hasNext();){var N=k.next().toPolygon((this||_)._geometryFactory);m.add(N)}return m}},{key:"placeFreeHoles",value:function(_,p){for(var m=p.iterator();m.hasNext();){var k=m.next();if(null===k.getShell()){var N=t.findEdgeRingContaining(k,_);if(null===N)throw new vt("unable to assign hole to a shell",k.getCoordinate(0));k.setShell(N)}}}},{key:"buildMinimalEdgeRings",value:function(_,p,m){for(var k=new dt,N=_.iterator();N.hasNext();){var T=N.next();if(T.getMaxNodeDegree()>2){T.linkDirectedEdgesForMinimalEdgeRings();var S=T.buildMinimalRings(),L=this.findShell(S);null!==L?(this.placePolygonHoles(L,S),p.add(L)):m.addAll(S)}else k.add(T)}return k}},{key:"buildMaximalEdgeRings",value:function(p){for(var m=new dt,k=p.iterator();k.hasNext();){var N=k.next();if(N.isInResult()&&N.getLabel().isArea()&&null===N.getEdgeRing()){var T=new Ge(N,(this||_)._geometryFactory);m.add(T),T.setInResult()}}return m}},{key:"placePolygonHoles",value:function(_,p){for(var m=p.iterator();m.hasNext();){var k=m.next();k.isHole()&&k.setShell(_)}}},{key:"getPolygons",value:function(){return this.computePolygons((this||_)._shellList)}},{key:"findShell",value:function(_){for(var p=0,m=null,k=_.iterator();k.hasNext();){var N=k.next();N.isHole()||(m=N,p++)}return q.isTrue(p<=1,"found two shells in MinimalEdgeRing list"),m}},{key:"add",value:function(){if(1===arguments.length){var p=arguments[0];this.add(p.getEdgeEnds(),p.getNodes())}else if(2===arguments.length){var m=arguments[0],k=arguments[1];$e.linkResultDirectedEdges(k);var N=this.buildMaximalEdgeRings(m),T=new dt,S=this.buildMinimalEdgeRings(N,(this||_)._shellList,T);this.sortShellsAndHoles(S,(this||_)._shellList,T),this.placeFreeHoles((this||_)._shellList,T)}}}],[{key:"constructor_",value:function(){(this||_)._geometryFactory=null,(this||_)._shellList=new dt;var p=arguments[0];(this||_)._geometryFactory=p}},{key:"findEdgeRingContaining",value:function(_,p){for(var m=_.getLinearRing(),k=m.getEnvelopeInternal(),N=m.getCoordinateN(0),T=null,S=null,L=p.iterator();L.hasNext();){var C=L.next(),R=C.getLinearRing(),w=R.getEnvelopeInternal();if(!w.equals(k)&&w.contains(k)){N=Wt.ptNotInList(m.getCoordinates(),R.getCoordinates());var O=!1;Ae.isInRing(N,R.getCoordinates())&&(O=!0),O&&(null===T||S.contains(w))&&(S=(T=C).getLinearRing().getEnvelopeInternal())}}return T}}])}(),en=function(){return s((function t(){n(this||_,t)}),[{key:"getBounds",value:function(){}}])}(),nn=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"getItem",value:function(){return(this||_)._item}},{key:"getBounds",value:function(){return(this||_)._bounds}},{key:"interfaces_",get:function(){return[en,E]}}],[{key:"constructor_",value:function(){(this||_)._bounds=null,(this||_)._item=null;var p=arguments[0],m=arguments[1];(this||_)._bounds=p,(this||_)._item=m}}])}(),rn=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"poll",value:function(){if(this.isEmpty())return null;var p=(this||_)._items.get(1);return(this||_)._items.set(1,(this||_)._items.get((this||_)._size)),(this||_)._size-=1,this.reorder(1),p}},{key:"size",value:function(){return(this||_)._size}},{key:"reorder",value:function(p){for(var m=null,k=(this||_)._items.get(p);2*p<=(this||_)._size&&((m=2*p)!==(this||_)._size&&(this||_)._items.get(m+1).compareTo((this||_)._items.get(m))<0&&m++,(this||_)._items.get(m).compareTo(k)<0);p=m)(this||_)._items.set(p,(this||_)._items.get(m));(this||_)._items.set(p,k)}},{key:"clear",value:function(){(this||_)._size=0,(this||_)._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:(this||_)._items.get(1)}},{key:"isEmpty",value:function(){return 0===(this||_)._size}},{key:"add",value:function(p){(this||_)._items.add(null),(this||_)._size+=1;var m=(this||_)._size;for((this||_)._items.set(0,p);p.compareTo((this||_)._items.get(Math.trunc(m/2)))<0;m/=2)(this||_)._items.set(m,(this||_)._items.get(Math.trunc(m/2)));(this||_)._items.set(m,p)}}],[{key:"constructor_",value:function(){(this||_)._size=null,(this||_)._items=null,(this||_)._size=0,(this||_)._items=new dt,(this||_)._items.add(null)}}])}(),sn=function(){return s((function t(){n(this||_,t)}),[{key:"insert",value:function(_,p){}},{key:"remove",value:function(_,p){}},{key:"query",value:function(){}}])}(),an=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"getLevel",value:function(){return(this||_)._level}},{key:"size",value:function(){return(this||_)._childBoundables.size()}},{key:"getChildBoundables",value:function(){return(this||_)._childBoundables}},{key:"addChildBoundable",value:function(p){q.isTrue(null===(this||_)._bounds),(this||_)._childBoundables.add(p)}},{key:"isEmpty",value:function(){return(this||_)._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===(this||_)._bounds&&((this||_)._bounds=this.computeBounds()),(this||_)._bounds}},{key:"interfaces_",get:function(){return[en,E]}}],[{key:"constructor_",value:function(){if((this||_)._childBoundables=new dt,(this||_)._bounds=null,(this||_)._level=null,0===arguments.length);else if(1===arguments.length){var p=arguments[0];(this||_)._level=p}}}])}(),on={reverseOrder:function(){return{compare:function(_,p){return p.compareTo(_)}}},min:function(_){return on.sort(_),_.get(0)},sort:function(_,p){var m=_.toArray();p?Pt.sort(m,p):Pt.sort(m);for(var k=_.iterator(),N=0,T=m.length;N<T;N++)k.next(),k.set(m[N])},singletonList:function(_){var p=new dt;return p.add(_),p}},un=function(){function t(){n(this||_,t)}return s(t,null,[{key:"maxDistance",value:function(_,p,m,k,N,T,S,L){var C=t.distance(_,p,N,T);return C=Math.max(C,t.distance(_,p,S,L)),C=Math.max(C,t.distance(m,k,N,T)),Math.max(C,t.distance(m,k,S,L))}},{key:"distance",value:function(_,p,m,k){var N=m-_,T=k-p;return Math.sqrt(N*N+T*T)}},{key:"maximumDistance",value:function(_,p){var m=Math.min(_.getMinX(),p.getMinX()),k=Math.min(_.getMinY(),p.getMinY()),N=Math.max(_.getMaxX(),p.getMaxX()),T=Math.max(_.getMaxY(),p.getMaxY());return t.distance(m,k,N,T)}},{key:"minMaxDistance",value:function(_,p){var m=_.getMinX(),k=_.getMinY(),N=_.getMaxX(),T=_.getMaxY(),S=p.getMinX(),L=p.getMinY(),C=p.getMaxX(),R=p.getMaxY(),w=t.maxDistance(m,k,m,T,S,L,S,R);return w=Math.min(w,t.maxDistance(m,k,m,T,S,L,C,L)),w=Math.min(w,t.maxDistance(m,k,m,T,C,R,S,R)),w=Math.min(w,t.maxDistance(m,k,m,T,C,R,C,L)),w=Math.min(w,t.maxDistance(m,k,N,k,S,L,S,R)),w=Math.min(w,t.maxDistance(m,k,N,k,S,L,C,L)),w=Math.min(w,t.maxDistance(m,k,N,k,C,R,S,R)),w=Math.min(w,t.maxDistance(m,k,N,k,C,R,C,L)),w=Math.min(w,t.maxDistance(N,T,m,T,S,L,S,R)),w=Math.min(w,t.maxDistance(N,T,m,T,S,L,C,L)),w=Math.min(w,t.maxDistance(N,T,m,T,C,R,S,R)),w=Math.min(w,t.maxDistance(N,T,m,T,C,R,C,L)),w=Math.min(w,t.maxDistance(N,T,N,k,S,L,S,R)),w=Math.min(w,t.maxDistance(N,T,N,k,S,L,C,L)),w=Math.min(w,t.maxDistance(N,T,N,k,C,R,S,R)),Math.min(w,t.maxDistance(N,T,N,k,C,R,C,L))}}])}(),ln=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"maximumDistance",value:function(){return un.maximumDistance((this||_)._boundable1.getBounds(),(this||_)._boundable2.getBounds())}},{key:"expandToQueue",value:function(p,m){var N=t.isComposite((this||_)._boundable1),T=t.isComposite((this||_)._boundable2);if(N&&T)return t.area((this||_)._boundable1)>t.area((this||_)._boundable2)?(this.expand((this||_)._boundable1,(this||_)._boundable2,!1,p,m),null):(this.expand((this||_)._boundable2,(this||_)._boundable1,!0,p,m),null);if(N)return this.expand((this||_)._boundable1,(this||_)._boundable2,!1,p,m),null;if(T)return this.expand((this||_)._boundable2,(this||_)._boundable1,!0,p,m),null;throw new k("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(t.isComposite((this||_)._boundable1)||t.isComposite((this||_)._boundable2))}},{key:"compareTo",value:function(p){var m=p;return(this||_)._distance<m._distance?-1:(this||_)._distance>m._distance?1:0}},{key:"expand",value:function(p,m,k,N,T){for(var S=p.getChildBoundables().iterator();S.hasNext();){var L=S.next(),C=null;(C=k?new t(m,L,(this||_)._itemDistance):new t(L,m,(this||_)._itemDistance)).getDistance()<T&&N.add(C)}}},{key:"getBoundable",value:function(p){return 0===p?(this||_)._boundable1:(this||_)._boundable2}},{key:"getDistance",value:function(){return(this||_)._distance}},{key:"distance",value:function(){return this.isLeaves()?(this||_)._itemDistance.distance((this||_)._boundable1,(this||_)._boundable2):(this||_)._boundable1.getBounds().distance((this||_)._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[x]}}],[{key:"constructor_",value:function(){(this||_)._boundable1=null,(this||_)._boundable2=null,(this||_)._distance=null,(this||_)._itemDistance=null;var p=arguments[0],m=arguments[1],k=arguments[2];(this||_)._boundable1=p,(this||_)._boundable2=m,(this||_)._itemDistance=k,(this||_)._distance=this.distance()}},{key:"area",value:function(_){return _.getBounds().getArea()}},{key:"isComposite",value:function(_){return _ instanceof an}}])}(),hn=function(){return s((function t(){n(this||_,t)}),[{key:"visitItem",value:function(_){}}])}(),cn=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"queryInternal",value:function(){if(rt(arguments[2],hn)&&arguments[0]instanceof Object&&arguments[1]instanceof an)for(var _=arguments[0],p=arguments[2],m=arguments[1].getChildBoundables(),k=0;k<m.size();k++){var N=m.get(k);this.getIntersectsOp().intersects(N.getBounds(),_)&&(N instanceof an?this.queryInternal(_,N,p):N instanceof nn?p.visitItem(N.getItem()):q.shouldNeverReachHere())}else if(rt(arguments[2],it)&&arguments[0]instanceof Object&&arguments[1]instanceof an)for(var T=arguments[0],S=arguments[2],L=arguments[1].getChildBoundables(),C=0;C<L.size();C++){var R=L.get(C);this.getIntersectsOp().intersects(R.getBounds(),T)&&(R instanceof an?this.queryInternal(T,R,S):R instanceof nn?S.add(R.getItem()):q.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return(this||_)._nodeCapacity}},{key:"lastNode",value:function(_){return _.get(_.size()-1)}},{key:"size",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size((this||_)._root));if(1===arguments.length){for(var p=0,m=arguments[0].getChildBoundables().iterator();m.hasNext();){var k=m.next();k instanceof an?p+=this.size(k):k instanceof nn&&(p+=1)}return p}}},{key:"removeItem",value:function(_,p){for(var m=null,k=_.getChildBoundables().iterator();k.hasNext();){var N=k.next();N instanceof nn&&N.getItem()===p&&(m=N)}return null!==m&&(_.getChildBoundables().remove(m),!0)}},{key:"itemsTree",value:function(){if(0===arguments.length){this.build();var p=this.itemsTree((this||_)._root);return null===p?new dt:p}if(1===arguments.length){for(var m=arguments[0],k=new dt,N=m.getChildBoundables().iterator();N.hasNext();){var T=N.next();if(T instanceof an){var S=this.itemsTree(T);null!==S&&k.add(S)}else T instanceof nn?k.add(T.getItem()):q.shouldNeverReachHere()}return k.size()<=0?null:k}}},{key:"insert",value:function(p,m){q.isTrue(!(this||_)._built,"Cannot insert items into an STR packed R-tree after it has been built."),(this||_)._itemBoundables.add(new nn(p,m))}},{key:"boundablesAtLevel",value:function(){if(1===arguments.length){var p=arguments[0],m=new dt;return this.boundablesAtLevel(p,(this||_)._root,m),m}if(3===arguments.length){var k=arguments[0],N=arguments[1],T=arguments[2];if(q.isTrue(k>-2),N.getLevel()===k)return T.add(N),null;for(var S=N.getChildBoundables().iterator();S.hasNext();){var L=S.next();L instanceof an?this.boundablesAtLevel(k,L,T):(q.isTrue(L instanceof nn),-1===k&&T.add(L))}return null}}},{key:"query",value:function(){if(1===arguments.length){var p=arguments[0];this.build();var m=new dt;return this.isEmpty()||this.getIntersectsOp().intersects((this||_)._root.getBounds(),p)&&this.queryInternal(p,(this||_)._root,m),m}if(2===arguments.length){var k=arguments[0],N=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects((this||_)._root.getBounds(),k)&&this.queryInternal(k,(this||_)._root,N)}}},{key:"build",value:function(){if((this||_)._built)return null;(this||_)._root=(this||_)._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels((this||_)._itemBoundables,-1),(this||_)._itemBoundables=null,(this||_)._built=!0}},{key:"getRoot",value:function(){return this.build(),(this||_)._root}},{key:"remove",value:function(){if(2===arguments.length){var p=arguments[0],m=arguments[1];return this.build(),!!this.getIntersectsOp().intersects((this||_)._root.getBounds(),p)&&this.remove(p,(this||_)._root,m)}if(3===arguments.length){var k=arguments[0],N=arguments[1],T=arguments[2],S=this.removeItem(N,T);if(S)return!0;for(var L=null,C=N.getChildBoundables().iterator();C.hasNext();){var R=C.next();if(this.getIntersectsOp().intersects(R.getBounds(),k)&&R instanceof an&&(S=this.remove(k,R,T))){L=R;break}}return null!==L&&L.getChildBoundables().isEmpty()&&N.getChildBoundables().remove(L),S}}},{key:"createHigherLevels",value:function(_,p){q.isTrue(!_.isEmpty());var m=this.createParentBoundables(_,p+1);return 1===m.size()?m.get(0):this.createHigherLevels(m,p+1)}},{key:"depth",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth((this||_)._root));if(1===arguments.length){for(var p=0,m=arguments[0].getChildBoundables().iterator();m.hasNext();){var k=m.next();if(k instanceof an){var N=this.depth(k);N>p&&(p=N)}}return p+1}}},{key:"createParentBoundables",value:function(_,p){q.isTrue(!_.isEmpty());var m=new dt;m.add(this.createNode(p));var k=new dt(_);on.sort(k,this.getComparator());for(var N=k.iterator();N.hasNext();){var T=N.next();this.lastNode(m).getChildBoundables().size()===this.getNodeCapacity()&&m.add(this.createNode(p)),this.lastNode(m).addChildBoundable(T)}return m}},{key:"isEmpty",value:function(){return(this||_)._built?(this||_)._root.isEmpty():(this||_)._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){if((this||_)._root=null,(this||_)._built=!1,(this||_)._itemBoundables=new dt,(this||_)._nodeCapacity=null,0===arguments.length)t.constructor_.call(this||_,t.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var p=arguments[0];q.isTrue(p>1,"Node capacity must be greater than 1"),(this||_)._nodeCapacity=p}}},{key:"compareDoubles",value:function(_,p){return _>p?1:_<p?-1:0}}])}();cn.IntersectsOp=function(){},cn.DEFAULT_NODE_CAPACITY=10;var fn=function(){return s((function t(){n(this||_,t)}),[{key:"distance",value:function(_,p){}}])}(),gn=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"createParentBoundablesFromVerticalSlices",value:function(_,p){q.isTrue(_.length>0);for(var m=new dt,k=0;k<_.length;k++)m.addAll(this.createParentBoundablesFromVerticalSlice(_[k],p));return m}},{key:"nearestNeighbourK",value:function(){if(2===arguments.length){var _=arguments[0],p=arguments[1];return this.nearestNeighbourK(_,A.POSITIVE_INFINITY,p)}if(3===arguments.length){var m=arguments[0],k=arguments[2],N=arguments[1],T=new rn;T.add(m);for(var S=new rn;!T.isEmpty()&&N>=0;){var L=T.poll(),C=L.getDistance();if(C>=N)break;L.isLeaves()?S.size()<k?S.add(L):(S.peek().getDistance()>C&&(S.poll(),S.add(L)),N=S.peek().getDistance()):L.expandToQueue(T,N)}return i.getItems(S)}}},{key:"createNode",value:function(_){return new vn(_)}},{key:"size",value:function(){return 0===arguments.length?f(i,"size",this||_,1).call(this||_):f(i,"size",this||_,1).apply(this||_,arguments)}},{key:"insert",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof V))return f(i,"insert",this||_,1).apply(this||_,arguments);var p=arguments[0],m=arguments[1];if(p.isNull())return null;f(i,"insert",this||_,1).call(this||_,p,m)}},{key:"getIntersectsOp",value:function(){return i.intersectsOp}},{key:"verticalSlices",value:function(_,p){for(var m=Math.trunc(Math.ceil(_.size()/p)),k=new Array(p).fill(null),N=_.iterator(),T=0;T<p;T++){k[T]=new dt;for(var S=0;N.hasNext()&&S<m;){var L=N.next();k[T].add(L),S++}}return k}},{key:"query",value:function(){if(1===arguments.length){var p=arguments[0];return f(i,"query",this||_,1).call(this||_,p)}if(2===arguments.length){var m=arguments[0],k=arguments[1];f(i,"query",this||_,1).call(this||_,m,k)}}},{key:"getComparator",value:function(){return i.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(p,m){return f(i,"createParentBoundables",this||_,1).call(this||_,p,m)}},{key:"remove",value:function(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof V){var p=arguments[0],m=arguments[1];return f(i,"remove",this||_,1).call(this||_,p,m)}return f(i,"remove",this||_,1).apply(this||_,arguments)}},{key:"depth",value:function(){return 0===arguments.length?f(i,"depth",this||_,1).call(this||_):f(i,"depth",this||_,1).apply(this||_,arguments)}},{key:"createParentBoundables",value:function(_,p){q.isTrue(!_.isEmpty());var m=Math.trunc(Math.ceil(_.size()/this.getNodeCapacity())),k=new dt(_);on.sort(k,i.xComparator);var N=this.verticalSlices(k,Math.trunc(Math.ceil(Math.sqrt(m))));return this.createParentBoundablesFromVerticalSlices(N,p)}},{key:"nearestNeighbour",value:function(){if(1===arguments.length){if(rt(arguments[0],fn)){var _=arguments[0];if(this.isEmpty())return null;var p=new ln(this.getRoot(),this.getRoot(),_);return this.nearestNeighbour(p)}if(arguments[0]instanceof ln){var m=arguments[0],k=A.POSITIVE_INFINITY,N=null,T=new rn;for(T.add(m);!T.isEmpty()&&k>0;){var S=T.poll(),L=S.getDistance();if(L>=k)break;S.isLeaves()?(k=L,N=S):S.expandToQueue(T,k)}return null===N?null:[N.getBoundable(0).getItem(),N.getBoundable(1).getItem()]}}else{if(2===arguments.length){var C=arguments[0],R=arguments[1];if(this.isEmpty()||C.isEmpty())return null;var w=new ln(this.getRoot(),C.getRoot(),R);return this.nearestNeighbour(w)}if(3===arguments.length){var O=arguments[2],b=new nn(arguments[0],arguments[1]),M=new ln(this.getRoot(),b,O);return this.nearestNeighbour(M)[0]}if(4===arguments.length){var D=arguments[2],F=arguments[3],G=new nn(arguments[0],arguments[1]),q=new ln(this.getRoot(),G,D);return this.nearestNeighbourK(q,F)}}}},{key:"isWithinDistance",value:function(){if(2===arguments.length){var _=arguments[0],p=arguments[1],m=A.POSITIVE_INFINITY,k=new rn;for(k.add(_);!k.isEmpty();){var N=k.poll(),T=N.getDistance();if(T>p)return!1;if(N.maximumDistance()<=p)return!0;if(N.isLeaves()){if((m=T)<=p)return!0}else N.expandToQueue(k,m)}return!1}if(3===arguments.length){var S=arguments[0],L=arguments[1],C=arguments[2],R=new ln(this.getRoot(),S.getRoot(),L);return this.isWithinDistance(R,C)}}},{key:"interfaces_",get:function(){return[sn,E]}}],[{key:"constructor_",value:function(){if(0===arguments.length)i.constructor_.call(this||_,i.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var p=arguments[0];cn.constructor_.call(this||_,p)}}},{key:"centreX",value:function(_){return i.avg(_.getMinX(),_.getMaxX())}},{key:"avg",value:function(_,p){return(_+p)/2}},{key:"getItems",value:function(_){for(var p=new Array(_.size()).fill(null),m=0;!_.isEmpty();){var k=_.poll();p[m]=k.getBoundable(0).getItem(),m++}return p}},{key:"centreY",value:function(_){return i.avg(_.getMinY(),_.getMaxY())}}])}(cn),vn=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"computeBounds",value:function(){for(var _=null,p=this.getChildBoundables().iterator();p.hasNext();){var m=p.next();null===_?_=new V(m.getBounds()):_.expandToInclude(m.getBounds())}return _}}],[{key:"constructor_",value:function(){var p=arguments[0];an.constructor_.call(this||_,p)}}])}(an);gn.STRtreeNode=vn,gn.xComparator=new(function(){return s((function t(){n(this||_,t)}),[{key:"interfaces_",get:function(){return[P]}},{key:"compare",value:function(_,p){return cn.compareDoubles(gn.centreX(_.getBounds()),gn.centreX(p.getBounds()))}}])}()),gn.yComparator=new(function(){return s((function t(){n(this||_,t)}),[{key:"interfaces_",get:function(){return[P]}},{key:"compare",value:function(_,p){return cn.compareDoubles(gn.centreY(_.getBounds()),gn.centreY(p.getBounds()))}}])}()),gn.intersectsOp=new(function(){return s((function t(){n(this||_,t)}),[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(_,p){return _.intersects(p)}}])}()),gn.DEFAULT_NODE_CAPACITY=10;var yn=function(){function t(){n(this||_,t)}return s(t,null,[{key:"relativeSign",value:function(_,p){return _<p?-1:_>p?1:0}},{key:"compare",value:function(_,p,m){if(p.equals2D(m))return 0;var k=t.relativeSign(p.x,m.x),N=t.relativeSign(p.y,m.y);switch(_){case 0:return t.compareValue(k,N);case 1:return t.compareValue(N,k);case 2:return t.compareValue(N,-k);case 3:return t.compareValue(-k,N);case 4:return t.compareValue(-k,-N);case 5:return t.compareValue(-N,-k);case 6:return t.compareValue(-N,k);case 7:return t.compareValue(k,-N)}return q.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(_,p){return _<0?-1:_>0?1:p<0?-1:p>0?1:0}}])}(),dn=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"getCoordinate",value:function(){return(this||_).coord}},{key:"print",value:function(p){p.print((this||_).coord),p.print(" seg # = "+(this||_).segmentIndex)}},{key:"compareTo",value:function(p){var m=p;return(this||_).segmentIndex<m.segmentIndex?-1:(this||_).segmentIndex>m.segmentIndex?1:(this||_).coord.equals2D(m.coord)?0:(this||_)._isInterior?m._isInterior?yn.compare((this||_)._segmentOctant,(this||_).coord,m.coord):1:-1}},{key:"isEndPoint",value:function(p){return 0===(this||_).segmentIndex&&!(this||_)._isInterior||(this||_).segmentIndex===p}},{key:"toString",value:function(){return(this||_).segmentIndex+":"+(this||_).coord.toString()}},{key:"isInterior",value:function(){return(this||_)._isInterior}},{key:"interfaces_",get:function(){return[x]}}],[{key:"constructor_",value:function(){(this||_)._segString=null,(this||_).coord=null,(this||_).segmentIndex=null,(this||_)._segmentOctant=null,(this||_)._isInterior=null;var p=arguments[0],m=arguments[1],k=arguments[2],N=arguments[3];(this||_)._segString=p,(this||_).coord=new B(m),(this||_).segmentIndex=k,(this||_)._segmentOctant=N,(this||_)._isInterior=!m.equals2D(p.getCoordinate(k))}}])}(),_n=function(){return s((function t(){n(this||_,t)}),[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),pn=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"getSplitCoordinates",value:function(){var _=new jt;this.addEndpoints();for(var p=this.iterator(),m=p.next();p.hasNext();){var k=p.next();this.addEdgeCoordinates(m,k,_),m=k}return _.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var p=new dt;this.findCollapsesFromInsertedNodes(p),this.findCollapsesFromExistingVertices(p);for(var m=p.iterator();m.hasNext();){var k=m.next().intValue();this.add((this||_)._edge.getCoordinate(k),k)}}},{key:"createSplitEdgePts",value:function(p,m){var k=m.segmentIndex-p.segmentIndex+2;if(2===k)return[new B(p.coord),new B(m.coord)];var N=(this||_)._edge.getCoordinate(m.segmentIndex),T=m.isInterior()||!m.coord.equals2D(N);T||k--;var S=new Array(k).fill(null),L=0;S[L++]=new B(p.coord);for(var C=p.segmentIndex+1;C<=m.segmentIndex;C++)S[L++]=(this||_)._edge.getCoordinate(C);return T&&(S[L]=new B(m.coord)),S}},{key:"print",value:function(_){_.println("Intersections:");for(var p=this.iterator();p.hasNext();)p.next().print(_)}},{key:"findCollapsesFromExistingVertices",value:function(p){for(var m=0;m<(this||_)._edge.size()-2;m++){var k=(this||_)._edge.getCoordinate(m);(this||_)._edge.getCoordinate(m+1);var N=(this||_)._edge.getCoordinate(m+2);k.equals2D(N)&&p.add(ot.valueOf(m+1))}}},{key:"addEdgeCoordinates",value:function(_,p,m){var k=this.createSplitEdgePts(_,p);m.add(k,!1)}},{key:"iterator",value:function(){return(this||_)._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(_){this.addEndpoints(),this.addCollapsedNodes();for(var p=this.iterator(),m=p.next();p.hasNext();){var k=p.next(),N=this.createSplitEdge(m,k);_.add(N),m=k}}},{key:"findCollapseIndex",value:function(_,p,m){if(!_.coord.equals2D(p.coord))return!1;var k=p.segmentIndex-_.segmentIndex;return p.isInterior()||k--,1===k&&(m[0]=_.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(_){for(var p=new Array(1).fill(null),m=this.iterator(),k=m.next();m.hasNext();){var N=m.next();this.findCollapseIndex(k,N,p)&&_.add(ot.valueOf(p[0])),k=N}}},{key:"getEdge",value:function(){return(this||_)._edge}},{key:"addEndpoints",value:function(){var p=(this||_)._edge.size()-1;this.add((this||_)._edge.getCoordinate(0),0),this.add((this||_)._edge.getCoordinate(p),p)}},{key:"createSplitEdge",value:function(p,m){var k=this.createSplitEdgePts(p,m);return new En(k,(this||_)._edge.getData())}},{key:"add",value:function(p,m){var k=new dn((this||_)._edge,p,m,(this||_)._edge.getSegmentOctant(m)),N=(this||_)._nodeMap.get(k);return null!==N?(q.isTrue(N.coord.equals2D(p),"Found equal nodes with different coordinates"),N):((this||_)._nodeMap.put(k,k),k)}},{key:"checkSplitEdgesCorrectness",value:function(p){var m=(this||_)._edge.getCoordinates(),k=p.get(0).getCoordinate(0);if(!k.equals2D(m[0]))throw new F("bad split edge start point at "+k);var N=p.get(p.size()-1).getCoordinates(),T=N[N.length-1];if(!T.equals2D(m[m.length-1]))throw new F("bad split edge end point at "+T)}}],[{key:"constructor_",value:function(){(this||_)._nodeMap=new Ze,(this||_)._edge=null;var p=arguments[0];(this||_)._edge=p}}])}(),mn=function(){function t(){n(this||_,t)}return s(t,null,[{key:"octant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var _=arguments[0],p=arguments[1];if(0===_&&0===p)throw new k("Cannot compute the octant for point ( "+_+", "+p+" )");var m=Math.abs(_),N=Math.abs(p);return _>=0?p>=0?m>=N?0:1:m>=N?7:6:p>=0?m>=N?3:2:m>=N?4:5}if(arguments[0]instanceof B&&arguments[1]instanceof B){var T=arguments[0],S=arguments[1],L=S.x-T.x,C=S.y-T.y;if(0===L&&0===C)throw new k("Cannot compute the octant for two identical points "+T);return t.octant(L,C)}}}])}(),kn=function(){return s((function t(){n(this||_,t)}),[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(_){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(_){}},{key:"getData",value:function(){}}])}(),xn=function(){return s((function t(){n(this||_,t)}),[{key:"addIntersection",value:function(_,p){}},{key:"interfaces_",get:function(){return[kn]}}])}(),En=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"getCoordinates",value:function(){return(this||_)._pts}},{key:"size",value:function(){return(this||_)._pts.length}},{key:"getCoordinate",value:function(p){return(this||_)._pts[p]}},{key:"isClosed",value:function(){return(this||_)._pts[0].equals((this||_)._pts[(this||_)._pts.length-1])}},{key:"getSegmentOctant",value:function(p){return p===(this||_)._pts.length-1?-1:this.safeOctant(this.getCoordinate(p),this.getCoordinate(p+1))}},{key:"setData",value:function(p){(this||_)._data=p}},{key:"safeOctant",value:function(_,p){return _.equals2D(p)?0:mn.octant(_,p)}},{key:"getData",value:function(){return(this||_)._data}},{key:"addIntersection",value:function(){if(2===arguments.length){var _=arguments[0],p=arguments[1];this.addIntersectionNode(_,p)}else if(4===arguments.length){var m=arguments[1],k=arguments[3],N=new B(arguments[0].getIntersection(k));this.addIntersection(N,m)}}},{key:"toString",value:function(){return Re.toLineString(new $t((this||_)._pts))}},{key:"getNodeList",value:function(){return(this||_)._nodeList}},{key:"addIntersectionNode",value:function(p,m){var k=m,N=k+1;if(N<(this||_)._pts.length){var T=(this||_)._pts[N];p.equals2D(T)&&(k=N)}return(this||_)._nodeList.add(p,k)}},{key:"addIntersections",value:function(_,p,m){for(var k=0;k<_.getIntersectionNum();k++)this.addIntersection(_,p,m,k)}},{key:"interfaces_",get:function(){return[xn]}}],[{key:"constructor_",value:function(){(this||_)._nodeList=new pn(this||_),(this||_)._pts=null,(this||_)._data=null;var p=arguments[0],m=arguments[1];(this||_)._pts=p,(this||_)._data=m}},{key:"getNodedSubstrings",value:function(){if(1===arguments.length){var _=arguments[0],p=new dt;return t.getNodedSubstrings(_,p),p}if(2===arguments.length)for(var m=arguments[1],k=arguments[0].iterator();k.hasNext();)k.next().getNodeList().addSplitEdges(m)}}])}(),In=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"minX",value:function(){return Math.min((this||_).p0.x,(this||_).p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof t){var p=arguments[0],m=ft.index((this||_).p0,(this||_).p1,p.p0),k=ft.index((this||_).p0,(this||_).p1,p.p1);return m>=0&&k>=0||m<=0&&k<=0?Math.max(m,k):0}if(arguments[0]instanceof B){var N=arguments[0];return ft.index((this||_).p0,(this||_).p1,N)}}},{key:"toGeometry",value:function(p){return p.createLineString([(this||_).p0,(this||_).p1])}},{key:"isVertical",value:function(){return(this||_).p0.x===(this||_).p1.x}},{key:"equals",value:function(p){if(!(p instanceof t))return!1;var m=p;return(this||_).p0.equals(m.p0)&&(this||_).p1.equals(m.p1)}},{key:"intersection",value:function(p){var m=new Oe;return m.computeIntersection((this||_).p0,(this||_).p1,p.p0,p.p1),m.hasIntersection()?m.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof B){var p=arguments[0];if(p.equals((this||_).p0)||p.equals((this||_).p1))return new B(p);var m=this.projectionFactor(p),k=new B;return k.x=(this||_).p0.x+m*((this||_).p1.x-(this||_).p0.x),k.y=(this||_).p0.y+m*((this||_).p1.y-(this||_).p0.y),k}if(arguments[0]instanceof t){var N=arguments[0],T=this.projectionFactor(N.p0),S=this.projectionFactor(N.p1);if(T>=1&&S>=1)return null;if(T<=0&&S<=0)return null;var L=this.project(N.p0);T<0&&(L=(this||_).p0),T>1&&(L=(this||_).p1);var C=this.project(N.p1);return S<0&&(C=(this||_).p0),S>1&&(C=(this||_).p1),new t(L,C)}}},{key:"normalize",value:function(){(this||_).p1.compareTo((this||_).p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2((this||_).p1.y-(this||_).p0.y,(this||_).p1.x-(this||_).p0.x)}},{key:"getCoordinate",value:function(p){return 0===p?(this||_).p0:(this||_).p1}},{key:"distancePerpendicular",value:function(p){return Et.pointToLinePerpendicular(p,(this||_).p0,(this||_).p1)}},{key:"minY",value:function(){return Math.min((this||_).p0.y,(this||_).p1.y)}},{key:"midPoint",value:function(){return t.midPoint((this||_).p0,(this||_).p1)}},{key:"projectionFactor",value:function(p){if(p.equals((this||_).p0))return 0;if(p.equals((this||_).p1))return 1;var m=(this||_).p1.x-(this||_).p0.x,k=(this||_).p1.y-(this||_).p0.y,N=m*m+k*k;return N<=0?A.NaN:((p.x-(this||_).p0.x)*m+(p.y-(this||_).p0.y)*k)/N}},{key:"closestPoints",value:function(p){var m=this.intersection(p);if(null!==m)return[m,m];var k=new Array(2).fill(null),N=A.MAX_VALUE,T=null,S=this.closestPoint(p.p0);N=S.distance(p.p0),k[0]=S,k[1]=p.p0;var L=this.closestPoint(p.p1);(T=L.distance(p.p1))<N&&(N=T,k[0]=L,k[1]=p.p1);var C=p.closestPoint((this||_).p0);(T=C.distance((this||_).p0))<N&&(N=T,k[0]=(this||_).p0,k[1]=C);var R=p.closestPoint((this||_).p1);return(T=R.distance((this||_).p1))<N&&(N=T,k[0]=(this||_).p1,k[1]=R),k}},{key:"closestPoint",value:function(p){var m=this.projectionFactor(p);return m>0&&m<1?this.project(p):(this||_).p0.distance(p)<(this||_).p1.distance(p)?(this||_).p0:(this||_).p1}},{key:"maxX",value:function(){return Math.max((this||_).p0.x,(this||_).p1.x)}},{key:"getLength",value:function(){return(this||_).p0.distance((this||_).p1)}},{key:"compareTo",value:function(p){var m=p,k=(this||_).p0.compareTo(m.p0);return 0!==k?k:(this||_).p1.compareTo(m.p1)}},{key:"reverse",value:function(){var p=(this||_).p0;(this||_).p0=(this||_).p1,(this||_).p1=p}},{key:"equalsTopo",value:function(p){return(this||_).p0.equals(p.p0)&&(this||_).p1.equals(p.p1)||(this||_).p0.equals(p.p1)&&(this||_).p1.equals(p.p0)}},{key:"lineIntersection",value:function(p){return mt.intersection((this||_).p0,(this||_).p1,p.p0,p.p1)}},{key:"maxY",value:function(){return Math.max((this||_).p0.y,(this||_).p1.y)}},{key:"pointAlongOffset",value:function(p,m){var k=(this||_).p0.x+p*((this||_).p1.x-(this||_).p0.x),N=(this||_).p0.y+p*((this||_).p1.y-(this||_).p0.y),T=(this||_).p1.x-(this||_).p0.x,S=(this||_).p1.y-(this||_).p0.y,L=Math.sqrt(T*T+S*S),C=0,R=0;if(0!==m){if(L<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");C=m*T/L,R=m*S/L}return new B(k-R,N+C)}},{key:"setCoordinates",value:function(){if(1===arguments.length){var p=arguments[0];this.setCoordinates(p.p0,p.p1)}else if(2===arguments.length){var m=arguments[0],k=arguments[1];(this||_).p0.x=m.x,(this||_).p0.y=m.y,(this||_).p1.x=k.x,(this||_).p1.y=k.y}}},{key:"segmentFraction",value:function(_){var p=this.projectionFactor(_);return p<0?p=0:(p>1||A.isNaN(p))&&(p=1),p}},{key:"toString",value:function(){return"LINESTRING( "+(this||_).p0.x+" "+(this||_).p0.y+", "+(this||_).p1.x+" "+(this||_).p1.y+")"}},{key:"isHorizontal",value:function(){return(this||_).p0.y===(this||_).p1.y}},{key:"reflect",value:function(p){var m=(this||_).p1.getY()-(this||_).p0.getY(),k=(this||_).p0.getX()-(this||_).p1.getX(),N=(this||_).p0.getY()*((this||_).p1.getX()-(this||_).p0.getX())-(this||_).p0.getX()*((this||_).p1.getY()-(this||_).p0.getY()),T=m*m+k*k,S=m*m-k*k,L=p.getX(),C=p.getY();return new B((-S*L-2*m*k*C-2*m*N)/T,(S*C-2*m*k*L-2*k*N)/T)}},{key:"distance",value:function(){if(arguments[0]instanceof t){var p=arguments[0];return Et.segmentToSegment((this||_).p0,(this||_).p1,p.p0,p.p1)}if(arguments[0]instanceof B){var m=arguments[0];return Et.pointToSegment(m,(this||_).p0,(this||_).p1)}}},{key:"pointAlong",value:function(p){var m=new B;return m.x=(this||_).p0.x+p*((this||_).p1.x-(this||_).p0.x),m.y=(this||_).p0.y+p*((this||_).p1.y-(this||_).p0.y),m}},{key:"hashCode",value:function(){var p=A.doubleToLongBits((this||_).p0.x);p^=31*A.doubleToLongBits((this||_).p0.y);var m=Math.trunc(p)^Math.trunc(p>>32),k=A.doubleToLongBits((this||_).p1.x);return k^=31*A.doubleToLongBits((this||_).p1.y),m^Math.trunc(k)^Math.trunc(k>>32)}},{key:"interfaces_",get:function(){return[x,E]}}],[{key:"constructor_",value:function(){if((this||_).p0=null,(this||_).p1=null,0===arguments.length)t.constructor_.call(this||_,new B,new B);else if(1===arguments.length){var p=arguments[0];t.constructor_.call(this||_,p.p0,p.p1)}else if(2===arguments.length){var m=arguments[0],k=arguments[1];(this||_).p0=m,(this||_).p1=k}else if(4===arguments.length){var N=arguments[0],T=arguments[1],S=arguments[2],L=arguments[3];t.constructor_.call(this||_,new B(N,T),new B(S,L))}}},{key:"midPoint",value:function(_,p){return new B((_.x+p.x)/2,(_.y+p.y)/2)}}])}(),Nn=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"overlap",value:function(){if(2===arguments.length);else if(4===arguments.length){var p=arguments[1],m=arguments[2],k=arguments[3];arguments[0].getLineSegment(p,(this||_)._overlapSeg1),m.getLineSegment(k,(this||_)._overlapSeg2),this.overlap((this||_)._overlapSeg1,(this||_)._overlapSeg2)}}}],[{key:"constructor_",value:function(){(this||_)._overlapSeg1=new In,(this||_)._overlapSeg2=new In}}])}(),Tn=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"getLineSegment",value:function(p,m){m.p0=(this||_)._pts[p],m.p1=(this||_)._pts[p+1]}},{key:"computeSelect",value:function(p,m,k,N){var T=(this||_)._pts[m],S=(this||_)._pts[k];if(k-m==1)return N.select(this||_,m),null;if(!p.intersects(T,S))return null;var L=Math.trunc((m+k)/2);m<L&&this.computeSelect(p,m,L,N),L<k&&this.computeSelect(p,L,k,N)}},{key:"getCoordinates",value:function(){for(var p=new Array((this||_)._end-(this||_)._start+1).fill(null),m=0,k=(this||_)._start;k<=(this||_)._end;k++)p[m++]=(this||_)._pts[k];return p}},{key:"computeOverlaps",value:function(){if(2===arguments.length){var p=arguments[0],m=arguments[1];this.computeOverlaps((this||_)._start,(this||_)._end,p,p._start,p._end,m)}else if(6===arguments.length){var k=arguments[0],N=arguments[1],T=arguments[2],S=arguments[3],L=arguments[4],C=arguments[5];if(N-k==1&&L-S==1)return C.overlap(this||_,k,T,S),null;if(!this.overlaps(k,N,T,S,L))return null;var R=Math.trunc((k+N)/2),w=Math.trunc((S+L)/2);k<R&&(S<w&&this.computeOverlaps(k,R,T,S,w,C),w<L&&this.computeOverlaps(k,R,T,w,L,C)),R<N&&(S<w&&this.computeOverlaps(R,N,T,S,w,C),w<L&&this.computeOverlaps(R,N,T,w,L,C))}}},{key:"setId",value:function(p){(this||_)._id=p}},{key:"select",value:function(p,m){this.computeSelect(p,(this||_)._start,(this||_)._end,m)}},{key:"getEnvelope",value:function(){if(null===(this||_)._env){var p=(this||_)._pts[(this||_)._start],m=(this||_)._pts[(this||_)._end];(this||_)._env=new V(p,m)}return(this||_)._env}},{key:"overlaps",value:function(p,m,k,N,T){return V.intersects((this||_)._pts[p],(this||_)._pts[m],k._pts[N],k._pts[T])}},{key:"getEndIndex",value:function(){return(this||_)._end}},{key:"getStartIndex",value:function(){return(this||_)._start}},{key:"getContext",value:function(){return(this||_)._context}},{key:"getId",value:function(){return(this||_)._id}}],[{key:"constructor_",value:function(){(this||_)._pts=null,(this||_)._start=null,(this||_)._end=null,(this||_)._env=null,(this||_)._context=null,(this||_)._id=null;var p=arguments[0],m=arguments[1],k=arguments[2],N=arguments[3];(this||_)._pts=p,(this||_)._start=m,(this||_)._end=k,(this||_)._context=N}}])}(),Sn=function(){function t(){n(this||_,t)}return s(t,null,[{key:"findChainEnd",value:function(_,p){for(var m=p;m<_.length-1&&_[m].equals2D(_[m+1]);)m++;if(m>=_.length-1)return _.length-1;for(var k=We.quadrant(_[m],_[m+1]),N=p+1;N<_.length;){if(!_[N-1].equals2D(_[N])&&We.quadrant(_[N-1],_[N])!==k)break;N++}return N-1}},{key:"getChains",value:function(){if(1===arguments.length){var _=arguments[0];return t.getChains(_,null)}if(2===arguments.length){var p=arguments[0],m=arguments[1],k=new dt,N=0;do{var T=t.findChainEnd(p,N),S=new Tn(p,N,T,m);k.add(S),N=T}while(N<p.length-1);return k}}}])}(),Ln=function(){return s((function t(){n(this||_,t)}),[{key:"computeNodes",value:function(_){}},{key:"getNodedSubstrings",value:function(){}}])}(),Cn=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"setSegmentIntersector",value:function(p){(this||_)._segInt=p}},{key:"interfaces_",get:function(){return[Ln]}}],[{key:"constructor_",value:function(){if((this||_)._segInt=null,0===arguments.length);else if(1===arguments.length){var p=arguments[0];this.setSegmentIntersector(p)}}}])}(),Rn=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"getMonotoneChains",value:function(){return(this||_)._monoChains}},{key:"getNodedSubstrings",value:function(){return En.getNodedSubstrings((this||_)._nodedSegStrings)}},{key:"getIndex",value:function(){return(this||_)._index}},{key:"add",value:function(p){for(var m=Sn.getChains(p.getCoordinates(),p).iterator();m.hasNext();){var k=m.next();k.setId((this||_)._idCounter++),(this||_)._index.insert(k.getEnvelope(),k),(this||_)._monoChains.add(k)}}},{key:"computeNodes",value:function(p){(this||_)._nodedSegStrings=p;for(var m=p.iterator();m.hasNext();)this.add(m.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var p=new wn((this||_)._segInt),m=(this||_)._monoChains.iterator();m.hasNext();)for(var k=m.next(),N=(this||_)._index.query(k.getEnvelope()).iterator();N.hasNext();){var T=N.next();if(T.getId()>k.getId()&&(k.computeOverlaps(T,p),(this||_)._nOverlaps++),(this||_)._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if((this||_)._monoChains=new dt,(this||_)._index=new gn,(this||_)._idCounter=0,(this||_)._nodedSegStrings=null,(this||_)._nOverlaps=0,0===arguments.length);else if(1===arguments.length){var p=arguments[0];Cn.constructor_.call(this||_,p)}}}])}(Cn),wn=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"overlap",value:function(){if(4!==arguments.length)return f(i,"overlap",this||_,1).apply(this||_,arguments);var p=arguments[1],m=arguments[2],k=arguments[3],N=arguments[0].getContext(),T=m.getContext();(this||_)._si.processIntersections(N,p,T,k)}}],[{key:"constructor_",value:function(){(this||_)._si=null;var p=arguments[0];(this||_)._si=p}}])}(Nn);Rn.SegmentOverlapAction=wn;var On=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"isDeletable",value:function(p,m,k,N){var T=(this||_)._inputLine[p],S=(this||_)._inputLine[m],L=(this||_)._inputLine[k];return!!this.isConcave(T,S,L)&&!!this.isShallow(T,S,L,N)&&this.isShallowSampled(T,S,p,k,N)}},{key:"deleteShallowConcavities",value:function(){for(var p=1,m=this.findNextNonDeletedIndex(p),k=this.findNextNonDeletedIndex(m),N=!1;k<(this||_)._inputLine.length;){var T=!1;this.isDeletable(p,m,k,(this||_)._distanceTol)&&((this||_)._isDeleted[m]=t.DELETE,T=!0,N=!0),p=T?k:m,m=this.findNextNonDeletedIndex(p),k=this.findNextNonDeletedIndex(m)}return N}},{key:"isShallowConcavity",value:function(p,m,k,N){return ft.index(p,m,k)===(this||_)._angleOrientation&&Et.pointToSegment(m,p,k)<N}},{key:"isShallowSampled",value:function(p,m,k,N,T){var S=Math.trunc((N-k)/t.NUM_PTS_TO_CHECK);S<=0&&(S=1);for(var L=k;L<N;L+=S)if(!this.isShallow(p,m,(this||_)._inputLine[L],T))return!1;return!0}},{key:"isConcave",value:function(p,m,k){var N=ft.index(p,m,k)===(this||_)._angleOrientation;return N}},{key:"simplify",value:function(p){(this||_)._distanceTol=Math.abs(p),p<0&&((this||_)._angleOrientation=ft.CLOCKWISE),(this||_)._isDeleted=new Array((this||_)._inputLine.length).fill(null);var m=!1;do{m=this.deleteShallowConcavities()}while(m);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(p){for(var m=p+1;m<(this||_)._inputLine.length&&(this||_)._isDeleted[m]===t.DELETE;)m++;return m}},{key:"isShallow",value:function(_,p,m,k){return Et.pointToSegment(p,_,m)<k}},{key:"collapseLine",value:function(){for(var p=new jt,m=0;m<(this||_)._inputLine.length;m++)(this||_)._isDeleted[m]!==t.DELETE&&p.add((this||_)._inputLine[m]);return p.toCoordinateArray()}}],[{key:"constructor_",value:function(){(this||_)._inputLine=null,(this||_)._distanceTol=null,(this||_)._isDeleted=null,(this||_)._angleOrientation=ft.COUNTERCLOCKWISE;var p=arguments[0];(this||_)._inputLine=p}},{key:"simplify",value:function(_,p){return new t(_).simplify(p)}}])}();On.INIT=0,On.DELETE=1,On.KEEP=1,On.NUM_PTS_TO_CHECK=10;var bn=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"getCoordinates",value:function(){return(this||_)._ptList.toArray(t.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(p){(this||_)._precisionModel=p}},{key:"addPt",value:function(p){var m=new B(p);if((this||_)._precisionModel.makePrecise(m),this.isRedundant(m))return null;(this||_)._ptList.add(m)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(_,p){if(p)for(var m=0;m<_.length;m++)this.addPt(_[m]);else for(var k=_.length-1;k>=0;k--)this.addPt(_[k])}},{key:"isRedundant",value:function(p){if((this||_)._ptList.size()<1)return!1;var m=(this||_)._ptList.get((this||_)._ptList.size()-1);return p.distance(m)<(this||_)._minimimVertexDistance}},{key:"toString",value:function(){return(new oe).createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if((this||_)._ptList.size()<1)return null;var p=new B((this||_)._ptList.get(0)),m=(this||_)._ptList.get((this||_)._ptList.size()-1);if(p.equals(m))return null;(this||_)._ptList.add(p)}},{key:"setMinimumVertexDistance",value:function(p){(this||_)._minimimVertexDistance=p}}],[{key:"constructor_",value:function(){(this||_)._ptList=null,(this||_)._precisionModel=null,(this||_)._minimimVertexDistance=0,(this||_)._ptList=new dt}}])}();bn.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var An=function(){function t(){n(this||_,t)}return s(t,null,[{key:"toDegrees",value:function(_){return 180*_/Math.PI}},{key:"normalize",value:function(_){for(;_>Math.PI;)_-=t.PI_TIMES_2;for(;_<=-Math.PI;)_+=t.PI_TIMES_2;return _}},{key:"angle",value:function(){if(1===arguments.length){var _=arguments[0];return Math.atan2(_.y,_.x)}if(2===arguments.length){var p=arguments[0],m=arguments[1],k=m.x-p.x,N=m.y-p.y;return Math.atan2(N,k)}}},{key:"isAcute",value:function(_,p,m){var k=_.x-p.x,N=_.y-p.y;return k*(m.x-p.x)+N*(m.y-p.y)>0}},{key:"isObtuse",value:function(_,p,m){var k=_.x-p.x,N=_.y-p.y;return k*(m.x-p.x)+N*(m.y-p.y)<0}},{key:"interiorAngle",value:function(_,p,m){var k=t.angle(p,_),N=t.angle(p,m);return Math.abs(N-k)}},{key:"normalizePositive",value:function(_){if(_<0){for(;_<0;)_+=t.PI_TIMES_2;_>=t.PI_TIMES_2&&(_=0)}else{for(;_>=t.PI_TIMES_2;)_-=t.PI_TIMES_2;_<0&&(_=0)}return _}},{key:"angleBetween",value:function(_,p,m){var k=t.angle(p,_),N=t.angle(p,m);return t.diff(k,N)}},{key:"diff",value:function(_,p){var m=null;return(m=_<p?p-_:_-p)>Math.PI&&(m=2*Math.PI-m),m}},{key:"toRadians",value:function(_){return _*Math.PI/180}},{key:"getTurn",value:function(_,p){var m=Math.sin(p-_);return m>0?t.COUNTERCLOCKWISE:m<0?t.CLOCKWISE:t.NONE}},{key:"angleBetweenOriented",value:function(_,p,m){var k=t.angle(p,_),N=t.angle(p,m)-k;return N<=-Math.PI?N+t.PI_TIMES_2:N>Math.PI?N-t.PI_TIMES_2:N}}])}();An.PI_TIMES_2=2*Math.PI,An.PI_OVER_2=Math.PI/2,An.PI_OVER_4=Math.PI/4,An.COUNTERCLOCKWISE=ft.COUNTERCLOCKWISE,An.CLOCKWISE=ft.CLOCKWISE,An.NONE=ft.COLLINEAR;var Mn=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"addNextSegment",value:function(p,m){if((this||_)._s0=(this||_)._s1,(this||_)._s1=(this||_)._s2,(this||_)._s2=p,(this||_)._seg0.setCoordinates((this||_)._s0,(this||_)._s1),this.computeOffsetSegment((this||_)._seg0,(this||_)._side,(this||_)._distance,(this||_)._offset0),(this||_)._seg1.setCoordinates((this||_)._s1,(this||_)._s2),this.computeOffsetSegment((this||_)._seg1,(this||_)._side,(this||_)._distance,(this||_)._offset1),(this||_)._s1.equals((this||_)._s2))return null;var k=ft.index((this||_)._s0,(this||_)._s1,(this||_)._s2),N=k===ft.CLOCKWISE&&(this||_)._side===tt.LEFT||k===ft.COUNTERCLOCKWISE&&(this||_)._side===tt.RIGHT;0===k?this.addCollinear(m):N?this.addOutsideTurn(k,m):this.addInsideTurn(k,m)}},{key:"addLineEndCap",value:function(m,k){var N=new In(m,k),T=new In;this.computeOffsetSegment(N,tt.LEFT,(this||_)._distance,T);var S=new In;this.computeOffsetSegment(N,tt.RIGHT,(this||_)._distance,S);var L=k.x-m.x,C=k.y-m.y,R=Math.atan2(C,L);switch((this||_)._bufParams.getEndCapStyle()){case p.CAP_ROUND:(this||_)._segList.addPt(T.p1),this.addDirectedFillet(k,R+Math.PI/2,R-Math.PI/2,ft.CLOCKWISE,(this||_)._distance),(this||_)._segList.addPt(S.p1);break;case p.CAP_FLAT:(this||_)._segList.addPt(T.p1),(this||_)._segList.addPt(S.p1);break;case p.CAP_SQUARE:var w=new B;w.x=Math.abs((this||_)._distance)*Math.cos(R),w.y=Math.abs((this||_)._distance)*Math.sin(R);var O=new B(T.p1.x+w.x,T.p1.y+w.y),b=new B(S.p1.x+w.x,S.p1.y+w.y);(this||_)._segList.addPt(O),(this||_)._segList.addPt(b)}}},{key:"getCoordinates",value:function(){return(this||_)._segList.getCoordinates()}},{key:"addMitreJoin",value:function(p,m,k,N){var T=mt.intersection(m.p0,m.p1,k.p0,k.p1);if(null!==T&&(N<=0?1:T.distance(p)/Math.abs(N))<=(this||_)._bufParams.getMitreLimit())return(this||_)._segList.addPt(T),null;this.addLimitedMitreJoin(m,k,N,(this||_)._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(m,k){if((this||_)._offset0.p1.distance((this||_)._offset1.p0)<(this||_)._distance*t.OFFSET_SEGMENT_SEPARATION_FACTOR)return(this||_)._segList.addPt((this||_)._offset0.p1),null;(this||_)._bufParams.getJoinStyle()===p.JOIN_MITRE?this.addMitreJoin((this||_)._s1,(this||_)._offset0,(this||_)._offset1,(this||_)._distance):(this||_)._bufParams.getJoinStyle()===p.JOIN_BEVEL?this.addBevelJoin((this||_)._offset0,(this||_)._offset1):(k&&(this||_)._segList.addPt((this||_)._offset0.p1),this.addCornerFillet((this||_)._s1,(this||_)._offset0.p1,(this||_)._offset1.p0,m,(this||_)._distance),(this||_)._segList.addPt((this||_)._offset1.p0))}},{key:"createSquare",value:function(p){(this||_)._segList.addPt(new B(p.x+(this||_)._distance,p.y+(this||_)._distance)),(this||_)._segList.addPt(new B(p.x+(this||_)._distance,p.y-(this||_)._distance)),(this||_)._segList.addPt(new B(p.x-(this||_)._distance,p.y-(this||_)._distance)),(this||_)._segList.addPt(new B(p.x-(this||_)._distance,p.y+(this||_)._distance)),(this||_)._segList.closeRing()}},{key:"addSegments",value:function(p,m){(this||_)._segList.addPts(p,m)}},{key:"addFirstSegment",value:function(){(this||_)._segList.addPt((this||_)._offset1.p0)}},{key:"addCornerFillet",value:function(p,m,k,N,T){var S=m.x-p.x,L=m.y-p.y,C=Math.atan2(L,S),R=k.x-p.x,w=k.y-p.y,O=Math.atan2(w,R);N===ft.CLOCKWISE?C<=O&&(C+=2*Math.PI):C>=O&&(C-=2*Math.PI),(this||_)._segList.addPt(m),this.addDirectedFillet(p,C,O,N,T),(this||_)._segList.addPt(k)}},{key:"addLastSegment",value:function(){(this||_)._segList.addPt((this||_)._offset1.p1)}},{key:"initSideSegments",value:function(p,m,k){(this||_)._s1=p,(this||_)._s2=m,(this||_)._side=k,(this||_)._seg1.setCoordinates(p,m),this.computeOffsetSegment((this||_)._seg1,k,(this||_)._distance,(this||_)._offset1)}},{key:"addLimitedMitreJoin",value:function(p,m,k,N){var T=(this||_)._seg0.p1,S=An.angle(T,(this||_)._seg0.p0),L=An.angleBetweenOriented((this||_)._seg0.p0,T,(this||_)._seg1.p1)/2,C=An.normalize(S+L),R=An.normalize(C+Math.PI),w=N*k,O=k-w*Math.abs(Math.sin(L)),b=T.x+w*Math.cos(R),M=T.y+w*Math.sin(R),D=new B(b,M),F=new In(T,D),G=F.pointAlongOffset(1,O),q=F.pointAlongOffset(1,-O);(this||_)._side===tt.LEFT?((this||_)._segList.addPt(G),(this||_)._segList.addPt(q)):((this||_)._segList.addPt(q),(this||_)._segList.addPt(G))}},{key:"addDirectedFillet",value:function(p,m,k,N,T){var S=N===ft.CLOCKWISE?-1:1,L=Math.abs(m-k),C=Math.trunc(L/(this||_)._filletAngleQuantum+.5);if(C<1)return null;for(var R=L/C,w=new B,O=0;O<C;O++){var b=m+S*O*R;w.x=p.x+T*Math.cos(b),w.y=p.y+T*Math.sin(b),(this||_)._segList.addPt(w)}}},{key:"computeOffsetSegment",value:function(_,p,m,k){var N=p===tt.LEFT?1:-1,T=_.p1.x-_.p0.x,S=_.p1.y-_.p0.y,L=Math.sqrt(T*T+S*S),C=N*m*T/L,R=N*m*S/L;k.p0.x=_.p0.x-R,k.p0.y=_.p0.y+C,k.p1.x=_.p1.x-R,k.p1.y=_.p1.y+C}},{key:"addInsideTurn",value:function(p,m){if((this||_)._li.computeIntersection((this||_)._offset0.p0,(this||_)._offset0.p1,(this||_)._offset1.p0,(this||_)._offset1.p1),(this||_)._li.hasIntersection())(this||_)._segList.addPt((this||_)._li.getIntersection(0));else if((this||_)._hasNarrowConcaveAngle=!0,(this||_)._offset0.p1.distance((this||_)._offset1.p0)<(this||_)._distance*t.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)(this||_)._segList.addPt((this||_)._offset0.p1);else{if((this||_)._segList.addPt((this||_)._offset0.p1),(this||_)._closingSegLengthFactor>0){var k=new B(((this||_)._closingSegLengthFactor*(this||_)._offset0.p1.x+(this||_)._s1.x)/((this||_)._closingSegLengthFactor+1),((this||_)._closingSegLengthFactor*(this||_)._offset0.p1.y+(this||_)._s1.y)/((this||_)._closingSegLengthFactor+1));(this||_)._segList.addPt(k);var N=new B(((this||_)._closingSegLengthFactor*(this||_)._offset1.p0.x+(this||_)._s1.x)/((this||_)._closingSegLengthFactor+1),((this||_)._closingSegLengthFactor*(this||_)._offset1.p0.y+(this||_)._s1.y)/((this||_)._closingSegLengthFactor+1));(this||_)._segList.addPt(N)}else(this||_)._segList.addPt((this||_)._s1);(this||_)._segList.addPt((this||_)._offset1.p0)}}},{key:"createCircle",value:function(p){var m=new B(p.x+(this||_)._distance,p.y);(this||_)._segList.addPt(m),this.addDirectedFillet(p,0,2*Math.PI,-1,(this||_)._distance),(this||_)._segList.closeRing()}},{key:"addBevelJoin",value:function(p,m){(this||_)._segList.addPt(p.p1),(this||_)._segList.addPt(m.p0)}},{key:"init",value:function(p){(this||_)._distance=p,(this||_)._maxCurveSegmentError=p*(1-Math.cos((this||_)._filletAngleQuantum/2)),(this||_)._segList=new bn,(this||_)._segList.setPrecisionModel((this||_)._precisionModel),(this||_)._segList.setMinimumVertexDistance(p*t.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(m){(this||_)._li.computeIntersection((this||_)._s0,(this||_)._s1,(this||_)._s1,(this||_)._s2),(this||_)._li.getIntersectionNum()>=2&&((this||_)._bufParams.getJoinStyle()===p.JOIN_BEVEL||(this||_)._bufParams.getJoinStyle()===p.JOIN_MITRE?(m&&(this||_)._segList.addPt((this||_)._offset0.p1),(this||_)._segList.addPt((this||_)._offset1.p0)):this.addCornerFillet((this||_)._s1,(this||_)._offset0.p1,(this||_)._offset1.p0,ft.CLOCKWISE,(this||_)._distance))}},{key:"closeRing",value:function(){(this||_)._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return(this||_)._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){(this||_)._maxCurveSegmentError=0,(this||_)._filletAngleQuantum=null,(this||_)._closingSegLengthFactor=1,(this||_)._segList=null,(this||_)._distance=0,(this||_)._precisionModel=null,(this||_)._bufParams=null,(this||_)._li=null,(this||_)._s0=null,(this||_)._s1=null,(this||_)._s2=null,(this||_)._seg0=new In,(this||_)._seg1=new In,(this||_)._offset0=new In,(this||_)._offset1=new In,(this||_)._side=0,(this||_)._hasNarrowConcaveAngle=!1;var m=arguments[0],k=arguments[1],N=arguments[2];(this||_)._precisionModel=m,(this||_)._bufParams=k,(this||_)._li=new Oe,(this||_)._filletAngleQuantum=Math.PI/2/k.getQuadrantSegments(),k.getQuadrantSegments()>=8&&k.getJoinStyle()===p.JOIN_ROUND&&((this||_)._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(N)}}])}();Mn.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Mn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Mn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Mn.MAX_CLOSING_SEG_LEN_FACTOR=80;var Pn=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"getOffsetCurve",value:function(p,m){if((this||_)._distance=m,0===m)return null;var k=m<0,N=Math.abs(m),T=this.getSegGen(N);p.length<=1?this.computePointCurve(p[0],T):this.computeOffsetCurve(p,k,T);var S=T.getCoordinates();return k&&Wt.reverse(S),S}},{key:"computeSingleSidedBufferCurve",value:function(p,m,k){var N=this.simplifyTolerance((this||_)._distance);if(m){k.addSegments(p,!0);var T=On.simplify(p,-N),S=T.length-1;k.initSideSegments(T[S],T[S-1],tt.LEFT),k.addFirstSegment();for(var L=S-2;L>=0;L--)k.addNextSegment(T[L],!0)}else{k.addSegments(p,!1);var C=On.simplify(p,N),R=C.length-1;k.initSideSegments(C[0],C[1],tt.LEFT),k.addFirstSegment();for(var w=2;w<=R;w++)k.addNextSegment(C[w],!0)}k.addLastSegment(),k.closeRing()}},{key:"computeRingBufferCurve",value:function(p,m,k){var N=this.simplifyTolerance((this||_)._distance);m===tt.RIGHT&&(N=-N);var T=On.simplify(p,N),S=T.length-1;k.initSideSegments(T[S-1],T[0],m);for(var L=1;L<=S;L++){var C=1!==L;k.addNextSegment(T[L],C)}k.closeRing()}},{key:"computeLineBufferCurve",value:function(p,m){var k=this.simplifyTolerance((this||_)._distance),N=On.simplify(p,k),T=N.length-1;m.initSideSegments(N[0],N[1],tt.LEFT);for(var S=2;S<=T;S++)m.addNextSegment(N[S],!0);m.addLastSegment(),m.addLineEndCap(N[T-1],N[T]);var L=On.simplify(p,-k),C=L.length-1;m.initSideSegments(L[C],L[C-1],tt.LEFT);for(var R=C-2;R>=0;R--)m.addNextSegment(L[R],!0);m.addLastSegment(),m.addLineEndCap(L[1],L[0]),m.closeRing()}},{key:"computePointCurve",value:function(m,k){switch((this||_)._bufParams.getEndCapStyle()){case p.CAP_ROUND:k.createCircle(m);break;case p.CAP_SQUARE:k.createSquare(m)}}},{key:"getLineCurve",value:function(p,m){if((this||_)._distance=m,this.isLineOffsetEmpty(m))return null;var k=Math.abs(m),N=this.getSegGen(k);if(p.length<=1)this.computePointCurve(p[0],N);else if((this||_)._bufParams.isSingleSided()){var T=m<0;this.computeSingleSidedBufferCurve(p,T,N)}else this.computeLineBufferCurve(p,N);return N.getCoordinates()}},{key:"getBufferParameters",value:function(){return(this||_)._bufParams}},{key:"simplifyTolerance",value:function(p){return p*(this||_)._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(p,m,k){if((this||_)._distance=k,p.length<=2)return this.getLineCurve(p,k);if(0===k)return t.copyCoordinates(p);var N=this.getSegGen(k);return this.computeRingBufferCurve(p,m,N),N.getCoordinates()}},{key:"computeOffsetCurve",value:function(p,m,k){var N=this.simplifyTolerance((this||_)._distance);if(m){var T=On.simplify(p,-N),S=T.length-1;k.initSideSegments(T[S],T[S-1],tt.LEFT),k.addFirstSegment();for(var L=S-2;L>=0;L--)k.addNextSegment(T[L],!0)}else{var C=On.simplify(p,N),R=C.length-1;k.initSideSegments(C[0],C[1],tt.LEFT),k.addFirstSegment();for(var w=2;w<=R;w++)k.addNextSegment(C[w],!0)}k.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(p){return 0===p||p<0&&!(this||_)._bufParams.isSingleSided()}},{key:"getSegGen",value:function(p){return new Mn((this||_)._precisionModel,(this||_)._bufParams,p)}}],[{key:"constructor_",value:function(){(this||_)._distance=0,(this||_)._precisionModel=null,(this||_)._bufParams=null;var p=arguments[0],m=arguments[1];(this||_)._precisionModel=p,(this||_)._bufParams=m}},{key:"copyCoordinates",value:function(_){for(var p=new Array(_.length).fill(null),m=0;m<p.length;m++)p[m]=new B(_[m]);return p}}])}(),Dn=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"findStabbedSegments",value:function(){if(1===arguments.length){for(var p=arguments[0],m=new dt,k=(this||_)._subgraphs.iterator();k.hasNext();){var N=k.next(),T=N.getEnvelope();p.y<T.getMinY()||p.y>T.getMaxY()||this.findStabbedSegments(p,N.getDirectedEdges(),m)}return m}if(3===arguments.length)if(rt(arguments[2],it)&&arguments[0]instanceof B&&arguments[1]instanceof Je){for(var S=arguments[0],L=arguments[1],C=arguments[2],R=L.getEdge().getCoordinates(),w=0;w<R.length-1;w++)if((this||_)._seg.p0=R[w],(this||_)._seg.p1=R[w+1],(this||_)._seg.p0.y>(this||_)._seg.p1.y&&(this||_)._seg.reverse(),!(Math.max((this||_)._seg.p0.x,(this||_)._seg.p1.x)<S.x||(this||_)._seg.isHorizontal()||S.y<(this||_)._seg.p0.y||S.y>(this||_)._seg.p1.y||ft.index((this||_)._seg.p0,(this||_)._seg.p1,S)===ft.RIGHT)){var O=L.getDepth(tt.LEFT);(this||_)._seg.p0.equals(R[w])||(O=L.getDepth(tt.RIGHT));var b=new Fn((this||_)._seg,O);C.add(b)}}else if(rt(arguments[2],it)&&arguments[0]instanceof B&&rt(arguments[1],it))for(var M=arguments[0],D=arguments[2],F=arguments[1].iterator();F.hasNext();){var G=F.next();G.isForward()&&this.findStabbedSegments(M,G,D)}}},{key:"getDepth",value:function(_){var p=this.findStabbedSegments(_);return 0===p.size()?0:on.min(p)._leftDepth}}],[{key:"constructor_",value:function(){(this||_)._subgraphs=null,(this||_)._seg=new In;var p=arguments[0];(this||_)._subgraphs=p}}])}(),Fn=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"compareTo",value:function(p){var m=p;if((this||_)._upwardSeg.minX()>=m._upwardSeg.maxX())return 1;if((this||_)._upwardSeg.maxX()<=m._upwardSeg.minX())return-1;var k=(this||_)._upwardSeg.orientationIndex(m._upwardSeg);return 0!==k||0!==(k=-1*m._upwardSeg.orientationIndex((this||_)._upwardSeg))?k:(this||_)._upwardSeg.compareTo(m._upwardSeg)}},{key:"compareX",value:function(_,p){var m=_.p0.compareTo(p.p0);return 0!==m?m:_.p1.compareTo(p.p1)}},{key:"toString",value:function(){return(this||_)._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[x]}}],[{key:"constructor_",value:function(){(this||_)._upwardSeg=null,(this||_)._leftDepth=null;var p=arguments[0],m=arguments[1];(this||_)._upwardSeg=new In(p),(this||_)._leftDepth=m}}])}();Dn.DepthSegment=Fn;var Gn=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,null,[{key:"constructor_",value:function(){m.constructor_.call(this||_,"Projective point not representable on the Cartesian plane.")}}])}(m),qn=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"getY",value:function(){var p=(this||_).y/(this||_).w;if(A.isNaN(p)||A.isInfinite(p))throw new Gn;return p}},{key:"getX",value:function(){var p=(this||_).x/(this||_).w;if(A.isNaN(p)||A.isInfinite(p))throw new Gn;return p}},{key:"getCoordinate",value:function(){var _=new B;return _.x=this.getX(),_.y=this.getY(),_}}],[{key:"constructor_",value:function(){if((this||_).x=null,(this||_).y=null,(this||_).w=null,0===arguments.length)(this||_).x=0,(this||_).y=0,(this||_).w=1;else if(1===arguments.length){var p=arguments[0];(this||_).x=p.x,(this||_).y=p.y,(this||_).w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var m=arguments[0],k=arguments[1];(this||_).x=m,(this||_).y=k,(this||_).w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var N=arguments[0],T=arguments[1];(this||_).x=N.y*T.w-T.y*N.w,(this||_).y=T.x*N.w-N.x*T.w,(this||_).w=N.x*T.y-T.x*N.y}else if(arguments[0]instanceof B&&arguments[1]instanceof B){var S=arguments[0],L=arguments[1];(this||_).x=S.y-L.y,(this||_).y=L.x-S.x,(this||_).w=S.x*L.y-L.x*S.y}}else if(3===arguments.length){var C=arguments[0],R=arguments[1],w=arguments[2];(this||_).x=C,(this||_).y=R,(this||_).w=w}else if(4===arguments.length){var O=arguments[0],b=arguments[1],M=arguments[2],D=arguments[3],F=O.y-b.y,G=b.x-O.x,q=O.x*b.y-b.x*O.y,Y=M.y-D.y,X=D.x-M.x,z=M.x*D.y-D.x*M.y;(this||_).x=G*z-X*q,(this||_).y=Y*q-F*z,(this||_).w=F*X-Y*G}}}])}(),Yn=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"area",value:function(){return t.area((this||_).p0,(this||_).p1,(this||_).p2)}},{key:"signedArea",value:function(){return t.signedArea((this||_).p0,(this||_).p1,(this||_).p2)}},{key:"interpolateZ",value:function(p){if(null===p)throw new k("Supplied point is null.");return t.interpolateZ(p,(this||_).p0,(this||_).p1,(this||_).p2)}},{key:"longestSideLength",value:function(){return t.longestSideLength((this||_).p0,(this||_).p1,(this||_).p2)}},{key:"isAcute",value:function(){return t.isAcute((this||_).p0,(this||_).p1,(this||_).p2)}},{key:"circumcentre",value:function(){return t.circumcentre((this||_).p0,(this||_).p1,(this||_).p2)}},{key:"area3D",value:function(){return t.area3D((this||_).p0,(this||_).p1,(this||_).p2)}},{key:"centroid",value:function(){return t.centroid((this||_).p0,(this||_).p1,(this||_).p2)}},{key:"inCentre",value:function(){return t.inCentre((this||_).p0,(this||_).p1,(this||_).p2)}}],[{key:"constructor_",value:function(){(this||_).p0=null,(this||_).p1=null,(this||_).p2=null;var p=arguments[0],m=arguments[1],k=arguments[2];(this||_).p0=p,(this||_).p1=m,(this||_).p2=k}},{key:"area",value:function(_,p,m){return Math.abs(((m.x-_.x)*(p.y-_.y)-(p.x-_.x)*(m.y-_.y))/2)}},{key:"signedArea",value:function(_,p,m){return((m.x-_.x)*(p.y-_.y)-(p.x-_.x)*(m.y-_.y))/2}},{key:"det",value:function(_,p,m,k){return _*k-p*m}},{key:"interpolateZ",value:function(_,p,m,k){var N=p.x,T=p.y,S=m.x-N,L=k.x-N,C=m.y-T,R=k.y-T,w=S*R-L*C,O=_.x-N,b=_.y-T,M=(R*O-L*b)/w,D=(-C*O+S*b)/w;return p.getZ()+M*(m.getZ()-p.getZ())+D*(k.getZ()-p.getZ())}},{key:"longestSideLength",value:function(_,p,m){var k=_.distance(p),N=p.distance(m),T=m.distance(_),S=k;return N>S&&(S=N),T>S&&(S=T),S}},{key:"circumcentreDD",value:function(_,p,m){var k=lt.valueOf(_.x).subtract(m.x),N=lt.valueOf(_.y).subtract(m.y),T=lt.valueOf(p.x).subtract(m.x),S=lt.valueOf(p.y).subtract(m.y),L=lt.determinant(k,N,T,S).multiply(2),C=k.sqr().add(N.sqr()),R=T.sqr().add(S.sqr()),w=lt.determinant(N,C,S,R),O=lt.determinant(k,C,T,R),b=lt.valueOf(m.x).subtract(w.divide(L)).doubleValue(),M=lt.valueOf(m.y).add(O.divide(L)).doubleValue();return new B(b,M)}},{key:"isAcute",value:function(_,p,m){return!!An.isAcute(_,p,m)&&!!An.isAcute(p,m,_)&&!!An.isAcute(m,_,p)}},{key:"circumcentre",value:function(_,p,m){var k=m.x,N=m.y,T=_.x-k,S=_.y-N,L=p.x-k,C=p.y-N,R=2*t.det(T,S,L,C),w=t.det(S,T*T+S*S,C,L*L+C*C),O=t.det(T,T*T+S*S,L,L*L+C*C);return new B(k-w/R,N+O/R)}},{key:"perpendicularBisector",value:function(_,p){var m=p.x-_.x,k=p.y-_.y,N=new qn(_.x+m/2,_.y+k/2,1),T=new qn(_.x-k+m/2,_.y+m+k/2,1);return new qn(N,T)}},{key:"angleBisector",value:function(_,p,m){var k=p.distance(_),N=k/(k+p.distance(m)),T=m.x-_.x,S=m.y-_.y;return new B(_.x+N*T,_.y+N*S)}},{key:"area3D",value:function(_,p,m){var k=p.x-_.x,N=p.y-_.y,T=p.getZ()-_.getZ(),S=m.x-_.x,L=m.y-_.y,C=m.getZ()-_.getZ(),R=N*C-T*L,w=T*S-k*C,O=k*L-N*S,b=R*R+w*w+O*O,M=Math.sqrt(b)/2;return M}},{key:"centroid",value:function(_,p,m){var k=(_.x+p.x+m.x)/3,N=(_.y+p.y+m.y)/3;return new B(k,N)}},{key:"inCentre",value:function(_,p,m){var k=p.distance(m),N=_.distance(m),T=_.distance(p),S=k+N+T,L=(k*_.x+N*p.x+T*m.x)/S,C=(k*_.y+N*p.y+T*m.y)/S;return new B(L,C)}}])}(),Xn=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"addRingSide",value:function(p,m,k,N,T){if(0===m&&p.length<Bt.MINIMUM_VALID_SIZE)return null;var S=N,L=T;p.length>=Bt.MINIMUM_VALID_SIZE&&ft.isCCW(p)&&(S=T,L=N,k=tt.opposite(k));var C=(this||_)._curveBuilder.getRingCurve(p,k,m);this.addCurve(C,S,L)}},{key:"addRingBothSides",value:function(_,p){this.addRingSide(_,p,tt.LEFT,Z.EXTERIOR,Z.INTERIOR),this.addRingSide(_,p,tt.RIGHT,Z.INTERIOR,Z.EXTERIOR)}},{key:"addPoint",value:function(p){if((this||_)._distance<=0)return null;var m=p.getCoordinates(),k=(this||_)._curveBuilder.getLineCurve(m,(this||_)._distance);this.addCurve(k,Z.EXTERIOR,Z.INTERIOR)}},{key:"addPolygon",value:function(p){var m=(this||_)._distance,k=tt.LEFT;(this||_)._distance<0&&(m=-(this||_)._distance,k=tt.RIGHT);var N=p.getExteriorRing(),T=Wt.removeRepeatedPoints(N.getCoordinates());if((this||_)._distance<0&&this.isErodedCompletely(N,(this||_)._distance))return null;if((this||_)._distance<=0&&T.length<3)return null;this.addRingSide(T,m,k,Z.EXTERIOR,Z.INTERIOR);for(var S=0;S<p.getNumInteriorRing();S++){var L=p.getInteriorRingN(S),C=Wt.removeRepeatedPoints(L.getCoordinates());(this||_)._distance>0&&this.isErodedCompletely(L,-(this||_)._distance)||this.addRingSide(C,m,tt.opposite(k),Z.INTERIOR,Z.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(_,p){var m=new Yn(_[0],_[1],_[2]),k=m.inCentre();return Et.pointToSegment(k,m.p0,m.p1)<Math.abs(p)}},{key:"addLineString",value:function(p){if((this||_)._curveBuilder.isLineOffsetEmpty((this||_)._distance))return null;var m=Wt.removeRepeatedPoints(p.getCoordinates());if(Wt.isRing(m)&&!(this||_)._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(m,(this||_)._distance);else{var k=(this||_)._curveBuilder.getLineCurve(m,(this||_)._distance);this.addCurve(k,Z.EXTERIOR,Z.INTERIOR)}}},{key:"addCurve",value:function(p,m,k){if(null===p||p.length<2)return null;var N=new En(p,new Pe(0,Z.BOUNDARY,m,k));(this||_)._curveList.add(N)}},{key:"getCurves",value:function(){return this.add((this||_)._inputGeom),(this||_)._curveList}},{key:"add",value:function(_){if(_.isEmpty())return null;if(_ instanceof Ft)this.addPolygon(_);else if(_ instanceof Ot)this.addLineString(_);else if(_ instanceof At)this.addPoint(_);else if(_ instanceof zt)this.addCollection(_);else if(_ instanceof ae)this.addCollection(_);else if(_ instanceof ee)this.addCollection(_);else{if(!(_ instanceof Xt))throw new K(_.getGeometryType());this.addCollection(_)}}},{key:"isErodedCompletely",value:function(_,p){var m=_.getCoordinates();if(m.length<4)return p<0;if(4===m.length)return this.isTriangleErodedCompletely(m,p);var k=_.getEnvelopeInternal(),N=Math.min(k.getHeight(),k.getWidth());return p<0&&2*Math.abs(p)>N}},{key:"addCollection",value:function(_){for(var p=0;p<_.getNumGeometries();p++){var m=_.getGeometryN(p);this.add(m)}}}],[{key:"constructor_",value:function(){(this||_)._inputGeom=null,(this||_)._distance=null,(this||_)._curveBuilder=null,(this||_)._curveList=new dt;var p=arguments[0],m=arguments[1],k=arguments[2];(this||_)._inputGeom=p,(this||_)._distance=m,(this||_)._curveBuilder=k}}])}(),zn=function(){return s((function t(){n(this||_,t)}),[{key:"locate",value:function(_){}}])}(),Bn=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"next",value:function(){if((this||_)._atStart)return(this||_)._atStart=!1,t.isAtomic((this||_)._parent)&&(this||_)._index++,(this||_)._parent;if(null!==(this||_)._subcollectionIterator){if((this||_)._subcollectionIterator.hasNext())return(this||_)._subcollectionIterator.next();(this||_)._subcollectionIterator=null}if((this||_)._index>=(this||_)._max)throw new W;var p=(this||_)._parent.getGeometryN((this||_)._index++);return p instanceof Xt?((this||_)._subcollectionIterator=new t(p),(this||_)._subcollectionIterator.next()):p}},{key:"remove",value:function(){throw new K(this.getClass().getName())}},{key:"hasNext",value:function(){if((this||_)._atStart)return!0;if(null!==(this||_)._subcollectionIterator){if((this||_)._subcollectionIterator.hasNext())return!0;(this||_)._subcollectionIterator=null}return!((this||_)._index>=(this||_)._max)}},{key:"interfaces_",get:function(){return[_n]}}],[{key:"constructor_",value:function(){(this||_)._parent=null,(this||_)._atStart=null,(this||_)._max=null,(this||_)._index=null,(this||_)._subcollectionIterator=null;var p=arguments[0];(this||_)._parent=p,(this||_)._atStart=!0,(this||_)._index=0,(this||_)._max=p.getNumGeometries()}},{key:"isAtomic",value:function(_){return!(_ instanceof Xt)}}])}(),Un=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"locate",value:function(p){return t.locate(p,(this||_)._geom)}},{key:"interfaces_",get:function(){return[zn]}}],[{key:"constructor_",value:function(){(this||_)._geom=null;var p=arguments[0];(this||_)._geom=p}},{key:"locatePointInPolygon",value:function(_,p){if(p.isEmpty())return Z.EXTERIOR;var m=p.getExteriorRing(),k=t.locatePointInRing(_,m);if(k!==Z.INTERIOR)return k;for(var N=0;N<p.getNumInteriorRing();N++){var T=p.getInteriorRingN(N),S=t.locatePointInRing(_,T);if(S===Z.BOUNDARY)return Z.BOUNDARY;if(S===Z.INTERIOR)return Z.EXTERIOR}return Z.INTERIOR}},{key:"locatePointInRing",value:function(_,p){return p.getEnvelopeInternal().intersects(_)?Ae.locateInRing(_,p.getCoordinates()):Z.EXTERIOR}},{key:"containsPointInPolygon",value:function(_,p){return Z.EXTERIOR!==t.locatePointInPolygon(_,p)}},{key:"locateInGeometry",value:function(_,p){if(p instanceof Ft)return t.locatePointInPolygon(_,p);if(p instanceof Xt)for(var m=new Bn(p);m.hasNext();){var k=m.next();if(k!==p){var N=t.locateInGeometry(_,k);if(N!==Z.EXTERIOR)return N}}return Z.EXTERIOR}},{key:"isContained",value:function(_,p){return Z.EXTERIOR!==t.locate(_,p)}},{key:"locate",value:function(_,p){return p.isEmpty()?Z.EXTERIOR:p.getEnvelopeInternal().intersects(_)?t.locateInGeometry(_,p):Z.EXTERIOR}}])}(),Vn=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"getNextCW",value:function(p){this.getEdges();var m=(this||_)._edgeList.indexOf(p),k=m-1;return 0===m&&(k=(this||_)._edgeList.size()-1),(this||_)._edgeList.get(k)}},{key:"propagateSideLabels",value:function(_){for(var p=Z.NONE,m=this.iterator();m.hasNext();){var k=m.next().getLabel();k.isArea(_)&&k.getLocation(_,tt.LEFT)!==Z.NONE&&(p=k.getLocation(_,tt.LEFT))}if(p===Z.NONE)return null;for(var N=p,T=this.iterator();T.hasNext();){var S=T.next(),L=S.getLabel();if(L.getLocation(_,tt.ON)===Z.NONE&&L.setLocation(_,tt.ON,N),L.isArea(_)){var C=L.getLocation(_,tt.LEFT),R=L.getLocation(_,tt.RIGHT);if(R!==Z.NONE){if(R!==N)throw new vt("side location conflict",S.getCoordinate());C===Z.NONE&&q.shouldNeverReachHere("found single null side (at "+S.getCoordinate()+")"),N=C}else q.isTrue(L.getLocation(_,tt.LEFT)===Z.NONE,"found single null side"),L.setLocation(_,tt.RIGHT,N),L.setLocation(_,tt.LEFT,N)}}}},{key:"getCoordinate",value:function(){var _=this.iterator();return _.hasNext()?_.next().getCoordinate():null}},{key:"print",value:function(_){kt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var p=this.iterator();p.hasNext();)p.next().print(_)}},{key:"isAreaLabelsConsistent",value:function(_){return this.computeEdgeEndLabels(_.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(_){var p=this.getEdges();if(p.size()<=0)return!0;var m=p.size()-1,k=p.get(m).getLabel().getLocation(_,tt.LEFT);q.isTrue(k!==Z.NONE,"Found unlabelled area edge");for(var N=k,T=this.iterator();T.hasNext();){var S=T.next().getLabel();q.isTrue(S.isArea(_),"Found non-area edge");var L=S.getLocation(_,tt.LEFT),C=S.getLocation(_,tt.RIGHT);if(L===C)return!1;if(C!==N)return!1;N=L}return!0}},{key:"findIndex",value:function(p){this.iterator();for(var m=0;m<(this||_)._edgeList.size();m++)if((this||_)._edgeList.get(m)===p)return m;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===(this||_)._edgeList&&((this||_)._edgeList=new dt((this||_)._edgeMap.values())),(this||_)._edgeList}},{key:"getLocation",value:function(p,m,k){return(this||_)._ptInAreaLocation[p]===Z.NONE&&((this||_)._ptInAreaLocation[p]=Un.locate(m,k[p].getGeometry())),(this||_)._ptInAreaLocation[p]}},{key:"toString",value:function(){var _=new at;_.append("EdgeEndStar:   "+this.getCoordinate()),_.append("\n");for(var p=this.iterator();p.hasNext();){var m=p.next();_.append(m),_.append("\n")}return _.toString()}},{key:"computeEdgeEndLabels",value:function(_){for(var p=this.iterator();p.hasNext();)p.next().computeLabel(_)}},{key:"computeLabelling",value:function(_){this.computeEdgeEndLabels(_[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var p=[!1,!1],m=this.iterator();m.hasNext();)for(var k=m.next().getLabel(),N=0;N<2;N++)k.isLine(N)&&k.getLocation(N)===Z.BOUNDARY&&(p[N]=!0);for(var T=this.iterator();T.hasNext();)for(var S=T.next(),L=S.getLabel(),C=0;C<2;C++)if(L.isAnyNull(C)){var R=Z.NONE;if(p[C])R=Z.EXTERIOR;else{var w=S.getCoordinate();R=this.getLocation(C,w,_)}L.setAllLocationsIfNull(C,R)}}},{key:"getDegree",value:function(){return(this||_)._edgeMap.size()}},{key:"insertEdgeEnd",value:function(p,m){(this||_)._edgeMap.put(p,m),(this||_)._edgeList=null}}],[{key:"constructor_",value:function(){(this||_)._edgeMap=new Ze,(this||_)._edgeList=null,(this||_)._ptInAreaLocation=[Z.NONE,Z.NONE]}}])}(),Hn=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var p=null,m=null,k=(this||_)._SCANNING_FOR_INCOMING,N=0;N<(this||_)._resultAreaEdgeList.size();N++){var T=(this||_)._resultAreaEdgeList.get(N),S=T.getSym();if(T.getLabel().isArea())switch(null===p&&T.isInResult()&&(p=T),k){case(this||_)._SCANNING_FOR_INCOMING:if(!S.isInResult())continue;m=S,k=(this||_)._LINKING_TO_OUTGOING;break;case(this||_)._LINKING_TO_OUTGOING:if(!T.isInResult())continue;m.setNext(T),k=(this||_)._SCANNING_FOR_INCOMING}}if(k===(this||_)._LINKING_TO_OUTGOING){if(null===p)throw new vt("no outgoing dirEdge found",this.getCoordinate());q.isTrue(p.isInResult(),"unable to link last incoming dirEdge"),m.setNext(p)}}},{key:"insert",value:function(_){var p=_;this.insertEdgeEnd(p,p)}},{key:"getRightmostEdge",value:function(){var _=this.getEdges(),p=_.size();if(p<1)return null;var m=_.get(0);if(1===p)return m;var k=_.get(p-1),N=m.getQuadrant(),T=k.getQuadrant();return We.isNorthern(N)&&We.isNorthern(T)?m:We.isNorthern(N)||We.isNorthern(T)?0!==m.getDy()?m:0!==k.getDy()?k:(q.shouldNeverReachHere("found two horizontal edges incident on node"),null):k}},{key:"print",value:function(_){kt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var p=this.iterator();p.hasNext();){var m=p.next();_.print("out "),m.print(_),_.println(),_.print("in "),m.getSym().print(_),_.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==(this||_)._resultAreaEdgeList)return(this||_)._resultAreaEdgeList;(this||_)._resultAreaEdgeList=new dt;for(var p=this.iterator();p.hasNext();){var m=p.next();(m.isInResult()||m.getSym().isInResult())&&(this||_)._resultAreaEdgeList.add(m)}return(this||_)._resultAreaEdgeList}},{key:"updateLabelling",value:function(_){for(var p=this.iterator();p.hasNext();){var m=p.next().getLabel();m.setAllLocationsIfNull(0,_.getLocation(0)),m.setAllLocationsIfNull(1,_.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var p=null,m=null,k=(this||_)._edgeList.size()-1;k>=0;k--){var N=(this||_)._edgeList.get(k),T=N.getSym();null===m&&(m=T),null!==p&&T.setNext(p),p=N}m.setNext(p)}},{key:"computeDepths",value:function(){if(1===arguments.length){var p=arguments[0],m=this.findIndex(p),k=p.getDepth(tt.LEFT),N=p.getDepth(tt.RIGHT),T=this.computeDepths(m+1,(this||_)._edgeList.size(),k);if(this.computeDepths(0,m,T)!==N)throw new vt("depth mismatch at "+p.getCoordinate())}else if(3===arguments.length){for(var S=arguments[1],L=arguments[2],C=arguments[0];C<S;C++){var R=(this||_)._edgeList.get(C);R.setEdgeDepths(tt.RIGHT,L),L=R.getDepth(tt.LEFT)}return L}}},{key:"mergeSymLabels",value:function(){for(var _=this.iterator();_.hasNext();){var p=_.next();p.getLabel().merge(p.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(p){for(var m=null,k=null,N=(this||_)._SCANNING_FOR_INCOMING,T=(this||_)._resultAreaEdgeList.size()-1;T>=0;T--){var S=(this||_)._resultAreaEdgeList.get(T),L=S.getSym();switch(null===m&&S.getEdgeRing()===p&&(m=S),N){case(this||_)._SCANNING_FOR_INCOMING:if(L.getEdgeRing()!==p)continue;k=L,N=(this||_)._LINKING_TO_OUTGOING;break;case(this||_)._LINKING_TO_OUTGOING:if(S.getEdgeRing()!==p)continue;k.setNextMin(S),N=(this||_)._SCANNING_FOR_INCOMING}}N===(this||_)._LINKING_TO_OUTGOING&&(q.isTrue(null!==m,"found null for first outgoing dirEdge"),q.isTrue(m.getEdgeRing()===p,"unable to link last incoming dirEdge"),k.setNextMin(m))}},{key:"getOutgoingDegree",value:function(){if(0===arguments.length){for(var _=0,p=this.iterator();p.hasNext();)p.next().isInResult()&&_++;return _}if(1===arguments.length){for(var m=arguments[0],k=0,N=this.iterator();N.hasNext();)N.next().getEdgeRing()===m&&k++;return k}}},{key:"getLabel",value:function(){return(this||_)._label}},{key:"findCoveredLineEdges",value:function(){for(var _=Z.NONE,p=this.iterator();p.hasNext();){var m=p.next(),k=m.getSym();if(!m.isLineEdge()){if(m.isInResult()){_=Z.INTERIOR;break}if(k.isInResult()){_=Z.EXTERIOR;break}}}if(_===Z.NONE)return null;for(var N=_,T=this.iterator();T.hasNext();){var S=T.next(),L=S.getSym();S.isLineEdge()?S.getEdge().setCovered(N===Z.INTERIOR):(S.isInResult()&&(N=Z.EXTERIOR),L.isInResult()&&(N=Z.INTERIOR))}}},{key:"computeLabelling",value:function(p){f(i,"computeLabelling",this||_,1).call(this||_,p),(this||_)._label=new Pe(Z.NONE);for(var m=this.iterator();m.hasNext();)for(var k=m.next().getEdge().getLabel(),N=0;N<2;N++){var T=k.getLocation(N);T!==Z.INTERIOR&&T!==Z.BOUNDARY||(this||_)._label.setLocation(N,Z.INTERIOR)}}}],[{key:"constructor_",value:function(){(this||_)._resultAreaEdgeList=null,(this||_)._label=null,(this||_)._SCANNING_FOR_INCOMING=1,(this||_)._LINKING_TO_OUTGOING=2}}])}(Vn),Zn=function(p){function i(){return n(this||_,i),e(this||_,i)}return l(i,p),s(i,[{key:"createNode",value:function(_){return new Ye(_,new Hn)}}])}(Qe),jn=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"compareTo",value:function(p){var m=p;return t.compareOriented((this||_)._pts,(this||_)._orientation,m._pts,m._orientation)}},{key:"interfaces_",get:function(){return[x]}}],[{key:"constructor_",value:function(){(this||_)._pts=null,(this||_)._orientation=null;var p=arguments[0];(this||_)._pts=p,(this||_)._orientation=t.orientation(p)}},{key:"orientation",value:function(_){return 1===Wt.increasingDirection(_)}},{key:"compareOriented",value:function(_,p,m,k){for(var N=p?1:-1,T=k?1:-1,S=p?_.length:-1,L=k?m.length:-1,C=p?0:_.length-1,R=k?0:m.length-1;;){var w=_[C].compareTo(m[R]);if(0!==w)return w;var O=(C+=N)===S,b=(R+=T)===L;if(O&&!b)return-1;if(!O&&b)return 1;if(O&&b)return 0}}}])}(),Wn=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"print",value:function(p){p.print("MULTILINESTRING ( ");for(var m=0;m<(this||_)._edges.size();m++){var k=(this||_)._edges.get(m);m>0&&p.print(","),p.print("(");for(var N=k.getCoordinates(),T=0;T<N.length;T++)T>0&&p.print(","),p.print(N[T].x+" "+N[T].y);p.println(")")}p.print(")  ")}},{key:"addAll",value:function(_){for(var p=_.iterator();p.hasNext();)this.add(p.next())}},{key:"findEdgeIndex",value:function(p){for(var m=0;m<(this||_)._edges.size();m++)if((this||_)._edges.get(m).equals(p))return m;return-1}},{key:"iterator",value:function(){return(this||_)._edges.iterator()}},{key:"getEdges",value:function(){return(this||_)._edges}},{key:"get",value:function(p){return(this||_)._edges.get(p)}},{key:"findEqualEdge",value:function(p){var m=new jn(p.getCoordinates());return(this||_)._ocaMap.get(m)}},{key:"add",value:function(p){(this||_)._edges.add(p);var m=new jn(p.getCoordinates());(this||_)._ocaMap.put(m,p)}}],[{key:"constructor_",value:function(){(this||_)._edges=new dt,(this||_)._ocaMap=new Ze}}])}(),Kn=function(){return s((function t(){n(this||_,t)}),[{key:"processIntersections",value:function(_,p,m,k){}},{key:"isDone",value:function(){}}])}(),Jn=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"isTrivialIntersection",value:function(p,m,k,N){if(p===k&&1===(this||_)._li.getIntersectionNum()){if(t.isAdjacentSegments(m,N))return!0;if(p.isClosed()){var T=p.size()-1;if(0===m&&N===T||0===N&&m===T)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return(this||_)._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return(this||_)._hasProperInterior}},{key:"getLineIntersector",value:function(){return(this||_)._li}},{key:"hasProperIntersection",value:function(){return(this||_)._hasProper}},{key:"processIntersections",value:function(p,m,k,N){if(p===k&&m===N)return null;(this||_).numTests++;var T=p.getCoordinates()[m],S=p.getCoordinates()[m+1],L=k.getCoordinates()[N],C=k.getCoordinates()[N+1];(this||_)._li.computeIntersection(T,S,L,C),(this||_)._li.hasIntersection()&&((this||_).numIntersections++,(this||_)._li.isInteriorIntersection()&&((this||_).numInteriorIntersections++,(this||_)._hasInterior=!0),this.isTrivialIntersection(p,m,k,N)||((this||_)._hasIntersection=!0,p.addIntersections((this||_)._li,m,0),k.addIntersections((this||_)._li,N,1),(this||_)._li.isProper()&&((this||_).numProperIntersections++,(this||_)._hasProper=!0,(this||_)._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return(this||_)._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return(this||_)._hasInterior}},{key:"interfaces_",get:function(){return[Kn]}}],[{key:"constructor_",value:function(){(this||_)._hasIntersection=!1,(this||_)._hasProper=!1,(this||_)._hasProperInterior=!1,(this||_)._hasInterior=!1,(this||_)._properIntersectionPoint=null,(this||_)._li=null,(this||_)._isSelfIntersection=null,(this||_).numIntersections=0,(this||_).numInteriorIntersections=0,(this||_).numProperIntersections=0,(this||_).numTests=0;var p=arguments[0];(this||_)._li=p}},{key:"isAdjacentSegments",value:function(_,p){return 1===Math.abs(_-p)}}])}(),Qn=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"getSegmentIndex",value:function(){return(this||_).segmentIndex}},{key:"getCoordinate",value:function(){return(this||_).coord}},{key:"print",value:function(p){p.print((this||_).coord),p.print(" seg # = "+(this||_).segmentIndex),p.println(" dist = "+(this||_).dist)}},{key:"compareTo",value:function(_){var p=_;return this.compare(p.segmentIndex,p.dist)}},{key:"isEndPoint",value:function(p){return 0===(this||_).segmentIndex&&0===(this||_).dist||(this||_).segmentIndex===p}},{key:"toString",value:function(){return(this||_).coord+" seg # = "+(this||_).segmentIndex+" dist = "+(this||_).dist}},{key:"getDistance",value:function(){return(this||_).dist}},{key:"compare",value:function(p,m){return(this||_).segmentIndex<p?-1:(this||_).segmentIndex>p?1:(this||_).dist<m?-1:(this||_).dist>m?1:0}},{key:"interfaces_",get:function(){return[x]}}],[{key:"constructor_",value:function(){(this||_).coord=null,(this||_).segmentIndex=null,(this||_).dist=null;var p=arguments[0],m=arguments[1],k=arguments[2];(this||_).coord=new B(p),(this||_).segmentIndex=m,(this||_).dist=k}}])}(),$n=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"print",value:function(_){_.println("Intersections:");for(var p=this.iterator();p.hasNext();)p.next().print(_)}},{key:"iterator",value:function(){return(this||_)._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(_){this.addEndpoints();for(var p=this.iterator(),m=p.next();p.hasNext();){var k=p.next(),N=this.createSplitEdge(m,k);_.add(N),m=k}}},{key:"addEndpoints",value:function(){var p=(this||_).edge.pts.length-1;this.add((this||_).edge.pts[0],0,0),this.add((this||_).edge.pts[p],p,0)}},{key:"createSplitEdge",value:function(p,m){var k=m.segmentIndex-p.segmentIndex+2,N=(this||_).edge.pts[m.segmentIndex],T=m.dist>0||!m.coord.equals2D(N);T||k--;var S=new Array(k).fill(null),L=0;S[L++]=new B(p.coord);for(var C=p.segmentIndex+1;C<=m.segmentIndex;C++)S[L++]=(this||_).edge.pts[C];return T&&(S[L]=m.coord),new si(S,new Pe((this||_).edge._label))}},{key:"add",value:function(p,m,k){var N=new Qn(p,m,k),T=(this||_)._nodeMap.get(N);return null!==T?T:((this||_)._nodeMap.put(N,N),N)}},{key:"isIntersection",value:function(_){for(var p=this.iterator();p.hasNext();)if(p.next().coord.equals(_))return!0;return!1}}],[{key:"constructor_",value:function(){(this||_)._nodeMap=new Ze,(this||_).edge=null;var p=arguments[0];(this||_).edge=p}}])}(),ti=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(t.isTrue((this||_)._matrix[Z.INTERIOR][Z.INTERIOR])||t.isTrue((this||_)._matrix[Z.INTERIOR][Z.BOUNDARY])||t.isTrue((this||_)._matrix[Z.BOUNDARY][Z.INTERIOR])||t.isTrue((this||_)._matrix[Z.BOUNDARY][Z.BOUNDARY]))&&(this||_)._matrix[Z.EXTERIOR][Z.INTERIOR]===Ct.FALSE&&(this||_)._matrix[Z.EXTERIOR][Z.BOUNDARY]===Ct.FALSE}},{key:"isCoveredBy",value:function(){return(t.isTrue((this||_)._matrix[Z.INTERIOR][Z.INTERIOR])||t.isTrue((this||_)._matrix[Z.INTERIOR][Z.BOUNDARY])||t.isTrue((this||_)._matrix[Z.BOUNDARY][Z.INTERIOR])||t.isTrue((this||_)._matrix[Z.BOUNDARY][Z.BOUNDARY]))&&(this||_)._matrix[Z.INTERIOR][Z.EXTERIOR]===Ct.FALSE&&(this||_)._matrix[Z.BOUNDARY][Z.EXTERIOR]===Ct.FALSE}},{key:"set",value:function(){if(1===arguments.length)for(var p=arguments[0],m=0;m<p.length;m++){var k=Math.trunc(m/3),N=m%3;(this||_)._matrix[k][N]=Ct.toDimensionValue(p.charAt(m))}else if(3===arguments.length){var T=arguments[0],S=arguments[1],L=arguments[2];(this||_)._matrix[T][S]=L}}},{key:"isContains",value:function(){return t.isTrue((this||_)._matrix[Z.INTERIOR][Z.INTERIOR])&&(this||_)._matrix[Z.EXTERIOR][Z.INTERIOR]===Ct.FALSE&&(this||_)._matrix[Z.EXTERIOR][Z.BOUNDARY]===Ct.FALSE}},{key:"setAtLeast",value:function(){if(1===arguments.length)for(var p=arguments[0],m=0;m<p.length;m++){var k=Math.trunc(m/3),N=m%3;this.setAtLeast(k,N,Ct.toDimensionValue(p.charAt(m)))}else if(3===arguments.length){var T=arguments[0],S=arguments[1],L=arguments[2];(this||_)._matrix[T][S]<L&&((this||_)._matrix[T][S]=L)}}},{key:"setAtLeastIfValid",value:function(_,p,m){_>=0&&p>=0&&this.setAtLeast(_,p,m)}},{key:"isWithin",value:function(){return t.isTrue((this||_)._matrix[Z.INTERIOR][Z.INTERIOR])&&(this||_)._matrix[Z.INTERIOR][Z.EXTERIOR]===Ct.FALSE&&(this||_)._matrix[Z.BOUNDARY][Z.EXTERIOR]===Ct.FALSE}},{key:"isTouches",value:function(p,m){return p>m?this.isTouches(m,p):(p===Ct.A&&m===Ct.A||p===Ct.L&&m===Ct.L||p===Ct.L&&m===Ct.A||p===Ct.P&&m===Ct.A||p===Ct.P&&m===Ct.L)&&(this||_)._matrix[Z.INTERIOR][Z.INTERIOR]===Ct.FALSE&&(t.isTrue((this||_)._matrix[Z.INTERIOR][Z.BOUNDARY])||t.isTrue((this||_)._matrix[Z.BOUNDARY][Z.INTERIOR])||t.isTrue((this||_)._matrix[Z.BOUNDARY][Z.BOUNDARY]))}},{key:"isOverlaps",value:function(p,m){return p===Ct.P&&m===Ct.P||p===Ct.A&&m===Ct.A?t.isTrue((this||_)._matrix[Z.INTERIOR][Z.INTERIOR])&&t.isTrue((this||_)._matrix[Z.INTERIOR][Z.EXTERIOR])&&t.isTrue((this||_)._matrix[Z.EXTERIOR][Z.INTERIOR]):p===Ct.L&&m===Ct.L&&1===(this||_)._matrix[Z.INTERIOR][Z.INTERIOR]&&t.isTrue((this||_)._matrix[Z.INTERIOR][Z.EXTERIOR])&&t.isTrue((this||_)._matrix[Z.EXTERIOR][Z.INTERIOR])}},{key:"isEquals",value:function(p,m){return p===m&&t.isTrue((this||_)._matrix[Z.INTERIOR][Z.INTERIOR])&&(this||_)._matrix[Z.INTERIOR][Z.EXTERIOR]===Ct.FALSE&&(this||_)._matrix[Z.BOUNDARY][Z.EXTERIOR]===Ct.FALSE&&(this||_)._matrix[Z.EXTERIOR][Z.INTERIOR]===Ct.FALSE&&(this||_)._matrix[Z.EXTERIOR][Z.BOUNDARY]===Ct.FALSE}},{key:"toString",value:function(){for(var p=new Qt("123456789"),m=0;m<3;m++)for(var k=0;k<3;k++)p.setCharAt(3*m+k,Ct.toDimensionSymbol((this||_)._matrix[m][k]));return p.toString()}},{key:"setAll",value:function(p){for(var m=0;m<3;m++)for(var k=0;k<3;k++)(this||_)._matrix[m][k]=p}},{key:"get",value:function(p,m){return(this||_)._matrix[p][m]}},{key:"transpose",value:function(){var p=(this||_)._matrix[1][0];return(this||_)._matrix[1][0]=(this||_)._matrix[0][1],(this||_)._matrix[0][1]=p,p=(this||_)._matrix[2][0],(this||_)._matrix[2][0]=(this||_)._matrix[0][2],(this||_)._matrix[0][2]=p,p=(this||_)._matrix[2][1],(this||_)._matrix[2][1]=(this||_)._matrix[1][2],(this||_)._matrix[1][2]=p,this||_}},{key:"matches",value:function(p){if(9!==p.length)throw new k("Should be length 9: "+p);for(var m=0;m<3;m++)for(var N=0;N<3;N++)if(!t.matches((this||_)._matrix[m][N],p.charAt(3*m+N)))return!1;return!0}},{key:"add",value:function(_){for(var p=0;p<3;p++)for(var m=0;m<3;m++)this.setAtLeast(p,m,_.get(p,m))}},{key:"isDisjoint",value:function(){return(this||_)._matrix[Z.INTERIOR][Z.INTERIOR]===Ct.FALSE&&(this||_)._matrix[Z.INTERIOR][Z.BOUNDARY]===Ct.FALSE&&(this||_)._matrix[Z.BOUNDARY][Z.INTERIOR]===Ct.FALSE&&(this||_)._matrix[Z.BOUNDARY][Z.BOUNDARY]===Ct.FALSE}},{key:"isCrosses",value:function(p,m){return p===Ct.P&&m===Ct.L||p===Ct.P&&m===Ct.A||p===Ct.L&&m===Ct.A?t.isTrue((this||_)._matrix[Z.INTERIOR][Z.INTERIOR])&&t.isTrue((this||_)._matrix[Z.INTERIOR][Z.EXTERIOR]):p===Ct.L&&m===Ct.P||p===Ct.A&&m===Ct.P||p===Ct.A&&m===Ct.L?t.isTrue((this||_)._matrix[Z.INTERIOR][Z.INTERIOR])&&t.isTrue((this||_)._matrix[Z.EXTERIOR][Z.INTERIOR]):p===Ct.L&&m===Ct.L&&0===(this||_)._matrix[Z.INTERIOR][Z.INTERIOR]}},{key:"interfaces_",get:function(){return[I]}}],[{key:"constructor_",value:function(){if((this||_)._matrix=null,0===arguments.length)(this||_)._matrix=Array(3).fill().map((function(){return Array(3)})),this.setAll(Ct.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var p=arguments[0];t.constructor_.call(this||_),this.set(p)}else if(arguments[0]instanceof t){var m=arguments[0];t.constructor_.call(this||_),(this||_)._matrix[Z.INTERIOR][Z.INTERIOR]=m._matrix[Z.INTERIOR][Z.INTERIOR],(this||_)._matrix[Z.INTERIOR][Z.BOUNDARY]=m._matrix[Z.INTERIOR][Z.BOUNDARY],(this||_)._matrix[Z.INTERIOR][Z.EXTERIOR]=m._matrix[Z.INTERIOR][Z.EXTERIOR],(this||_)._matrix[Z.BOUNDARY][Z.INTERIOR]=m._matrix[Z.BOUNDARY][Z.INTERIOR],(this||_)._matrix[Z.BOUNDARY][Z.BOUNDARY]=m._matrix[Z.BOUNDARY][Z.BOUNDARY],(this||_)._matrix[Z.BOUNDARY][Z.EXTERIOR]=m._matrix[Z.BOUNDARY][Z.EXTERIOR],(this||_)._matrix[Z.EXTERIOR][Z.INTERIOR]=m._matrix[Z.EXTERIOR][Z.INTERIOR],(this||_)._matrix[Z.EXTERIOR][Z.BOUNDARY]=m._matrix[Z.EXTERIOR][Z.BOUNDARY],(this||_)._matrix[Z.EXTERIOR][Z.EXTERIOR]=m._matrix[Z.EXTERIOR][Z.EXTERIOR]}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var _=arguments[0],p=arguments[1];return p===Ct.SYM_DONTCARE||p===Ct.SYM_TRUE&&(_>=0||_===Ct.TRUE)||p===Ct.SYM_FALSE&&_===Ct.FALSE||p===Ct.SYM_P&&_===Ct.P||p===Ct.SYM_L&&_===Ct.L||p===Ct.SYM_A&&_===Ct.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var m=arguments[1];return new t(arguments[0]).matches(m)}}},{key:"isTrue",value:function(_){return _>=0||_===Ct.TRUE}}])}(),ei=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"size",value:function(){return(this||_)._size}},{key:"addAll",value:function(p){return null===p||0===p.length?null:(this.ensureCapacity((this||_)._size+p.length),kt.arraycopy(p,0,(this||_)._data,(this||_)._size,p.length),void((this||_)._size+=p.length))}},{key:"ensureCapacity",value:function(p){if(p<=(this||_)._data.length)return null;var m=Math.max(p,2*(this||_)._data.length);(this||_)._data=Pt.copyOf((this||_)._data,m)}},{key:"toArray",value:function(){var p=new Array((this||_)._size).fill(null);return kt.arraycopy((this||_)._data,0,p,0,(this||_)._size),p}},{key:"add",value:function(p){this.ensureCapacity((this||_)._size+1),(this||_)._data[(this||_)._size]=p,++(this||_)._size}}],[{key:"constructor_",value:function(){if((this||_)._data=null,(this||_)._size=0,0===arguments.length)t.constructor_.call(this||_,10);else if(1===arguments.length){var p=arguments[0];(this||_)._data=new Array(p).fill(null)}}}])}(),ni=function(){function t(){n(this||_,t)}return s(t,[{key:"getChainStartIndices",value:function(_){var p=0,m=new ei(Math.trunc(_.length/2));m.add(p);do{var k=this.findChainEnd(_,p);m.add(k),p=k}while(p<_.length-1);return m.toArray()}},{key:"findChainEnd",value:function(_,p){for(var m=We.quadrant(_[p],_[p+1]),k=p+1;k<_.length;){if(We.quadrant(_[k-1],_[k])!==m)break;k++}return k-1}},{key:"OLDgetChainStartIndices",value:function(_){var p=0,m=new dt;m.add(p);do{var k=this.findChainEnd(_,p);m.add(k),p=k}while(p<_.length-1);return t.toIntArray(m)}}],[{key:"toIntArray",value:function(_){for(var p=new Array(_.size()).fill(null),m=0;m<p.length;m++)p[m]=_.get(m).intValue();return p}}])}(),ii=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"getCoordinates",value:function(){return(this||_).pts}},{key:"getMaxX",value:function(p){var m=(this||_).pts[(this||_).startIndex[p]].x,k=(this||_).pts[(this||_).startIndex[p+1]].x;return m>k?m:k}},{key:"getMinX",value:function(p){var m=(this||_).pts[(this||_).startIndex[p]].x,k=(this||_).pts[(this||_).startIndex[p+1]].x;return m<k?m:k}},{key:"computeIntersectsForChain",value:function(){if(4===arguments.length){var p=arguments[0],m=arguments[1],k=arguments[2],N=arguments[3];this.computeIntersectsForChain((this||_).startIndex[p],(this||_).startIndex[p+1],m,m.startIndex[k],m.startIndex[k+1],N)}else if(6===arguments.length){var T=arguments[0],S=arguments[1],L=arguments[2],C=arguments[3],R=arguments[4],w=arguments[5];if(S-T==1&&R-C==1)return w.addIntersections((this||_).e,T,L.e,C),null;if(!this.overlaps(T,S,L,C,R))return null;var O=Math.trunc((T+S)/2),b=Math.trunc((C+R)/2);T<O&&(C<b&&this.computeIntersectsForChain(T,O,L,C,b,w),b<R&&this.computeIntersectsForChain(T,O,L,b,R,w)),O<S&&(C<b&&this.computeIntersectsForChain(O,S,L,C,b,w),b<R&&this.computeIntersectsForChain(O,S,L,b,R,w))}}},{key:"overlaps",value:function(p,m,k,N,T){return V.intersects((this||_).pts[p],(this||_).pts[m],k.pts[N],k.pts[T])}},{key:"getStartIndexes",value:function(){return(this||_).startIndex}},{key:"computeIntersects",value:function(p,m){for(var k=0;k<(this||_).startIndex.length-1;k++)for(var N=0;N<p.startIndex.length-1;N++)this.computeIntersectsForChain(k,p,N,m)}}],[{key:"constructor_",value:function(){(this||_).e=null,(this||_).pts=null,(this||_).startIndex=null;var p=arguments[0];(this||_).e=p,(this||_).pts=p.getCoordinates();var m=new ni;(this||_).startIndex=m.getChainStartIndices((this||_).pts)}}])}(),ri=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"getDepth",value:function(p,m){return(this||_)._depth[p][m]}},{key:"setDepth",value:function(p,m,k){(this||_)._depth[p][m]=k}},{key:"isNull",value:function(){if(0===arguments.length){for(var p=0;p<2;p++)for(var m=0;m<3;m++)if((this||_)._depth[p][m]!==t.NULL_VALUE)return!1;return!0}if(1===arguments.length){var k=arguments[0];return(this||_)._depth[k][1]===t.NULL_VALUE}if(2===arguments.length){var N=arguments[0],T=arguments[1];return(this||_)._depth[N][T]===t.NULL_VALUE}}},{key:"normalize",value:function(){for(var p=0;p<2;p++)if(!this.isNull(p)){var m=(this||_)._depth[p][1];(this||_)._depth[p][2]<m&&(m=(this||_)._depth[p][2]),m<0&&(m=0);for(var k=1;k<3;k++){var N=0;(this||_)._depth[p][k]>m&&(N=1),(this||_)._depth[p][k]=N}}}},{key:"getDelta",value:function(p){return(this||_)._depth[p][tt.RIGHT]-(this||_)._depth[p][tt.LEFT]}},{key:"getLocation",value:function(p,m){return(this||_)._depth[p][m]<=0?Z.EXTERIOR:Z.INTERIOR}},{key:"toString",value:function(){return"A: "+(this||_)._depth[0][1]+","+(this||_)._depth[0][2]+" B: "+(this||_)._depth[1][1]+","+(this||_)._depth[1][2]}},{key:"add",value:function(){if(1===arguments.length)for(var p=arguments[0],m=0;m<2;m++)for(var k=1;k<3;k++){var N=p.getLocation(m,k);N!==Z.EXTERIOR&&N!==Z.INTERIOR||(this.isNull(m,k)?(this||_)._depth[m][k]=t.depthAtLocation(N):(this||_)._depth[m][k]+=t.depthAtLocation(N))}else if(3===arguments.length){var T=arguments[0],S=arguments[1];arguments[2]===Z.INTERIOR&&(this||_)._depth[T][S]++}}}],[{key:"constructor_",value:function(){(this||_)._depth=Array(2).fill().map((function(){return Array(3)}));for(var p=0;p<2;p++)for(var m=0;m<3;m++)(this||_)._depth[p][m]=t.NULL_VALUE}},{key:"depthAtLocation",value:function(_){return _===Z.EXTERIOR?0:_===Z.INTERIOR?1:t.NULL_VALUE}}])}();ri.NULL_VALUE=-1;var si=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"getDepth",value:function(){return(this||_)._depth}},{key:"getCollapsedEdge",value:function(){var p=new Array(2).fill(null);return p[0]=(this||_).pts[0],p[1]=(this||_).pts[1],new i(p,Pe.toLineLabel((this||_)._label))}},{key:"isIsolated",value:function(){return(this||_)._isIsolated}},{key:"getCoordinates",value:function(){return(this||_).pts}},{key:"setIsolated",value:function(p){(this||_)._isIsolated=p}},{key:"setName",value:function(p){(this||_)._name=p}},{key:"equals",value:function(p){if(!(p instanceof i))return!1;var m=p;if((this||_).pts.length!==m.pts.length)return!1;for(var k=!0,N=!0,T=(this||_).pts.length,S=0;S<(this||_).pts.length;S++)if((this||_).pts[S].equals2D(m.pts[S])||(k=!1),(this||_).pts[S].equals2D(m.pts[--T])||(N=!1),!k&&!N)return!1;return!0}},{key:"getCoordinate",value:function(){if(0===arguments.length)return(this||_).pts.length>0?(this||_).pts[0]:null;if(1===arguments.length){var p=arguments[0];return(this||_).pts[p]}}},{key:"print",value:function(p){p.print("edge "+(this||_)._name+": "),p.print("LINESTRING (");for(var m=0;m<(this||_).pts.length;m++)m>0&&p.print(","),p.print((this||_).pts[m].x+" "+(this||_).pts[m].y);p.print(")  "+(this||_)._label+" "+(this||_)._depthDelta)}},{key:"computeIM",value:function(p){i.updateIM((this||_)._label,p)}},{key:"isCollapsed",value:function(){return!!(this||_)._label.isArea()&&3===(this||_).pts.length&&!!(this||_).pts[0].equals((this||_).pts[2])}},{key:"isClosed",value:function(){return(this||_).pts[0].equals((this||_).pts[(this||_).pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return(this||_).pts.length-1}},{key:"getDepthDelta",value:function(){return(this||_)._depthDelta}},{key:"getNumPoints",value:function(){return(this||_).pts.length}},{key:"printReverse",value:function(p){p.print("edge "+(this||_)._name+": ");for(var m=(this||_).pts.length-1;m>=0;m--)p.print((this||_).pts[m]+" ");p.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===(this||_)._mce&&((this||_)._mce=new ii(this||_)),(this||_)._mce}},{key:"getEnvelope",value:function(){if(null===(this||_)._env){(this||_)._env=new V;for(var p=0;p<(this||_).pts.length;p++)(this||_)._env.expandToInclude((this||_).pts[p])}return(this||_)._env}},{key:"addIntersection",value:function(p,m,k,N){var T=new B(p.getIntersection(N)),S=m,L=p.getEdgeDistance(k,N),C=S+1;if(C<(this||_).pts.length){var R=(this||_).pts[C];T.equals2D(R)&&(S=C,L=0)}(this||_).eiList.add(T,S,L)}},{key:"toString",value:function(){var p=new Qt;p.append("edge "+(this||_)._name+": "),p.append("LINESTRING (");for(var m=0;m<(this||_).pts.length;m++)m>0&&p.append(","),p.append((this||_).pts[m].x+" "+(this||_).pts[m].y);return p.append(")  "+(this||_)._label+" "+(this||_)._depthDelta),p.toString()}},{key:"isPointwiseEqual",value:function(p){if((this||_).pts.length!==p.pts.length)return!1;for(var m=0;m<(this||_).pts.length;m++)if(!(this||_).pts[m].equals2D(p.pts[m]))return!1;return!0}},{key:"setDepthDelta",value:function(p){(this||_)._depthDelta=p}},{key:"getEdgeIntersectionList",value:function(){return(this||_).eiList}},{key:"addIntersections",value:function(_,p,m){for(var k=0;k<_.getIntersectionNum();k++)this.addIntersection(_,p,m,k)}}],[{key:"constructor_",value:function(){if((this||_).pts=null,(this||_)._env=null,(this||_).eiList=new $n(this||_),(this||_)._name=null,(this||_)._mce=null,(this||_)._isIsolated=!0,(this||_)._depth=new ri,(this||_)._depthDelta=0,1===arguments.length){var p=arguments[0];i.constructor_.call(this||_,p,null)}else if(2===arguments.length){var m=arguments[0],k=arguments[1];(this||_).pts=m,(this||_)._label=k}}},{key:"updateIM",value:function(){if(!(2===arguments.length&&arguments[1]instanceof ti&&arguments[0]instanceof Pe))return f(i,"updateIM",this||_).apply(this||_,arguments);var p=arguments[0],m=arguments[1];m.setAtLeastIfValid(p.getLocation(0,tt.ON),p.getLocation(1,tt.ON),1),p.isArea()&&(m.setAtLeastIfValid(p.getLocation(0,tt.LEFT),p.getLocation(1,tt.LEFT),2),m.setAtLeastIfValid(p.getLocation(0,tt.RIGHT),p.getLocation(1,tt.RIGHT),2))}}])}(qe),ai=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"setWorkingPrecisionModel",value:function(p){(this||_)._workingPrecisionModel=p}},{key:"insertUniqueEdge",value:function(p){var m=(this||_)._edgeList.findEqualEdge(p);if(null!==m){var k=m.getLabel(),N=p.getLabel();m.isPointwiseEqual(p)||(N=new Pe(p.getLabel())).flip(),k.merge(N);var T=t.depthDelta(N),S=m.getDepthDelta()+T;m.setDepthDelta(S)}else(this||_)._edgeList.add(p),p.setDepthDelta(t.depthDelta(p.getLabel()))}},{key:"buildSubgraphs",value:function(_,p){for(var m=new dt,k=_.iterator();k.hasNext();){var N=k.next(),T=N.getRightmostCoordinate(),S=new Dn(m).getDepth(T);N.computeDepth(S),N.findResultEdges(),m.add(N),p.add(N.getDirectedEdges(),N.getNodes())}}},{key:"createSubgraphs",value:function(_){for(var p=new dt,m=_.getNodes().iterator();m.hasNext();){var k=m.next();if(!k.isVisited()){var N=new pt;N.create(k),p.add(N)}}return on.sort(p,on.reverseOrder()),p}},{key:"createEmptyResultGeometry",value:function(){return(this||_)._geomFact.createPolygon()}},{key:"getNoder",value:function(p){if(null!==(this||_)._workingNoder)return(this||_)._workingNoder;var m=new Rn,k=new Oe;return k.setPrecisionModel(p),m.setSegmentIntersector(new Jn(k)),m}},{key:"buffer",value:function(p,m){var k=(this||_)._workingPrecisionModel;null===k&&(k=p.getPrecisionModel()),(this||_)._geomFact=p.getFactory();var N=new Pn(k,(this||_)._bufParams),T=new Xn(p,m,N).getCurves();if(T.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(T,k),(this||_)._graph=new $e(new Zn),(this||_)._graph.addEdges((this||_)._edgeList.getEdges());var S=this.createSubgraphs((this||_)._graph),L=new tn((this||_)._geomFact);this.buildSubgraphs(S,L);var C=L.getPolygons();return C.size()<=0?this.createEmptyResultGeometry():(this||_)._geomFact.buildGeometry(C)}},{key:"computeNodedEdges",value:function(_,p){var m=this.getNoder(p);m.computeNodes(_);for(var k=m.getNodedSubstrings().iterator();k.hasNext();){var N=k.next(),T=N.getCoordinates();if(2!==T.length||!T[0].equals2D(T[1])){var S=N.getData(),L=new si(N.getCoordinates(),new Pe(S));this.insertUniqueEdge(L)}}}},{key:"setNoder",value:function(p){(this||_)._workingNoder=p}}],[{key:"constructor_",value:function(){(this||_)._bufParams=null,(this||_)._workingPrecisionModel=null,(this||_)._workingNoder=null,(this||_)._geomFact=null,(this||_)._graph=null,(this||_)._edgeList=new Wn;var p=arguments[0];(this||_)._bufParams=p}},{key:"depthDelta",value:function(_){var p=_.getLocation(0,tt.LEFT),m=_.getLocation(0,tt.RIGHT);return p===Z.INTERIOR&&m===Z.EXTERIOR?1:p===Z.EXTERIOR&&m===Z.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(_){for(var p=new oe,m=new dt;_.hasNext();){var k=_.next(),N=p.createLineString(k.getCoordinates());m.add(N)}return p.buildGeometry(m)}}])}(),oi=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"rescale",value:function(){if(rt(arguments[0],j))for(var p=arguments[0].iterator();p.hasNext();){var m=p.next();this.rescale(m.getCoordinates())}else if(arguments[0]instanceof Array){for(var k=arguments[0],N=0;N<k.length;N++)k[N].x=k[N].x/(this||_)._scaleFactor+(this||_)._offsetX,k[N].y=k[N].y/(this||_)._scaleFactor+(this||_)._offsetY;2===k.length&&k[0].equals2D(k[1])&&kt.out.println(k)}}},{key:"scale",value:function(){if(rt(arguments[0],j)){for(var p=arguments[0],m=new dt(p.size()),k=p.iterator();k.hasNext();){var N=k.next();m.add(new En(this.scale(N.getCoordinates()),N.getData()))}return m}if(arguments[0]instanceof Array){for(var T=arguments[0],S=new Array(T.length).fill(null),L=0;L<T.length;L++)S[L]=new B(Math.round((T[L].x-(this||_)._offsetX)*(this||_)._scaleFactor),Math.round((T[L].y-(this||_)._offsetY)*(this||_)._scaleFactor),T[L].getZ());return Wt.removeRepeatedPoints(S)}}},{key:"isIntegerPrecision",value:function(){return 1===(this||_)._scaleFactor}},{key:"getNodedSubstrings",value:function(){var p=(this||_)._noder.getNodedSubstrings();return(this||_)._isScaled&&this.rescale(p),p}},{key:"computeNodes",value:function(p){var m=p;(this||_)._isScaled&&(m=this.scale(p)),(this||_)._noder.computeNodes(m)}},{key:"interfaces_",get:function(){return[Ln]}}],[{key:"constructor_",value:function(){if((this||_)._noder=null,(this||_)._scaleFactor=null,(this||_)._offsetX=null,(this||_)._offsetY=null,(this||_)._isScaled=!1,2===arguments.length){var p=arguments[0],m=arguments[1];t.constructor_.call(this||_,p,m,0,0)}else if(4===arguments.length){var k=arguments[0],N=arguments[1];(this||_)._noder=k,(this||_)._scaleFactor=N,(this||_)._isScaled=!this.isIntegerPrecision()}}}])}(),ui=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"checkEndPtVertexIntersections",value:function(){if(0===arguments.length)for(var p=(this||_)._segStrings.iterator();p.hasNext();){var m=p.next().getCoordinates();this.checkEndPtVertexIntersections(m[0],(this||_)._segStrings),this.checkEndPtVertexIntersections(m[m.length-1],(this||_)._segStrings)}else if(2===arguments.length)for(var k=arguments[0],N=arguments[1].iterator();N.hasNext();)for(var T=N.next().getCoordinates(),S=1;S<T.length-1;S++)if(T[S].equals(k))throw new F("found endpt/interior pt intersection at index "+S+" :pt "+k)}},{key:"checkInteriorIntersections",value:function(){if(0===arguments.length)for(var p=(this||_)._segStrings.iterator();p.hasNext();)for(var m=p.next(),k=(this||_)._segStrings.iterator();k.hasNext();){var N=k.next();this.checkInteriorIntersections(m,N)}else if(2===arguments.length)for(var T=arguments[0],S=arguments[1],L=T.getCoordinates(),C=S.getCoordinates(),R=0;R<L.length-1;R++)for(var w=0;w<C.length-1;w++)this.checkInteriorIntersections(T,R,S,w);else if(4===arguments.length){var O=arguments[0],b=arguments[1],M=arguments[2],D=arguments[3];if(O===M&&b===D)return null;var G=O.getCoordinates()[b],q=O.getCoordinates()[b+1],Y=M.getCoordinates()[D],X=M.getCoordinates()[D+1];if((this||_)._li.computeIntersection(G,q,Y,X),(this||_)._li.hasIntersection()&&((this||_)._li.isProper()||this.hasInteriorIntersection((this||_)._li,G,q)||this.hasInteriorIntersection((this||_)._li,Y,X)))throw new F("found non-noded intersection at "+G+"-"+q+" and "+Y+"-"+X)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(0===arguments.length)for(var p=(this||_)._segStrings.iterator();p.hasNext();){var m=p.next();this.checkCollapses(m)}else if(1===arguments.length)for(var k=arguments[0].getCoordinates(),N=0;N<k.length-2;N++)this.checkCollapse(k[N],k[N+1],k[N+2])}},{key:"hasInteriorIntersection",value:function(_,p,m){for(var k=0;k<_.getIntersectionNum();k++){var N=_.getIntersection(k);if(!N.equals(p)&&!N.equals(m))return!0}return!1}},{key:"checkCollapse",value:function(_,p,m){if(_.equals(m))throw new F("found non-noded collapse at "+t.fact.createLineString([_,p,m]))}}],[{key:"constructor_",value:function(){(this||_)._li=new Oe,(this||_)._segStrings=null;var p=arguments[0];(this||_)._segStrings=p}}])}();ui.fact=new oe;var li=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"intersectsScaled",value:function(p,m){var k=Math.min(p.x,m.x),N=Math.max(p.x,m.x),T=Math.min(p.y,m.y),S=Math.max(p.y,m.y),L=(this||_)._maxx<k||(this||_)._minx>N||(this||_)._maxy<T||(this||_)._miny>S;if(L)return!1;var C=this.intersectsToleranceSquare(p,m);return q.isTrue(!(L&&C),"Found bad envelope test"),C}},{key:"initCorners",value:function(p){var m=.5;(this||_)._minx=p.x-m,(this||_)._maxx=p.x+m,(this||_)._miny=p.y-m,(this||_)._maxy=p.y+m,(this||_)._corner[0]=new B((this||_)._maxx,(this||_)._maxy),(this||_)._corner[1]=new B((this||_)._minx,(this||_)._maxy),(this||_)._corner[2]=new B((this||_)._minx,(this||_)._miny),(this||_)._corner[3]=new B((this||_)._maxx,(this||_)._miny)}},{key:"intersects",value:function(p,m){return 1===(this||_)._scaleFactor?this.intersectsScaled(p,m):(this.copyScaled(p,(this||_)._p0Scaled),this.copyScaled(m,(this||_)._p1Scaled),this.intersectsScaled((this||_)._p0Scaled,(this||_)._p1Scaled))}},{key:"scale",value:function(p){return Math.round(p*(this||_)._scaleFactor)}},{key:"getCoordinate",value:function(){return(this||_)._originalPt}},{key:"copyScaled",value:function(_,p){p.x=this.scale(_.x),p.y=this.scale(_.y)}},{key:"getSafeEnvelope",value:function(){if(null===(this||_)._safeEnv){var p=t.SAFE_ENV_EXPANSION_FACTOR/(this||_)._scaleFactor;(this||_)._safeEnv=new V((this||_)._originalPt.x-p,(this||_)._originalPt.x+p,(this||_)._originalPt.y-p,(this||_)._originalPt.y+p)}return(this||_)._safeEnv}},{key:"intersectsPixelClosure",value:function(p,m){return(this||_)._li.computeIntersection(p,m,(this||_)._corner[0],(this||_)._corner[1]),!!(this||_)._li.hasIntersection()||((this||_)._li.computeIntersection(p,m,(this||_)._corner[1],(this||_)._corner[2]),!!(this||_)._li.hasIntersection()||((this||_)._li.computeIntersection(p,m,(this||_)._corner[2],(this||_)._corner[3]),!!(this||_)._li.hasIntersection()||((this||_)._li.computeIntersection(p,m,(this||_)._corner[3],(this||_)._corner[0]),!!(this||_)._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(p,m){var k=!1,N=!1;return(this||_)._li.computeIntersection(p,m,(this||_)._corner[0],(this||_)._corner[1]),!!(this||_)._li.isProper()||((this||_)._li.computeIntersection(p,m,(this||_)._corner[1],(this||_)._corner[2]),!!(this||_)._li.isProper()||((this||_)._li.hasIntersection()&&(k=!0),(this||_)._li.computeIntersection(p,m,(this||_)._corner[2],(this||_)._corner[3]),!!(this||_)._li.isProper()||((this||_)._li.hasIntersection()&&(N=!0),(this||_)._li.computeIntersection(p,m,(this||_)._corner[3],(this||_)._corner[0]),!!(this||_)._li.isProper()||!(!k||!N)||!!p.equals((this||_)._pt)||!!m.equals((this||_)._pt))))}},{key:"addSnappedNode",value:function(_,p){var m=_.getCoordinate(p),k=_.getCoordinate(p+1);return!!this.intersects(m,k)&&(_.addIntersection(this.getCoordinate(),p),!0)}}],[{key:"constructor_",value:function(){(this||_)._li=null,(this||_)._pt=null,(this||_)._originalPt=null,(this||_)._ptScaled=null,(this||_)._p0Scaled=null,(this||_)._p1Scaled=null,(this||_)._scaleFactor=null,(this||_)._minx=null,(this||_)._maxx=null,(this||_)._miny=null,(this||_)._maxy=null,(this||_)._corner=new Array(4).fill(null),(this||_)._safeEnv=null;var p=arguments[0],m=arguments[1],N=arguments[2];if((this||_)._originalPt=p,(this||_)._pt=p,(this||_)._scaleFactor=m,(this||_)._li=N,m<=0)throw new k("Scale factor must be non-zero");1!==m&&((this||_)._pt=new B(this.scale(p.x),this.scale(p.y)),(this||_)._p0Scaled=new B,(this||_)._p1Scaled=new B),this.initCorners((this||_)._pt)}}])}();li.SAFE_ENV_EXPANSION_FACTOR=.75;var hi=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"select",value:function(){if(1===arguments.length);else if(2===arguments.length){var p=arguments[1];arguments[0].getLineSegment(p,(this||_).selectedSegment),this.select((this||_).selectedSegment)}}}],[{key:"constructor_",value:function(){(this||_).selectedSegment=new In}}])}(),ci=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"snap",value:function(){if(1===arguments.length){var p=arguments[0];return this.snap(p,null,-1)}if(3===arguments.length){var m=arguments[0],k=arguments[1],N=arguments[2],T=m.getSafeEnvelope(),S=new fi(m,k,N);return(this||_)._index.query(T,new(function(){return s((function t(){n(this||_,t)}),[{key:"interfaces_",get:function(){return[hn]}},{key:"visitItem",value:function(_){_.select(T,S)}}])}())),S.isNodeAdded()}}}],[{key:"constructor_",value:function(){(this||_)._index=null;var p=arguments[0];(this||_)._index=p}}])}(),fi=function(p){function i(){var p;return n(this||_,i),p=e(this||_,i),i.constructor_.apply(p,arguments),p}return l(i,p),s(i,[{key:"isNodeAdded",value:function(){return(this||_)._isNodeAdded}},{key:"select",value:function(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof Tn))return f(i,"select",this||_,1).apply(this||_,arguments);var p=arguments[1],m=arguments[0].getContext();if((this||_)._parentEdge===m&&(p===(this||_)._hotPixelVertexIndex||p+1===(this||_)._hotPixelVertexIndex))return null;(this||_)._isNodeAdded|=(this||_)._hotPixel.addSnappedNode(m,p)}}],[{key:"constructor_",value:function(){(this||_)._hotPixel=null,(this||_)._parentEdge=null,(this||_)._hotPixelVertexIndex=null,(this||_)._isNodeAdded=!1;var p=arguments[0],m=arguments[1],k=arguments[2];(this||_)._hotPixel=p,(this||_)._parentEdge=m,(this||_)._hotPixelVertexIndex=k}}])}(hi);ci.HotPixelSnapAction=fi;var gi=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"processIntersections",value:function(p,m,k,N){if(p===k&&m===N)return null;var T=p.getCoordinates()[m],S=p.getCoordinates()[m+1],L=k.getCoordinates()[N],C=k.getCoordinates()[N+1];if((this||_)._li.computeIntersection(T,S,L,C),(this||_)._li.hasIntersection()&&(this||_)._li.isInteriorIntersection()){for(var R=0;R<(this||_)._li.getIntersectionNum();R++)(this||_)._interiorIntersections.add((this||_)._li.getIntersection(R));p.addIntersections((this||_)._li,m,0),k.addIntersections((this||_)._li,N,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return(this||_)._interiorIntersections}},{key:"interfaces_",get:function(){return[Kn]}}],[{key:"constructor_",value:function(){(this||_)._li=null,(this||_)._interiorIntersections=null;var p=arguments[0];(this||_)._li=p,(this||_)._interiorIntersections=new dt}}])}(),vi=function(){return s((function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}),[{key:"checkCorrectness",value:function(_){var p=En.getNodedSubstrings(_),k=new ui(p);try{k.checkValid()}catch(_){if(!(_ instanceof m))throw _;_.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return En.getNodedSubstrings((this||_)._nodedSegStrings)}},{key:"snapRound",value:function(_,p){var m=this.findInteriorIntersections(_,p);this.computeIntersectionSnaps(m),this.computeVertexSnaps(_)}},{key:"findInteriorIntersections",value:function(p,m){var k=new gi(m);return(this||_)._noder.setSegmentIntersector(k),(this||_)._noder.computeNodes(p),k.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(rt(arguments[0],j))for(var p=arguments[0].iterator();p.hasNext();){var m=p.next();this.computeVertexSnaps(m)}else if(arguments[0]instanceof En)for(var k=arguments[0],N=k.getCoordinates(),T=0;T<N.length;T++){var S=new li(N[T],(this||_)._scaleFactor,(this||_)._li);(this||_)._pointSnapper.snap(S,k,T)&&k.addIntersection(N[T],T)}}},{key:"computeNodes",value:function(p){(this||_)._nodedSegStrings=p,(this||_)._noder=new Rn,(this||_)._pointSnapper=new ci((this||_)._noder.getIndex()),this.snapRound(p,(this||_)._li)}},{key:"computeIntersectionSnaps",value:function(p){for(var m=p.iterator();m.hasNext();){var k=m.next(),N=new li(k,(this||_)._scaleFactor,(this||_)._li);(this||_)._pointSnapper.snap(N)}}},{key:"interfaces_",get:function(){return[Ln]}}],[{key:"constructor_",value:function(){(this||_)._pm=null,(this||_)._li=null,(this||_)._scaleFactor=null,(this||_)._noder=null,(this||_)._pointSnapper=null,(this||_)._nodedSegStrings=null;var p=arguments[0];(this||_)._pm=p,(this||_)._li=new Oe,(this||_)._li.setPrecisionModel(p),(this||_)._scaleFactor=p.getScale()}}])}(),yi=function(){function t(){n(this||_,t),t.constructor_.apply(this||_,arguments)}return s(t,[{key:"bufferFixedPrecision",value:function(p){var m=new oi(new vi(new re(1)),p.getScale()),k=new ai((this||_)._bufParams);k.setWorkingPrecisionModel(p),k.setNoder(m),(this||_)._resultGeometry=k.buffer((this||_)._argGeom,(this||_)._distance)}},{key:"bufferReducedPrecision",value:function(){if(0===arguments.length){for(var p=t.MAX_PRECISION_DIGITS;p>=0;p--){try{this.bufferReducedPrecision(p)}catch(p){if(!(p instanceof vt))throw p;(this||_)._saveException=p}if(null!==(this||_)._resultGeometry)return null}throw(this||_)._saveException}if(1===arguments.length){var m=arguments[0],k=t.precisionScaleFactor((this||_)._argGeom,(this||_)._distance,m),N=new re(k);this.bufferFixedPrecision(N)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==(this||_)._resultGeometry)return null;var p=(this||_)._argGeom.getFactory().getPrecisionModel();p.getType()===re.FIXED?this.bufferFixedPrecision(p):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(p){(this||_)._bufParams.setQuadrantSegments(p)}},{key:"bufferOriginalPrecision",value:function(){try{var p=new ai((this||_)._bufParams);(this||_)._resultGeometry=p.buffer((this||_)._argGeom,(this||_)._distance)}catch(p){if(!(p instanceof F))throw p;(this||_)._saveException=p}}},{key:"getResultGeometry",value:function(p){return(this||_)._distance=p,this.computeGeometry(),(this||_)._resultGeometry}},{key:"setEndCapStyle",value:function(p){(this||_)._bufParams.setEndCapStyle(p)}}],[{key:"constructor_",value:function(){if((this||_)._argGeom=null,(this||_)._distance=null,(this||_)._bufParams=new p,(this||_)._resultGeometry=null,(this||_)._saveException=null,1===arguments.length){var m=arguments[0];(this||_)._argGeom=m}else if(2===arguments.length){var k=arguments[0],N=arguments[1];(this||_)._argGeom=k,(this||_)._bufParams=N}}},{key:"bufferOp",value:function(){if(2===arguments.length){var _=arguments[1];return new t(arguments[0]).getResultGeometry(_)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof H&&"number"==typeof arguments[1]){var m=arguments[1],k=arguments[2],N=new t(arguments[0]);return N.setQuadrantSegments(k),N.getResultGeometry(m)}if(arguments[2]instanceof p&&arguments[0]instanceof H&&"number"==typeof arguments[1]){var T=arguments[1];return new t(arguments[0],arguments[2]).getResultGeometry(T)}}else if(4===arguments.length){var S=arguments[1],L=arguments[2],C=arguments[3],R=new t(arguments[0]);return R.setQuadrantSegments(L),R.setEndCapStyle(C),R.getResultGeometry(S)}}},{key:"precisionScaleFactor",value:function(_,p,m){var k=_.getEnvelopeInternal(),N=xt.max(Math.abs(k.getMaxX()),Math.abs(k.getMaxY()),Math.abs(k.getMinX()),Math.abs(k.getMinY()))+2*(p>0?p:0),T=m-Math.trunc(Math.log(N)/Math.log(10)+1);return Math.pow(10,T)}}])}();yi.CAP_ROUND=p.CAP_ROUND,yi.CAP_BUTT=p.CAP_FLAT,yi.CAP_FLAT=p.CAP_FLAT,yi.CAP_SQUARE=p.CAP_SQUARE,yi.MAX_PRECISION_DIGITS=12;var di=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],_i=function(){return s((function t(p){n(this||_,t),(this||_).geometryFactory=p||new oe}),[{key:"read",value:function(p){var m,k=(m="string"==typeof p?JSON.parse(p):p).type;if(!pi[k])throw new Error("Unknown GeoJSON type: "+m.type);return-1!==di.indexOf(k)?pi[k].call(this||_,m.coordinates):"GeometryCollection"===k?pi[k].call(this||_,m.geometries):pi[k].call(this||_,m)}},{key:"write",value:function(p){var m=p.getGeometryType();if(!mi[m])throw new Error("Geometry is not supported");return mi[m].call(this||_,p)}}])}(),pi={Feature:function(p){var m={};for(var k in p)m[k]=p[k];if(p.geometry){var N=p.geometry.type;if(!pi[N])throw new Error("Unknown GeoJSON type: "+p.type);m.geometry=this.read(p.geometry)}return p.bbox&&(m.bbox=pi.bbox.call(this||_,p.bbox)),m},FeatureCollection:function(p){var m={};if(p.features){m.features=[];for(var k=0;k<p.features.length;++k)m.features.push(this.read(p.features[k]))}return p.bbox&&(m.bbox=(this||_).parse.bbox.call(this||_,p.bbox)),m},coordinates:function(_){for(var p=[],m=0;m<_.length;++m){var k=_[m];p.push(i(B,g(k)))}return p},bbox:function(p){return(this||_).geometryFactory.createLinearRing([new B(p[0],p[1]),new B(p[2],p[1]),new B(p[2],p[3]),new B(p[0],p[3]),new B(p[0],p[1])])},Point:function(p){var m=i(B,g(p));return(this||_).geometryFactory.createPoint(m)},MultiPoint:function(p){for(var m=[],k=0;k<p.length;++k)m.push(pi.Point.call(this||_,p[k]));return(this||_).geometryFactory.createMultiPoint(m)},LineString:function(p){var m=pi.coordinates.call(this||_,p);return(this||_).geometryFactory.createLineString(m)},MultiLineString:function(p){for(var m=[],k=0;k<p.length;++k)m.push(pi.LineString.call(this||_,p[k]));return(this||_).geometryFactory.createMultiLineString(m)},Polygon:function(p){for(var m=pi.coordinates.call(this||_,p[0]),k=(this||_).geometryFactory.createLinearRing(m),N=[],T=1;T<p.length;++T){var S=p[T],L=pi.coordinates.call(this||_,S),C=(this||_).geometryFactory.createLinearRing(L);N.push(C)}return(this||_).geometryFactory.createPolygon(k,N)},MultiPolygon:function(p){for(var m=[],k=0;k<p.length;++k){var N=p[k];m.push(pi.Polygon.call(this||_,N))}return(this||_).geometryFactory.createMultiPolygon(m)},GeometryCollection:function(p){for(var m=[],k=0;k<p.length;++k){var N=p[k];m.push(this.read(N))}return(this||_).geometryFactory.createGeometryCollection(m)}},mi={coordinate:function(_){var p=[_.x,_.y];return _.z&&p.push(_.z),_.m&&p.push(_.m),p},Point:function(p){return{type:"Point",coordinates:mi.coordinate.call(this||_,p.getCoordinate())}},MultiPoint:function(p){for(var m=[],k=0;k<p._geometries.length;++k){var N=p._geometries[k],T=mi.Point.call(this||_,N);m.push(T.coordinates)}return{type:"MultiPoint",coordinates:m}},LineString:function(p){for(var m=[],k=p.getCoordinates(),N=0;N<k.length;++N){var T=k[N];m.push(mi.coordinate.call(this||_,T))}return{type:"LineString",coordinates:m}},MultiLineString:function(p){for(var m=[],k=0;k<p._geometries.length;++k){var N=p._geometries[k],T=mi.LineString.call(this||_,N);m.push(T.coordinates)}return{type:"MultiLineString",coordinates:m}},Polygon:function(p){var m=[],k=mi.LineString.call(this||_,p._shell);m.push(k.coordinates);for(var N=0;N<p._holes.length;++N){var T=p._holes[N],S=mi.LineString.call(this||_,T);m.push(S.coordinates)}return{type:"Polygon",coordinates:m}},MultiPolygon:function(p){for(var m=[],k=0;k<p._geometries.length;++k){var N=p._geometries[k],T=mi.Polygon.call(this||_,N);m.push(T.coordinates)}return{type:"MultiPolygon",coordinates:m}},GeometryCollection:function(p){for(var m=[],k=0;k<p._geometries.length;++k){var N=p._geometries[k],T=N.getGeometryType();m.push(mi[T].call(this||_,N))}return{type:"GeometryCollection",geometries:m}}};return{BufferOp:yi,GeoJSONReader:function(){return s((function t(p){n(this||_,t),(this||_).parser=new _i(p||new oe)}),[{key:"read",value:function(p){return(this||_).parser.read(p)}}])}(),GeoJSONWriter:function(){return s((function t(){n(this||_,t),(this||_).parser=new _i((this||_).geometryFactory)}),[{key:"write",value:function(p){return(this||_).parser.write(p)}}])}()}}));var m=p;export{m as default};

