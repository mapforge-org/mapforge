import{center as r}from"@turf/center";import e from"@turf/jsts";import{featureEach as t,geomEach as o}from"@turf/meta";import{geoAzimuthalEquidistant as n}from"d3-geo";import{featureCollection as i,radiansToLength as a,lengthToRadians as u,feature as f,earthRadius as s}from"@turf/helpers";var{BufferOp:p,GeoJSONReader:c,GeoJSONWriter:m}=e;function v(r,e,n){n=n||{};var a=n.units||"kilometers";var u=n.steps||8;if(!r)throw new Error("geojson is required");if(typeof n!=="object")throw new Error("options must be an object");if(typeof u!=="number")throw new Error("steps must be an number");if(e===void 0)throw new Error("radius is required");if(u<=0)throw new Error("steps must be greater than 0");var f=[];switch(r.type){case"GeometryCollection":o(r,(function(r){var t=y(r,e,a,u);t&&f.push(t)}));return i(f);case"FeatureCollection":t(r,(function(r){var o=y(r,e,a,u);o&&t(o,(function(r){r&&f.push(r)}))}));return i(f)}return y(r,e,a,u)}function y(r,e,t,n){var s=r.properties||{};var v=r.type==="Feature"?r.geometry:r;if(v.type==="GeometryCollection"){var l=[];o(r,(function(r){var o=y(r,e,t,n);o&&l.push(o)}));return i(l)}var j=b(v);var g={type:v.type,coordinates:w(v.coordinates,j)};var E=new c;var G=E.read(g);var N=a(u(e,t),"meters");var O=p.bufferOp(G,N,n);var C=new m;O=C.write(O);if(!d(O.coordinates)){var q={type:O.type,coordinates:h(O.coordinates,j)};return f(q,s)}}function d(r){return Array.isArray(r[0])?d(r[0]):isNaN(r[0])}function w(r,e){return typeof r[0]!=="object"?e(r):r.map((function(r){return w(r,e)}))}function h(r,e){return typeof r[0]!=="object"?e.invert(r):r.map((function(r){return h(r,e)}))}function b(e){var t=r(e).geometry.coordinates;var o=[-t[0],-t[1]];return n().rotate(o).scale(s)}var l=v;export{v as buffer,l as default};

