let e=class DataView{constructor(e){if(t(e))throw new Error("DataView: Passed buffer type is unsupported.");this.buffer=e;this.byteLength=this.buffer.length}getUint8(e){return this.buffer.readUInt8(e)}getUint16(e,t){return t?this.buffer.readUInt16LE(e):this.buffer.readUInt16BE(e)}getUint32(e,t){return t?this.buffer.readUInt32LE(e):this.buffer.readUInt32BE(e)}getInt32(e,t){return t?this.buffer.readInt32LE(e):this.buffer.readInt32BE(e)}};function t(e){return typeof e!=="object"||e.length===void 0||e.readUInt8===void 0||e.readUInt16LE===void 0||e.readUInt16BE===void 0||e.readUInt32LE===void 0||e.readUInt32BE===void 0||e.readInt32LE===void 0||e.readInt32BE===void 0}function n(t,n,r){try{return new DataView(t,n,r)}catch(i){return new e(t,n,r)}}function r(e,t,n){const r=[];for(let i=0;i<n&&t+i<e.byteLength;i++)r.push(e.getUint8(t+i));return a(r)}function i(e,t){const n=[];let r=0;while(t+r<e.byteLength){const i=e.getUint8(t+r);if(i===0)break;n.push(i);r++}return a(n)}function o(e,t,n){const r=[];for(let i=0;i<n&&t+i<e.byteLength;i+=2)r.push(e.getUint16(t+i));r[r.length-1]===0&&r.pop();return a(r)}function s(e,t){const n=e.getUint8(t);const i=r(e,t+1,n);return[n,i]}function a(e){return e.map((e=>String.fromCharCode(e))).join("")}function c(){for(let e=1;e<arguments.length;e++)for(const t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}function u(e,t,n){let r=false;Object.defineProperty(e,t,{get(){if(!r){r=true;Object.defineProperty(e,t,{configurable:true,enumerable:true,value:n.apply(e),writable:true})}return e[t]},configurable:true,enumerable:true})}function f(e){return typeof btoa!=="undefined"?typeof e==="string"?btoa(e):btoa(Array.prototype.reduce.call(new Uint8Array(e),((e,t)=>e+String.fromCharCode(t)),"")):typeof Buffer!=="undefined"?typeof Buffer.from!=="undefined"?Buffer.from(e).toString("base64"):new Buffer(e).toString("base64"):void 0}function l(e){const t=e.substring(e.indexOf(",")+1);if(e.indexOf(";base64")!==-1){if(typeof atob!=="undefined")return Uint8Array.from(atob(t),(e=>e.charCodeAt(0))).buffer;if(typeof Buffer==="undefined")return;return typeof Buffer.from!=="undefined"?Buffer.from(t,"base64"):new Buffer(t,"base64")}const n=decodeURIComponent(t);return typeof Buffer!=="undefined"?typeof Buffer.from!=="undefined"?Buffer.from(n):new Buffer(n):Uint8Array.from(n,(e=>e.charCodeAt(0))).buffer}function d(e,t,n){const r=g(n,t-e.length);return r+e}function p(e,t){return parseInt(e.replace(".",""),t)/Math.pow(t,(e.split(".")[1]||"").length)}function g(e,t){return new Array(t+1).join(e)}const m=void 0;const h=0;function S(e,t,n,r="string"){if(t===h&&typeof DecompressionStream==="function"){const t=new DecompressionStream("deflate");const i=new Blob([e]).stream().pipeThrough(t);return r==="dataview"?new Response(i).arrayBuffer().then((e=>new DataView(e))):new Response(i).arrayBuffer().then((e=>new TextDecoder(n).decode(e)))}return t!==void 0?Promise.reject(`Unknown compression method ${t}.`):e}var I={USE_FILE:true,USE_JFIF:true,USE_PNG_FILE:true,USE_EXIF:true,USE_IPTC:true,USE_XMP:true,USE_ICC:true,USE_MPF:true,USE_PHOTOSHOP:true,USE_THUMBNAIL:true,USE_TIFF:true,USE_JPEG:true,USE_PNG:true,USE_HEIC:true,USE_AVIF:true,USE_WEBP:true,USE_GIF:true,USE_MAKER_NOTES:true};function y(e){return e.map((e=>String.fromCharCode(e))).join("")}function v(e){if(e.length>=8){const t=y(e.slice(0,8));if(t==="ASCII\0\0\0")return y(e.slice(8));if(t==="JIS\0\0\0\0\0")return"[JIS encoded text]";if(t==="UNICODE\0")return"[Unicode encoded text]";if(t==="\0\0\0\0\0\0\0\0")return"[Undefined encoding]"}return"Undefined"}function C(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}const U=18761;const E=19789;var b={BIG_ENDIAN:E,LITTLE_ENDIAN:U,getByteOrder:P};function P(e,t){if(e.getUint16(t)===U)return U;if(e.getUint16(t)===E)return E;throw new Error("Illegal byte order value. Faulty image.")}var A={isTiffFile:T,findTiffOffsets:x};function T(e){const t=4;return!!e&&e.byteLength>=t&&w(e)}function w(e){const t=42;const n=2;const r=e.getUint16(0)===b.LITTLE_ENDIAN;return e.getUint16(n,r)===t}function x(){const e=0;return I.USE_EXIF?{hasAppMarkers:true,tiffHeaderOffset:e}:{}}var F={isJpegFile:le,findJpegOffsets:de};const L=2;const M=65496;const _=2;const N=4;const O=2;const D=2;const R=10;const k=18;const B=33;const G=79;const H=18;const z=8;const $="ICC_PROFILE\0";const j=N+$.length;const V=j+1;const W="MPF\0";const X=65472;const J=65474;const K=65476;const Y=65499;const q=65501;const Z=65498;const Q=65504;const ee=65505;const te=65506;const ne=65517;const re=65519;const ie=65534;const oe=65535;const se="JFIF";const ae="Exif";const ce="http://ns.adobe.com/xap/1.0/\0";const ue="http://ns.adobe.com/xmp/extension/\0";const fe="Photoshop 3.0";function le(e){return!!e&&e.byteLength>=L&&e.getUint16(0)===M}function de(e){let t=_;let n;let r;let i;let o;let s;let a;let c;let u;let f;while(t+N+5<=e.byteLength){if(I.USE_FILE&&pe(e,t)){n=e.getUint16(t+O);r=t+O}else if(I.USE_FILE&&ge(e,t)){n=e.getUint16(t+O);i=t+O}else if(I.USE_JFIF&&Se(e,t)){n=e.getUint16(t+O);o=t+D}else if(I.USE_EXIF&&Ie(e,t)){n=e.getUint16(t+O);s=t+R}else if(I.USE_XMP&&ye(e,t)){c||(c=[]);n=e.getUint16(t+O);c.push(Ee(t,n))}else if(I.USE_XMP&&Ce(e,t)){c||(c=[]);n=e.getUint16(t+O);c.push(be(t,n))}else if(I.USE_IPTC&&Pe(e,t)){n=e.getUint16(t+O);a=t+k}else if(I.USE_ICC&&me(e,t)){n=e.getUint16(t+O);const r=t+H;const i=n-(H-O);const o=e.getUint8(t+j);const s=e.getUint8(t+V);u||(u=[]);u.push({offset:r,length:i,chunkNumber:o,chunksTotal:s})}else if(I.USE_MPF&&he(e,t)){n=e.getUint16(t+O);f=t+z}else{if(!Ae(e,t)){if(Te(e,t)){t++;continue}break}n=e.getUint16(t+O)}t+=O+n}return{hasAppMarkers:t>_,fileDataOffset:r||i,jfifDataOffset:o,tiffHeaderOffset:s,iptcDataOffset:a,xmpChunks:c,iccChunks:u,mpfDataOffset:f}}function pe(e,t){return e.getUint16(t)===X}function ge(e,t){return e.getUint16(t)===J}function me(e,t){const n=$.length;return e.getUint16(t)===te&&r(e,t+N,n)===$}function he(e,t){const n=W.length;return e.getUint16(t)===te&&r(e,t+N,n)===W}function Se(e,t){const n=se.length;return e.getUint16(t)===Q&&r(e,t+N,n)===se&&e.getUint8(t+N+n)===0}function Ie(e,t){const n=ae.length;return e.getUint16(t)===ee&&r(e,t+N,n)===ae&&e.getUint8(t+N+n)===0}function ye(e,t){return e.getUint16(t)===ee&&ve(e,t)}function ve(e,t){const n=ce.length;return r(e,t+N,n)===ce}function Ce(e,t){return e.getUint16(t)===ee&&Ue(e,t)}function Ue(e,t){const n=ue.length;return r(e,t+N,n)===ue}function Ee(e,t){return{dataOffset:e+B,length:t-(B-O)}}function be(e,t){return{dataOffset:e+G,length:t-(G-O)}}function Pe(e,t){const n=fe.length;return e.getUint16(t)===ne&&r(e,t+N,n)===fe&&e.getUint8(t+N+n)===0}function Ae(e,t){const n=e.getUint16(t);return n>=Q&&n<=re||n===ie||n===X||n===J||n===K||n===Y||n===q||n===Z}function Te(e,t){return e.getUint16(t)===oe}var we={isPngFile:$e,findPngOffsets:je};const xe="Â‰PNG\r\n\n";const Fe=4;const Le=4;const Me=0;const _e=Fe;const Ne=Fe+Le;const Oe="XML:com.adobe.xmp\0";const De="tEXt";const Re="iTXt";const ke="zTXt";const Be="pHYs";const Ge="tIME";const He="eXIf";const ze="iCCP";function $e(e){return!!e&&r(e,0,xe.length)===xe}function je(e,t){const n=4;const i={hasAppMarkers:false};let o=xe.length;while(o+Fe+Le<=e.byteLength){if(I.USE_PNG_FILE&&Ve(e,o)){i.hasAppMarkers=true;i.pngHeaderOffset=o+Ne}else if(I.USE_XMP&&We(e,o)){const t=qe(e,o);if(t!==void 0){i.hasAppMarkers=true;i.xmpChunks=[{dataOffset:t,length:e.getUint32(o+Me)-(t-(o+Ne))}]}}else if(Xe(e,o,t)){i.hasAppMarkers=true;const t=r(e,o+_e,Le);i.pngTextChunks||(i.pngTextChunks=[]);i.pngTextChunks.push({length:e.getUint32(o+Me),type:t,offset:o+Ne})}else if(Je(e,o)){i.hasAppMarkers=true;i.tiffHeaderOffset=o+Ne}else if(I.USE_ICC&&t&&Ke(e,o)){i.hasAppMarkers=true;const t=e.getUint32(o+Me);const n=o+Ne;const{profileName:r,compressionMethod:s,compressedProfileOffset:a}=Ze(e,n);i.iccChunks||(i.iccChunks=[]);i.iccChunks.push({offset:a,length:t-(a-n),chunkNumber:1,chunksTotal:1,profileName:r,compressionMethod:s})}else if(Ye(e,o)){i.hasAppMarkers=true;i.pngChunkOffsets||(i.pngChunkOffsets=[]);i.pngChunkOffsets.push(o+Me)}o+=e.getUint32(o+Me)+Fe+Le+n}return i}function Ve(e,t){const n="IHDR";return r(e,t+_e,Le)===n}function We(e,t){return r(e,t+_e,Le)===Re&&r(e,t+Ne,Oe.length)===Oe}function Xe(e,t,n){const i=r(e,t+_e,Le);return i===De||i===Re||i===ke&&n}function Je(e,t){return r(e,t+_e,Le)===He}function Ke(e,t){return r(e,t+_e,Le)===ze}function Ye(e,t){const n=[Be,Ge];const i=r(e,t+_e,Le);return n.includes(i)}function qe(e,t){const n=1;const r=1;t+=Ne+Oe.length+n+r;let i=0;while(i<2&&t<e.byteLength){e.getUint8(t)===0&&i++;t++}if(!(i<2))return t}function Ze(e,t){const n=1;const r=1;const o=i(e,t);t+=o.length+n;const s=e.getUint8(t);t+=r;return{profileName:o,compressionMethod:s,compressedProfileOffset:t}}function Qe(e,t){return e.getUint32(t+4)}function et(e,t,n,r){const i=3;const{offsets:o,sizes:s}=tt(t,n+i);const a=e.getUint8(o.offsetSize)>>4;s.item.extent.extentOffset=a;const c=e.getUint8(o.lengthSize)&15;s.item.extent.extentLength=c;const u=e.getUint8(o.baseOffsetSize)>>4;s.item.baseOffset=u;const f=nt(e,o.indexSize,t);s.item.extent.extentIndex=f!==void 0?f:0;const l=rt(e,o.itemCount,t);return{type:"iloc",items:it(e,t,o,s,a,c,f,l),length:r}}function tt(e,t){const n={item:{dataReferenceIndex:2,extentCount:2,extent:{}}};if(e<2){n.itemCount=2;n.item.itemId=2}else if(e===2){n.itemCount=4;n.item.itemId=4}n.item.constructionMethod=e===1||e===2?2:0;const r={offsetSize:t,lengthSize:t,baseOffsetSize:t+1,indexSize:t+1};r.itemCount=t+2;r.items=r.itemCount+n.itemCount;r.item={itemId:0};r.item.constructionMethod=r.item.itemId+n.item.itemId;r.item.dataReferenceIndex=r.item.constructionMethod+n.item.constructionMethod;return{offsets:r,sizes:n}}function nt(e,t,n){if(n===1||n===2)return e.getUint8(t)&15}function rt(e,t,n){return n<2?e.getUint16(t):n===2?e.getUint32(t):void 0}function it(e,t,n,r,i,o,s,a){if(a===void 0)return[];const c=[];let u=n.items;for(let n=0;n<a;n++){const n={extents:[]};n.itemId=ot(e,u,t);u+=r.item.itemId;n.constructionMethod=t===1||t===2?e.getUint16(u)&15:void 0;u+=r.item.constructionMethod;n.dataReferenceIndex=e.getUint16(u);u+=r.item.dataReferenceIndex;n.baseOffset=at(e,u,r.item.baseOffset);u+=r.item.baseOffset;n.extentCount=e.getUint16(u);u+=r.item.extentCount;for(let a=0;a<n.extentCount;a++){const a={};a.extentIndex=st(e,t,u,s);u+=r.item.extent.extentIndex;a.extentOffset=at(e,u,i);u+=r.item.extent.extentOffset;a.extentLength=at(e,u,o);u+=r.item.extent.extentLength;n.extents.push(a)}c.push(n)}return c}function ot(e,t,n){return n<2?e.getUint16(t):n===2?e.getUint32(t):void 0}function st(e,t,n,r){if((t===1||t===2)&&r>0)return at(e,n,r)}function at(e,t,n){if(n===4)return e.getUint32(t);if(n===8){console.warn("This file uses an 8-bit offset which is currently not supported by ExifReader. Contact the maintainer to get it fixed.");return Qe(e,t)}return 0}const ct=1718909296;const ut=1768977008;const ft=1835365473;const lt=1768714083;const dt=1768517222;const pt=1768842853;const gt=1768973167;const mt=1668246642;const ht=1165519206;const St=1835625829;const It=1970432288;
/**
 * Parses a ISO-BMFF box from the provided data view starting at the given offset.
 *
 * @param {DataView} dataView - The DataView to parse.
 * @param {number} offset - The offset at which to start parsing.
 * @returns {Object} The parsed box.
 */function yt(e,t){const n=4;const r=8;const i=1;const{length:o,contentOffset:s}=vt(e,t);if(o<r)return;const a=e.getUint32(t+n);if(a===ct)return _t(e,s,o);if(a===ut)return Nt(e,t,s,o);if(a===gt)return Ot(e,t,s,o);if(a===mt)return Dt(e,s,o);const c=e.getUint8(s);return a===ft?kt(e,t,s+i,o):a===lt?et(e,c,s+i,o):a===dt?Gt(e,t,c,s+i,o):a===pt?zt(e,t,c,s+i,o):{type:void 0,length:o}}
/**
 * @typedef {Object} BoxLength
 * @property {number} length The length of the box including length and type.
 * @property {number} contentOffset
 */
/**
 * @param {DataView} dataView
 * @param {number} offset
 * @returns {BoxLength}
 */function vt(e,t){const n=4;const r=4;const i=8;const o=12;const s=e.getUint32(t);return Ct(s)?{length:e.byteLength-t,contentOffset:t+n+r}:Ut(s)&&Et(e,t)?{length:e.getUint32(t+o),contentOffset:t+n+r+i}:{length:s,contentOffset:t+n+r}}function Ct(e){return e===0}function Ut(e){return e===1}function Et(e,t){const n=8;return e.getUint32(t+n)===0}
/**
 * @typedef {Object} Offsets
 * @property {number} tiffHeaderOffset
 * @property {Array<Object>} xmpChunks
 * @property {Array<Object>} iccChunks
 * @property {boolean} hasAppMarkers
 */
/**
 * Finds the offsets of ISO-BMFF-structued data in the provided data view.
 *
 * @param {DataView} dataView - The data view to find offsets in.
 * @returns {Offsets} An object containing the offsets of the TIFF header, XMP chunks, ICC chunks, and a boolean indicating if any of these exist.
 */function bt(e){if(I.USE_EXIF||I.USE_XMP||I.USE_ICC){const t={};const n=Pt(e);if(!n)return{hasAppMarkers:false};I.USE_EXIF&&(t.tiffHeaderOffset=At(e,n));I.USE_XMP&&(t.xmpChunks=Ft(n));I.USE_ICC&&(t.iccChunks=Mt(n));t.hasAppMarkers=t.tiffHeaderOffset!==void 0||t.xmpChunks!==void 0||t.iccChunks!==void 0;return t}return{}}function Pt(e){const t=4;const n=4;let r=0;while(r+t+n<=e.byteLength){const t=yt(e,r);if(t===void 0)break;if(t.type==="meta")return t;r+=t.length}}function At(e,t){try{const n=Tt(t).itemId;const r=wt(t,n);const i=r.baseOffset+r.extents[0].extentOffset;return xt(e,i)}catch(e){return}}function Tt(e){return e.subBoxes.find((e=>e.type==="iinf")).itemInfos.find((e=>e.itemType===ht))}function wt(e,t){return e.subBoxes.find((e=>e.type==="iloc")).items.find((e=>e.itemId===t))}function xt(e,t){const n=4;return t+n+e.getUint32(t)}function Ft(e){try{const t=Lt(e).itemId;const n=wt(e,t);const r=wt(e,t).extents[0];return[{dataOffset:n.baseOffset+r.extentOffset,length:r.extentLength}]}catch(e){return}}function Lt(e){return e.subBoxes.find((e=>e.type==="iinf")).itemInfos.find((e=>e.itemType===St&&e.contentType==="application/rdf+xml"))}function Mt(e){try{const t=e.subBoxes.find((e=>e.type==="iprp")).subBoxes.find((e=>e.type==="ipco")).properties.find((e=>e.type==="colr")).icc;if(t)return[t]}catch(e){}}function _t(e,t,n){const i=4;const o=r(e,t,i);return{type:"ftyp",majorBrand:o,length:n}}function Nt(e,t,n,r){return{type:"iprp",subBoxes:Bt(e,n,r-(n-t)),length:r}}function Ot(e,t,n,r){return{type:"ipco",properties:Bt(e,n,r-(n-t)),length:r}}function Dt(e,t,n){return{type:"colr",icc:Rt(e,t),length:n}}function Rt(e,t){const n=4;const i=r(e,t,n);if(i==="prof"||i==="rICC")return{offset:t+n,length:e.getUint32(t+n),chunkNumber:1,chunksTotal:1}}function kt(e,t,n,r){const i=3;return{type:"meta",subBoxes:Bt(e,n+i,r-(n+i-t)),length:r}}
/**
 * @param {DataView} dataView
 * @param {number} offset The offset to start parsing from.
 * @param {number} length The length of all sub boxes combined.
 * @return {Array<Object>}
 */function Bt(e,t,n){const r=[ht,St];const i=[];let o=t;while(o<t+n){const t=yt(e,o);if(t===void 0)break;t.type===void 0||t.itemType!==void 0&&r.indexOf(t.itemType)===-1||i.push(t);o+=t.length}return i}function Gt(e,t,n,r,i){const{offsets:o}=Ht(n,r);return{type:"iinf",itemInfos:Bt(e,o.itemInfos,i-(o.itemInfos-t)),length:i}}function Ht(e,t){const n=3;const r={entryCount:t+n};const i={};i.entryCount=e===0?2:4;r.itemInfos=r.entryCount+i.entryCount;return{offsets:r}}function zt(e,t,n,r,o){const s=3;r+=s;const a={type:"infe",length:o};if(n===0||n===1){a.itemId=e.getUint16(r);r+=2;a.itemProtectionIndex=e.getUint16(r);r+=2;a.itemName=i(e,r);r+=a.itemName.length+1}if(n>=2){if(n===2){a.itemId=e.getUint16(r);r+=2}else if(n===3){a.itemId=e.getUint32(r);r+=4}a.itemProtectionIndex=e.getUint16(r);r+=2;a.itemType=e.getUint32(r);r+=4;a.itemName=i(e,r);r+=a.itemName.length+1;if(a.itemType===St){a.contentType=i(e,r);r+=a.contentType.length+1;if(t+o>r){a.contentEncoding=i(e,r);r+=a.contentEncoding.length+1}}else if(a.itemType===It){a.itemUri=i(e,r);r+=a.itemUri.length+1}}return a}var $t={isHeicFile:jt,findHeicOffsets:Vt};
/**
 * Checks if the provided data view represents a HEIC/HEIF file.
 *
 * @param {DataView} dataView - The data view to check.
 * @returns {boolean} True if the data view represents a HEIC/HEIF file, false otherwise.
 */function jt(e){if(!e)return false;const t=["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"];try{const n=yt(e,0);return n&&t.indexOf(n.majorBrand)!==-1}catch(e){return false}}
/**
 * Finds the offsets of a HEIC file in the provided data view.
 *
 * @param {DataView} dataView - The data view to find offsets in.
 * @returns {Object} An object containing the offsets of the TIFF header, XMP chunks, ICC chunks, and a boolean indicating if any of these exist.
 */function Vt(e){return bt(e)}var Wt={isAvifFile:Xt,findAvifOffsets:Jt};
/**
 * Checks if the provided data view represents an AVIF file.
 *
 * @param {DataView} dataView - The data view to check.
 * @returns {boolean} True if the data view represents an AVIF file, false otherwise.
 */function Xt(e){if(!e)return false;try{const t=yt(e,0);return t&&t.majorBrand==="avif"}catch(e){return false}}
/**
 * Finds the offsets of an AVIF file in the provided data view.
 *
 * @param {DataView} dataView - The data view to find offsets in.
 * @returns {Object} An object containing the offsets of the TIFF header, XMP chunks, ICC chunks, and a boolean indicating if any of these exist.
 */function Jt(e){return bt(e)}var Kt={isWebpFile:Yt,findOffsets:qt};function Yt(e){const t=0;const n="RIFF";const i=8;const o="WEBP";return!!e&&r(e,t,n.length)===n&&r(e,i,o.length)===o}function qt(e){const t=12;const n=4;const i="Exif\0\0";const o=8;let s=t;let a=false;let c;let u;let f;let l;while(s+o<e.byteLength){const t=r(e,s,4);const d=e.getUint32(s+n,true);if(I.USE_EXIF&&t==="EXIF"){a=true;c=r(e,s+o,i.length)===i?s+o+i.length:s+o}else if(I.USE_XMP&&t==="XMP "){a=true;u=[{dataOffset:s+o,length:d}]}else if(I.USE_ICC&&t==="ICCP"){a=true;f=[{offset:s+o,length:d,chunkNumber:1,chunksTotal:1}]}else if(t==="VP8X"){a=true;l=s+o}s+=o+(d%2===0?d:d+1)}return{hasAppMarkers:a,tiffHeaderOffset:c,xmpChunks:u,iccChunks:f,vp8xChunkOffset:l}}var Zt={isGifFile:tn,findOffsets:nn};const Qt=6;const en=["GIF87a","GIF89a"];function tn(e){return!!e&&en.includes(r(e,0,Qt))}function nn(){return{gifHeaderOffset:0}}var rn={isXMLFile:an,findOffsets:cn};const on=0;const sn="<?xpacket begin";function an(e){return!!e&&r(e,on,sn.length)===sn}function cn(e){const t=[];t.push({dataOffset:on,length:e.byteLength});return{xmpChunks:t}}var un={parseAppMarkers:fn};function fn(e,t){if(I.USE_TIFF&&A.isTiffFile(e))return ln(A.findTiffOffsets(),"tiff","TIFF");if(I.USE_JPEG&&F.isJpegFile(e))return ln(F.findJpegOffsets(e),"jpeg","JPEG");if(I.USE_PNG&&we.isPngFile(e))return ln(we.findPngOffsets(e,t),"png","PNG");if(I.USE_HEIC&&$t.isHeicFile(e))return ln($t.findHeicOffsets(e),"heic","HEIC");if(I.USE_AVIF&&Wt.isAvifFile(e))return ln(Wt.findAvifOffsets(e),"avif","AVIF");if(I.USE_WEBP&&Kt.isWebpFile(e))return ln(Kt.findOffsets(e),"webp","WebP");if(I.USE_GIF&&Zt.isGifFile(e))return ln(Zt.findOffsets(e),"gif","GIF");if(I.USE_XMP&&rn.isXMLFile(e))return ln(rn.findOffsets(e),"xml","XML");throw new Error("Invalid image format")}function ln(e,t,n){return c({},e,{fileType:{value:t,description:n}})}var dn={ApertureValue:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2),ColorSpace(e){return e===1?"sRGB":e===65535?"Uncalibrated":"Unknown"},ComponentsConfiguration(e){return e.map((e=>e===49?"Y":e===50?"Cb":e===51?"Cr":e===52?"R":e===53?"G":e===54?"B":void 0)).join("")},Contrast(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},CustomRendered(e){return e===0?"Normal process":e===1?"Custom process":"Unknown"},ExposureMode(e){return e===0?"Auto exposure":e===1?"Manual exposure":e===2?"Auto bracket":"Unknown"},ExposureProgram(e){return e===0?"Undefined":e===1?"Manual":e===2?"Normal program":e===3?"Aperture priority":e===4?"Shutter priority":e===5?"Creative program":e===6?"Action program":e===7?"Portrait mode":e===8?"Landscape mode":e===9?"Bulb":"Unknown"},ExposureTime(e){if(e[0]/e[1]>.25){const t=e[0]/e[1];return Number.isInteger(t)?""+t:t.toFixed(1)}return e[0]!==0?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},FNumber:e=>`f/${Number(e[0]/e[1]).toFixed(1)}`,FocalLength:e=>e[0]/e[1]+" mm",FocalPlaneResolutionUnit(e){return e===2?"inches":e===3?"centimeters":e===4?"millimeters":"Unknown"},LightSource:e=>e===1?"Daylight":e===2?"Fluorescent":e===3?"Tungsten (incandescent light)":e===4?"Flash":e===9?"Fine weather":e===10?"Cloudy weather":e===11?"Shade":e===12?"Daylight fluorescent (D 5700 â€“ 7100K)":e===13?"Day white fluorescent (N 4600 â€“ 5400K)":e===14?"Cool white fluorescent (W 3900 â€“ 4500K)":e===15?"White fluorescent (WW 3200 â€“ 3700K)":e===17?"Standard light A":e===18?"Standard light B":e===19?"Standard light C":e===20?"D55":e===21?"D65":e===22?"D75":e===23?"D50":e===24?"ISO studio tungsten":e===255?"Other light source":"Unknown",MeteringMode(e){return e===1?"Average":e===2?"CenterWeightedAverage":e===3?"Spot":e===4?"MultiSpot":e===5?"Pattern":e===6?"Partial":e===255?"Other":"Unknown"},ResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},Saturation(e){return e===0?"Normal":e===1?"Low saturation":e===2?"High saturation":"Unknown"},FocalLengthIn35mmFilm(e){return e===0?"Unknown":e+" mm"},SceneCaptureType(e){return e===0?"Standard":e===1?"Landscape":e===2?"Portrait":e===3?"Night scene":"Unknown"},Sharpness(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},ShutterSpeedValue(e){const t=Math.pow(2,e[0]/e[1]);return t<=1?`${Math.round(1/t)}`:`1/${Math.round(t)}`},WhiteBalance(e){return e===0?"Auto white balance":e===1?"Manual white balance":"Unknown"},XResolution:e=>""+Math.round(e[0]/e[1]),YResolution:e=>""+Math.round(e[0]/e[1])};var pn={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"}[e]||"Unknown")},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"}[e]||"Unknown")},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"}[e]||"Unknown")},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"}[e]||"Unknown")},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>e===1?"top-left":e===2?"top-right":e===3?"bottom-right":e===4?"bottom-left":e===5?"left-top":e===6?"right-top":e===7?"right-bottom":e===8?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:dn.XResolution},283:{name:"YResolution",description:dn.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"}[e]||"Unknown")},296:{name:"ResolutionUnit",description:dn.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map((e=>`${e[0]}/${e[1]}`)).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map((e=>`${e[0]}/${e[1]}`)).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"}[e]||"Unknown")},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"}[e]||"Unknown")},339:{name:"SampleFormat",description:e=>{const t={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map((e=>t[e]||"Unknown")).join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map((e=>""+e[0]/e[1])).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>e===1?"centered":e===2?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map((e=>""+e[0]/e[1])).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:{name:"XPTitle",description:gn},40092:{name:"XPComment",description:gn},40093:{name:"XPAuthor",description:gn},40094:{name:"XPKeywords",description:gn},40095:{name:"XPSubject",description:gn},42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"}[e]||"Unknown")},50778:{name:"CalibrationIlluminant1",description:dn.LightSource},50779:{name:"CalibrationIlluminant2",description:dn.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"}[e]||"Unknown")},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"}[e]||"Unknown")},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"}[e]||"Unknown")},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"}[e]||"Unknown")},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"}[e]||"Unknown")},51111:"NewRawImageDigest",51112:"RawToPreviewGain"};function gn(e){const t=new TextDecoder("utf-16").decode(new Uint8Array(e));return t.replace(/\u0000+$/,"")}var mn={33434:{name:"ExposureTime",description:dn.ExposureTime},33437:{name:"FNumber",description:dn.FNumber},34850:{name:"ExposureProgram",description:dn.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"}[e]||"Unknown")},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>y(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:dn.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:dn.ShutterSpeedValue},37378:{name:"ApertureValue",description:dn.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:dn.MeteringMode},37384:{name:"LightSource",description:dn.LightSource},37385:{name:"Flash",description:e=>e===0?"Flash did not fire":e===1?"Flash fired":e===5?"Strobe return light not detected":e===7?"Strobe return light detected":e===9?"Flash fired, compulsory flash mode":e===13?"Flash fired, compulsory flash mode, return light not detected":e===15?"Flash fired, compulsory flash mode, return light detected":e===16?"Flash did not fire, compulsory flash mode":e===24?"Flash did not fire, auto mode":e===25?"Flash fired, auto mode":e===29?"Flash fired, auto mode, return light not detected":e===31?"Flash fired, auto mode, return light detected":e===32?"No flash function":e===65?"Flash fired, red-eye reduction mode":e===69?"Flash fired, red-eye reduction mode, return light not detected":e===71?"Flash fired, red-eye reduction mode, return light detected":e===73?"Flash fired, compulsory flash mode, red-eye reduction mode":e===77?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":e===79?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":e===89?"Flash fired, auto mode, red-eye reduction mode":e===93?"Flash fired, auto mode, return light not detected, red-eye reduction mode":e===95?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"},37386:{name:"FocalLength",description:dn.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"}[e]||"Unknown")},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>e.length===2?`Location; X: ${e[0]}, Y: ${e[1]}`:e.length===3?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:e.length===4?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:v},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37724:"ImageSourceData",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" Â°C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" Â°"},40960:{name:"FlashpixVersion",description:e=>e.map((e=>String.fromCharCode(e))).join("")},40961:{name:"ColorSpace",description:dn.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:dn.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([e,t])=>`X: ${e}, Y: ${t}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>e===1?"Undefined":e===2?"One-chip color area sensor":e===3?"Two-chip color area sensor":e===4?"Three-chip color area sensor":e===5?"Color sequential area sensor":e===7?"Trilinear sensor":e===8?"Color sequential linear sensor":"Unknown"},41728:{name:"FileSource",description:e=>e===3?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>e===1?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:dn.CustomRendered},41986:{name:"ExposureMode",description:dn.ExposureMode},41987:{name:"WhiteBalance",description:dn.WhiteBalance},41988:{name:"DigitalZoomRatio",description:e=>e[0]===0?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:dn.FocalLengthIn35mmFilm},41990:{name:"SceneCaptureType",description:dn.SceneCaptureType},41991:{name:"GainControl",description:e=>e===0?"None":e===1?"Low gain up":e===2?"High gain up":e===3?"Low gain down":e===4?"High gain down":"Unknown"},41992:{name:"Contrast",description:dn.Contrast},41993:{name:"Saturation",description:dn.Saturation},41994:{name:"Sharpness",description:dn.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>e===1?"Macro":e===2?"Close view":e===3?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{const t=parseFloat((e[0][0]/e[0][1]).toFixed(5));const n=parseFloat((e[1][0]/e[1][1]).toFixed(5));const r=`${t}-${n} mm`;if(e[3][1]===0)return`${r} f/?`;const i=1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]));return`${r} f/${parseFloat(i.toFixed(5))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}[e]||"Unknown")},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"};var hn={0:{name:"GPSVersionID",description:e=>e[0]===2&&e[1]===2&&e[2]===0&&e[3]===0?"Version 2.2":"Unknown"},1:{name:"GPSLatitudeRef",description:e=>{const t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:C},3:{name:"GPSLongitudeRef",description:e=>{const t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:C},5:{name:"GPSAltitudeRef",description:e=>e===0?"Sea level":e===1?"Sea level reference (negative value)":"Unknown"},6:{name:"GPSAltitude",description:e=>e[0]/e[1]+" m"},7:{name:"GPSTimeStamp",description:e=>e.map((([e,t])=>{const n=e/t;return/^\d(\.|$)/.test(`${n}`)?`0${n}`:n})).join(":")},8:"GPSSatellites",9:{name:"GPSStatus",description:e=>{const t=e.join("");return t==="A"?"Measurement in progress":t==="V"?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:e=>{const t=e.join("");return t==="2"?"2-dimensional measurement":t==="3"?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:e=>{const t=e.join("");return t==="K"?"Kilometers per hour":t==="M"?"Miles per hour":t==="N"?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:e=>{const t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},21:{name:"GPSDestLongitudeRef",description:e=>{const t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},23:{name:"GPSDestBearingRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:e=>{const t=e.join("");return t==="K"?"Kilometers":t==="M"?"Miles":t==="N"?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:v},28:{name:"GPSAreaInformation",description:v},29:"GPSDateStamp",30:{name:"GPSDifferential",description:e=>e===0?"Measurement without differential correction":e===1?"Differential correction applied":"Unknown"},31:"GPSHPositioningError"};var Sn={1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:e=>y(e)},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"};var In={45056:{name:"MPFVersion",description:e=>y(e)},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"};var yn={4:{name:"ShotInfo",description:e=>e}};var vn={0:{name:"PentaxVersion",description:e=>e.join(".")},5:"PentaxModelID",555:"LevelInfo"};const Cn=c({},pn,mn);const Un="0th";const En="1st";const bn="exif";const Pn="gps";const An="interoperability";const Tn="mpf";const wn="canon";const xn="pentax";var Fn={[Un]:Cn,[En]:pn,[bn]:Cn,[Pn]:hn,[An]:Sn,[Tn]:I.USE_MPF?In:{},[wn]:I.USE_MAKER_NOTES?yn:{},[xn]:I.USE_MAKER_NOTES?vn:{}};const Ln={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4};const Mn={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13};var _n={getAsciiValue:Nn,getByteAt:On,getAsciiAt:Dn,getShortAt:Rn,getLongAt:kn,getRationalAt:Bn,getUndefinedAt:Gn,getSlongAt:Hn,getSrationalAt:zn,getIfdPointerAt:$n,typeSizes:Ln,tagTypes:Mn,getTypeSize:jn};function Nn(e){return e.map((e=>String.fromCharCode(e)))}function On(e,t){return e.getUint8(t)}function Dn(e,t){return e.getUint8(t)}function Rn(e,t,n){return e.getUint16(t,n===b.LITTLE_ENDIAN)}function kn(e,t,n){return e.getUint32(t,n===b.LITTLE_ENDIAN)}function Bn(e,t,n){return[kn(e,t,n),kn(e,t+4,n)]}function Gn(e,t){return On(e,t)}function Hn(e,t,n){return e.getInt32(t,n===b.LITTLE_ENDIAN)}function zn(e,t,n){return[Hn(e,t,n),Hn(e,t+4,n)]}function $n(e,t,n){return kn(e,t,n)}function jn(e){if(Mn[e]===void 0)throw new Error("No such type found.");return Ln[Mn[e]]}const Vn={1:_n.getByteAt,2:_n.getAsciiAt,3:_n.getShortAt,4:_n.getLongAt,5:_n.getRationalAt,7:_n.getUndefinedAt,9:_n.getSlongAt,10:_n.getSrationalAt,13:_n.getIfdPointerAt};function Wn(e,t,n){return t+_n.getLongAt(e,t+4,n)}function Xn(e,t,n,r,i,o){const s=_n.getTypeSize("SHORT");const a=12;const c={};const u=Jn(e,r,i);r+=s;for(let s=0;s<u;s++){if(r+a>e.byteLength)break;const s=Kn(e,t,n,r,i,o);if(s!==void 0){c[s.name]={id:s.id,value:s.value,description:s.description};(s.name==="MakerNote"||t===xn&&s.name==="LevelInfo")&&(c[s.name].__offset=s.__offset)}r+=a}if(I.USE_THUMBNAIL&&r<e.byteLength-_n.getTypeSize("LONG")){const s=_n.getLongAt(e,r,i);s!==0&&t===Un&&(c.Thumbnail=Xn(e,En,n,n+s,i,o))}return c}function Jn(e,t,n){return t+_n.getTypeSize("SHORT")<=e.byteLength?_n.getShortAt(e,t,n):0}function Kn(e,t,n,r,i,o){const s=33723;const a=_n.getTypeSize("SHORT");const c=a+_n.getTypeSize("SHORT");const u=c+_n.getTypeSize("LONG");const f=_n.getShortAt(e,r,i);const l=_n.getShortAt(e,r+a,i);const d=_n.getLongAt(e,r+c,i);let p;let g;if(_n.typeSizes[l]===void 0||!o&&Fn[t][f]===void 0)return;if(Yn(l,d)){g=r+u;p=qn(e,g,l,d,i)}else{g=_n.getLongAt(e,r+u,i);if(Zn(e,n,g,l,d)){const t=f===s;p=qn(e,n+g,l,d,i,t)}else p="<faulty value>"}if(l===_n.tagTypes.ASCII){p=Qn(p);p=er(p)}let m=`undefined-${f}`;let h=p;if(Fn[t][f]!==void 0)if(Fn[t][f].name!==void 0&&Fn[t][f].description!==void 0){m=Fn[t][f].name;try{h=Fn[t][f].description(p)}catch(e){h=tr(p)}}else if(l===_n.tagTypes.RATIONAL||l===_n.tagTypes.SRATIONAL){m=Fn[t][f];h=""+p[0]/p[1]}else{m=Fn[t][f];h=tr(p)}return{id:f,name:m,value:p,description:h,__offset:g}}function Yn(e,t){return _n.typeSizes[e]*t<=_n.getTypeSize("LONG")}function qn(e,t,n,r,i,o=false){let s=[];if(o){r*=_n.typeSizes[n];n=_n.tagTypes.BYTE}for(let o=0;o<r;o++){s.push(Vn[n](e,t,i));t+=_n.typeSizes[n]}n===_n.tagTypes.ASCII?s=_n.getAsciiValue(s):s.length===1&&(s=s[0]);return s}function Zn(e,t,n,r,i){return t+n+_n.typeSizes[r]*i<=e.byteLength}function Qn(e){const t=[];let n=0;for(let r=0;r<e.length;r++)if(e[r]!=="\0"){t[n]===void 0&&(t[n]="");t[n]+=e[r]}else n++;return t}function er(e){try{return e.map((e=>decodeURIComponent(escape(e))))}catch(t){return e}}function tr(e){return e instanceof Array?e.join(", "):e}const nr="Exif IFD Pointer";const rr="GPS Info IFD Pointer";const ir="Interoperability IFD Pointer";var or={read:sr};function sr(e,t,n){const r=b.getByteOrder(e,t);let i=ar(e,t,r,n);i=cr(i,e,t,r,n);i=ur(i,e,t,r,n);i=fr(i,e,t,r,n);return{tags:i,byteOrder:r}}function ar(e,t,n,r){return Xn(e,Un,t,Wn(e,t,n),n,r)}function cr(e,t,n,r,i){return e[nr]!==void 0?c(e,Xn(t,bn,n,n+e[nr].value,r,i)):e}function ur(e,t,n,r,i){return e[rr]!==void 0?c(e,Xn(t,Pn,n,n+e[rr].value,r,i)):e}function fr(e,t,n,r,i){return e[ir]!==void 0?c(e,Xn(t,An,n,n+e[ir].value,r,i)):e}var lr={read:pr};const dr=16;function pr(e,t,n){const r=b.getByteOrder(e,t);const i=Xn(e,Tn,t,Wn(e,t,r),r,n);return gr(e,t,i,r)}function gr(e,t,n,r){if(!n.MPEntry)return n;const i=[];for(let o=0;o<Math.ceil(n.MPEntry.value.length/dr);o++){i[o]={};const s=mr(n.MPEntry.value,o*dr,_n.getTypeSize("LONG"),r);i[o].ImageFlags=hr(s);i[o].ImageFormat=Sr(s);i[o].ImageType=Ir(s);const a=mr(n.MPEntry.value,o*dr+4,_n.getTypeSize("LONG"),r);i[o].ImageSize={value:a,description:""+a};const c=yr(o,n.MPEntry,r,t);i[o].ImageOffset={value:c,description:""+c};const l=mr(n.MPEntry.value,o*dr+12,_n.getTypeSize("SHORT"),r);i[o].DependentImage1EntryNumber={value:l,description:""+l};const d=mr(n.MPEntry.value,o*dr+14,_n.getTypeSize("SHORT"),r);i[o].DependentImage2EntryNumber={value:d,description:""+d};i[o].image=e.buffer.slice(c,c+a);u(i[o],"base64",(function(){return f(this.image)}))}n.Images=i;return n}function mr(e,t,n,r){if(r===b.LITTLE_ENDIAN){let r=0;for(let i=0;i<n;i++)r+=e[t+i]<<8*i;return r}let i=0;for(let r=0;r<n;r++)i+=e[t+r]<<8*(n-1-r);return i}function hr(e){const t=[e>>31&1,e>>30&1,e>>29&1];const n=[];t[0]&&n.push("Dependent Parent Image");t[1]&&n.push("Dependent Child Image");t[2]&&n.push("Representative Image");return{value:t,description:n.join(", ")||"None"}}function Sr(e){const t=e>>24&7;return{value:t,description:t===0?"JPEG":"Unknown"}}function Ir(e){const t=e&16777215;const n={196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"};return{value:t,description:n[t]||"Unknown"}}function yr(e,t,n,r){return vr(e)?0:mr(t.value,e*dr+8,_n.getTypeSize("LONG"),n)+r}function vr(e){return e===0}var Cr={read:Ur};function Ur(e,t){const n=Er(e,t);const r=Tr(e,t,n);return{"Bits Per Sample":br(e,t,n),"Image Height":Pr(e,t,n),"Image Width":Ar(e,t,n),"Color Components":r,Subsampling:r&&wr(e,t,r.value,n)}}function Er(e,t){return _n.getShortAt(e,t)}function br(e,t,n){const r=2;const i=1;if(r+i>n)return;const o=_n.getByteAt(e,t+r);return{value:o,description:""+o}}function Pr(e,t,n){const r=3;const i=2;if(r+i>n)return;const o=_n.getShortAt(e,t+r);return{value:o,description:`${o}px`}}function Ar(e,t,n){const r=5;const i=2;if(r+i>n)return;const o=_n.getShortAt(e,t+r);return{value:o,description:`${o}px`}}function Tr(e,t,n){const r=7;const i=1;if(r+i>n)return;const o=_n.getByteAt(e,t+r);return{value:o,description:""+o}}function wr(e,t,n,r){const i=8;const o=3*n;if(i+o>r)return;const s=[];for(let r=0;r<n;r++){const n=t+i+r*3;s.push([_n.getByteAt(e,n),_n.getByteAt(e,n+1),_n.getByteAt(e,n+2)])}return{value:s,description:s.length>1?xr(s)+Fr(s):""}}function xr(e){const t={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return e.map((e=>t[e[0]])).join("")}function Fr(e){const t={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return e.length===0||e[0][1]===void 0||t[e[0][1]]===void 0?"":t[e[0][1]]}var Lr={read:Mr};function Mr(e,t){const n=_r(e,t);const r=Br(e,t,n);const i=Gr(e,t,n);const o={"JFIF Version":Nr(e,t,n),"Resolution Unit":Or(e,t,n),XResolution:Rr(e,t,n),YResolution:kr(e,t,n),"JFIF Thumbnail Width":r,"JFIF Thumbnail Height":i};if(r!==void 0&&i!==void 0){const s=Hr(e,t,3*r.value*i.value,n);s&&(o["JFIF Thumbnail"]=s)}for(const e in o)o[e]===void 0&&delete o[e];return o}function _r(e,t){return _n.getShortAt(e,t)}function Nr(e,t,n){const r=7;const i=2;if(r+i>n)return;const o=_n.getByteAt(e,t+r);const s=_n.getByteAt(e,t+r+1);return{value:o*256+s,description:o+"."+s}}function Or(e,t,n){const r=9;const i=1;if(r+i>n)return;const o=_n.getByteAt(e,t+r);return{value:o,description:Dr(o)}}function Dr(e){return e===0?"None":e===1?"inches":e===2?"cm":"Unknown"}function Rr(e,t,n){const r=10;const i=2;if(r+i>n)return;const o=_n.getShortAt(e,t+r);return{value:o,description:""+o}}function kr(e,t,n){const r=12;const i=2;if(r+i>n)return;const o=_n.getShortAt(e,t+r);return{value:o,description:""+o}}function Br(e,t,n){const r=14;const i=1;if(r+i>n)return;const o=_n.getByteAt(e,t+r);return{value:o,description:`${o}px`}}function Gr(e,t,n){const r=15;const i=1;if(r+i>n)return;const o=_n.getByteAt(e,t+r);return{value:o,description:`${o}px`}}function Hr(e,t,n,r){const i=16;if(n===0||i+n>r)return;const o=e.buffer.slice(t+i,t+i+n);return{value:o,description:"<24-bit RGB pixel data>"}}var zr={iptc:{256:{name:"Model Version",description:e=>((e[0]<<8)+e[1]).toString()},261:{name:"Destination",repeatable:true},276:{name:"File Format",description:e=>((e[0]<<8)+e[1]).toString()},278:{name:"File Format Version",description:e=>((e[0]<<8)+e[1]).toString()},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:$r},336:{name:"Time Sent",description:jr},346:{name:"Coded Character Set",description:Vr,encoding_name:Vr},356:"UNO",376:{name:"ARM Identifier",description:e=>((e[0]<<8)+e[1]).toString()},378:{name:"ARM Version",description:e=>((e[0]<<8)+e[1]).toString()},512:{name:"Record Version",description:e=>((e[0]<<8)+e[1]).toString()},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:e=>y(e)==="01"?"Additional Language":"Unknown"},522:"Urgency",524:{name:"Subject Reference",repeatable:true,description:e=>{const t=y(e).split(":");return t[2]+(t[3]?"/"+t[3]:"")+(t[4]?"/"+t[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:true},534:"Fixture Identifier",537:{name:"Keywords",repeatable:true},538:{name:"Content Location Code",repeatable:true},539:{name:"Content Location Name",repeatable:true},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:e=>{const t=y(e);return t==="01"?"Object Kill":t==="02"?"Object Replace":t==="03"?"Object Append":t==="04"?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:true},559:{name:"Reference Date",repeatable:true},562:{name:"Reference Number",repeatable:true},567:{name:"Date Created",description:$r},572:{name:"Time Created",description:jr},574:{name:"Digital Creation Date",description:$r},575:{name:"Digital Creation Time",description:jr},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:e=>{const t=y(e);return t==="a"?"morning":t==="p"?"evening":t==="b"?"both":"Unknown"}},592:{name:"By-line",repeatable:true},597:{name:"By-line Title",repeatable:true},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:true},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:true},637:{name:"Rasterized Caption",description:e=>e},642:"Image Type",643:{name:"Image Orientation",description:e=>{const t=y(e);return t==="P"?"Portrait":t==="L"?"Landscape":t==="S"?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:e=>{const t=y(e);const n=t.charAt(0);const r=t.charAt(1);let i="";n==="1"?i+="Mono":n==="2"&&(i+="Stereo");r==="A"?i+=", actuality":r==="C"?i+=", question and answer session":r==="M"?i+=", music, transmitted by itself":r==="Q"?i+=", response to a question":r==="R"?i+=", raw sound":r==="S"?i+=", scener":r==="V"?i+=", voicer":r==="W"&&(i+=", wrap");return i!==""?i:t}},663:{name:"Audio Sampling Rate",description:e=>parseInt(y(e),10)+" Hz"},664:{name:"Audio Sampling Resolution",description:e=>{const t=parseInt(y(e),10);return t+(t===1?" bit":" bits")}},665:{name:"Audio Duration",description:e=>{const t=y(e);return t.length>=6?t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2):t}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:e=>e.length===2?"ObjectData Preview File Format":"Record 2 destination",description:e=>{if(e.length===2){const t=(e[0]<<8)+e[1];return t===0?"No ObjectData":t===1?"IPTC-NAA Digital Newsphoto Parameter Record":t===2?"IPTC7901 Recommended Message Format":t===3?"Tagged Image File Format (Adobe/Aldus Image data)":t===4?"Illustrator (Adobe Graphics data)":t===5?"AppleSingle (Apple Computer Inc)":t===6?"NAA 89-3 (ANPA 1312)":t===7?"MacBinary II":t===8?"IPTC Unstructured Character Oriented File Format (UCOFF)":t===9?"United Press International ANPA 1312 variant":t===10?"United Press International Down-Load Message":t===11?"JPEG File Interchange (JFIF)":t===12?"Photo-CD Image-Pac (Eastman Kodak)":t===13?"Microsoft Bit Mapped Graphics File [*.BMP]":t===14?"Digital Audio File [*.WAV] (Microsoft & Creative Labs)":t===15?"Audio plus Moving Video [*.AVI] (Microsoft)":t===16?"PC DOS/Windows Executable Files [*.COM][*.EXE]":t===17?"Compressed Binary File [*.ZIP] (PKWare Inc)":t===18?"Audio Interchange File Format AIFF (Apple Computer Inc)":t===19?"RIFF Wave (Microsoft Corporation)":t===20?"Freehand (Macromedia/Aldus)":t===21?'Hypertext Markup Language "HTML" (The Internet Society)':t===22?"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC":t===23?"MPEG 2 Audio Layer 3, ISO/IEC":t===24?"Portable Document File (*.PDF) Adobe":t===25?"News Industry Text Format (NITF)":t===26?"Tape Archive (*.TAR)":t===27?"Tidningarnas TelegrambyrÃ¥ NITF version (TTNITF DTD)":t===28?"Ritzaus Bureau NITF version (RBNITF DTD)":t===29?"Corel Draw [*.CDR]":`Unknown format ${t}`}return y(e)}},713:{name:"ObjectData Preview File Format Version",description:(e,t)=>{const n={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}};const r=y(e);if(t["ObjectData Preview File Format"]){const e=y(t["ObjectData Preview File Format"].value);if(n[e]&&n[e][r])return n[e][r]}return r}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:e=>e[0].toString()},1812:{name:"Max Subfile Size",description:e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}},1882:{name:"ObjectData Size Announced",description:e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}},1887:{name:"Maximum ObjectData Size",description:e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<8)+e[n];return t.toString()}}}};function $r(e){const t=y(e);return t.length>=8?t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2):t}function jr(e){const t=y(e);let n=t;if(t.length>=6){n=t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2);t.length===11&&(n+=t.substr(6,1)+t.substr(7,2)+":"+t.substr(9,2))}return n}function Vr(e){const t=y(e);return t==="%G"?"UTF-8":t==="%5"?"Windows-1252":t==="%/G"?"UTF-8 Level 1":t==="%/H"?"UTF-8 Level 2":t==="%/I"?"UTF-8 Level 3":t==="/A"?"ISO-8859-1":t==="/B"?"ISO-8859-2":t==="/C"?"ISO-8859-3":t==="/D"?"ISO-8859-4":t==="/@"?"ISO-8859-5":t==="/G"?"ISO-8859-6":t==="/F"?"ISO-8859-7":t==="/H"?"ISO-8859-8":"Unknown"}var Wr={get:Xr};function Xr(){if(typeof TextDecoder!=="undefined")return TextDecoder}const Jr=5;var Kr={decode:Yr,TAG_HEADER_SIZE:Jr};function Yr(e,t){const n=Wr.get();if(typeof n!=="undefined"&&e!==void 0)try{return new n(e).decode(t instanceof DataView?t.buffer:Uint8Array.from(t))}catch(e){}const r=t.map((e=>String.fromCharCode(e))).join("");return qr(r)}function qr(e){try{return decodeURIComponent(escape(e))}catch(t){return e}}const Zr=943868237;const Qr=4;const ei=2;const ti=1;const ni=2;const ri=4;const ii=Qr+ei+ni+ri;const oi=1028;const si=5;var ai={read:ci};function ci(e,t,n){try{if(Array.isArray(e))return pi(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,n);const{naaBlock:r,dataOffset:i}=ui(e,t);return pi(e,r,i,n)}catch(e){return{}}}function ui(e,t){while(t+ii<=e.byteLength){const n=fi(e,t);if(li(n))return{naaBlock:n,dataOffset:t+n.headerSize};t+=n.headerSize+n.size+di(n)}throw new Error("No IPTC NAA resource block.")}function fi(e,t){if(e.getUint32(t,false)!==Zr)throw new Error("Not an IPTC resource block.");const n=e.getUint8(t+Qr+ei);const r=(n%2===0?n+1:n)+ti;return{headerSize:Qr+ei+r+ri,type:e.getUint16(t+Qr),size:e.getUint32(t+Qr+ei+r)}}function li(e){return e.type===oi}function di(e){return e.size%2!==0?1:0}function pi(e,t,n,r){const i={};let o;const s=n+t.size;while(n<s&&n<e.byteLength){const{tag:t,tagSize:s}=gi(e,n,i,o,r);if(t===null)break;if(t){"encoding"in t&&(o=t.encoding);if(i[t.name]===void 0||t.repeatable===void 0)i[t.name]={id:t.id,value:t.value,description:t.description};else{i[t.name]instanceof Array||(i[t.name]=[{id:i[t.name].id,value:i[t.name].value,description:i[t.name].description}]);i[t.name].push({id:t.id,value:t.value,description:t.description})}}n+=si+s}return i}function gi(e,t,n,r,i){const o=1;const s=3;if(mi(e,t))return{tag:null,tagSize:0};const a=e.getUint16(t+o);const c=e.getUint16(t+s);if(!i&&!zr.iptc[a])return{tag:void 0,tagSize:c};const u=hi(e,t+si,c);const f={id:a,name:Si(zr.iptc[a],a,u),value:u,description:vi(zr.iptc[a],u,n,r)};Ei(a)&&(f.repeatable=true);bi(a)&&(f.encoding=zr.iptc[a].encoding_name(u));return{tag:f,tagSize:c}}function mi(e,t){const n=28;return e.getUint8(t)!==n}function hi(e,t,n){const r=[];for(let i=0;i<n;i++)r.push(e.getUint8(t+i));return r}function Si(e,t,n){return e?Ii(e)?e:yi(e)?e.name(n):e.name:`undefined-${t}`}function Ii(e){return typeof e==="string"}function yi(e){return typeof e.name==="function"}function vi(e,t,n,r){if(Ui(e))try{return e.description(t,n)}catch(e){}return Ci(e,t)?Kr.decode(r,t):t}function Ci(e,t){return e&&t instanceof Array}function Ui(e){return e&&e.description!==void 0}function Ei(e){return zr.iptc[e]&&zr.iptc[e].repeatable}function bi(e){return zr.iptc[e]&&zr.iptc[e].encoding_name!==void 0}var Pi={"tiff:Orientation"(e){return e==="1"?"Horizontal (normal)":e==="2"?"Mirror horizontal":e==="3"?"Rotate 180":e==="4"?"Mirror vertical":e==="5"?"Mirror horizontal and rotate 270 CW":e==="6"?"Rotate 90 CW":e==="7"?"Mirror horizontal and rotate 90 CW":e==="8"?"Rotate 270 CW":e},"tiff:ResolutionUnit":e=>dn.ResolutionUnit(parseInt(e,10)),"tiff:XResolution":e=>Ai(dn.XResolution,e),"tiff:YResolution":e=>Ai(dn.YResolution,e),"exif:ApertureValue":e=>Ai(dn.ApertureValue,e),"exif:GPSLatitude":xi,"exif:GPSLongitude":xi,"exif:FNumber":e=>Ai(dn.FNumber,e),"exif:FocalLength":e=>Ai(dn.FocalLength,e),"exif:FocalPlaneResolutionUnit":e=>dn.FocalPlaneResolutionUnit(parseInt(e,10)),"exif:ColorSpace":e=>dn.ColorSpace(Ti(e)),"exif:ComponentsConfiguration"(e,t){if(/^\d, \d, \d, \d$/.test(t)){const e=t.split(", ").map((e=>e.charCodeAt(0)));return dn.ComponentsConfiguration(e)}return t},"exif:Contrast":e=>dn.Contrast(parseInt(e,10)),"exif:CustomRendered":e=>dn.CustomRendered(parseInt(e,10)),"exif:ExposureMode":e=>dn.ExposureMode(parseInt(e,10)),"exif:ExposureProgram":e=>dn.ExposureProgram(parseInt(e,10)),"exif:ExposureTime"(e){return wi(e)?dn.ExposureTime(e.split("/").map((e=>parseInt(e,10)))):e},"exif:MeteringMode":e=>dn.MeteringMode(parseInt(e,10)),"exif:Saturation":e=>dn.Saturation(parseInt(e,10)),"exif:SceneCaptureType":e=>dn.SceneCaptureType(parseInt(e,10)),"exif:Sharpness":e=>dn.Sharpness(parseInt(e,10)),"exif:ShutterSpeedValue":e=>Ai(dn.ShutterSpeedValue,e),"exif:WhiteBalance":e=>dn.WhiteBalance(parseInt(e,10))};function Ai(e,t){return wi(t)?e(t.split("/")):t}function Ti(e){return e.substring(0,2)==="0x"?parseInt(e.substring(2),16):parseInt(e,10)}function wi(e){return/^-?\d+\/-?\d+$/.test(e)}function xi(e){const[t,n]=e.split(",");if(t!==void 0&&n!==void 0){const e=parseFloat(t);const r=parseFloat(n);const i=n.charAt(n.length-1);if(!Number.isNaN(e)&&!Number.isNaN(r))return""+(e+r/60)+i}return e}var Fi={get:Li};function Li(e){if(e)return e;if(typeof DOMParser!=="undefined")return new DOMParser;try{const{DOMParser:e,onErrorStopParsing:t}=__non_webpack_require__("@xmldom/xmldom");return new e({onError:t})}catch(e){return}}function Mi(e){const t=["prefix is non-null and namespace is null","prefix not bound to a namespace","prefix inte bundet till en namnrymd",/Namespace prefix .+ is not defined/];for(let n=0;n<t.length;n++){const r=new RegExp(t[n]);if(r.test(e.message))return true}return false}function _i(e){const t=e.match(/<([A-Za-z_][A-Za-z0-9._-]*)([^>]*)>/);if(!t)return e;const n=t[1];const r=Ni(e);const i=Oi(e);const o=i.filter((e=>r.indexOf(e)===-1));if(o.length===0)return e;const s=Ri(o);return ki(e,n,s)}function Ni(e){const t=[];const n=/xmlns:([\w-]+)=["'][^"']+["']/g;let r;while((r=n.exec(e))!==null)t.indexOf(r[1])===-1&&t.push(r[1]);return t}function Oi(e){const t=[];const n=/\b([A-Za-z_][A-Za-z0-9._-]*):[A-Za-z_][A-Za-z0-9._-]*\b/g;let r;while((r=n.exec(e))!==null){const e=r[1];e!=="xmlns"&&e!=="xml"&&(t.indexOf(e)===-1&&t.push(e))}return t}const Di={xmp:"http://ns.adobe.com/xap/1.0/",tiff:"http://ns.adobe.com/tiff/1.0/",exif:"http://ns.adobe.com/exif/1.0/",dc:"http://purl.org/dc/elements/1.1/",xmpMM:"http://ns.adobe.com/xap/1.0/mm/",stEvt:"http://ns.adobe.com/xap/1.0/sType/ResourceEvent#",stRef:"http://ns.adobe.com/xap/1.0/sType/ResourceRef#",photoshop:"http://ns.adobe.com/photoshop/1.0/"};function Ri(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];const i=Di[r]||"http://fallback.namespace/"+r;t.push(" xmlns:"+r+'="'+i+'"')}return t.join("")}function ki(e,t,n){const r=new RegExp("<"+t+"([^>]*)>");return e.replace(r,"<"+t+"$1"+n+">")}var Bi={read:Gi};class ParseError extends Error{constructor(e){super(e);this.name="ParseError"}}function Gi(e,t,n){const r={};if(typeof e==="string"){$i(r,e,n);return r}const[i,o]=Hi(e,t);const s=$i(r,i,n);if(o){const i=$i(r,o,n);if(!s&&!i){delete r._raw;$i(r,zi(e,t),n)}}return r}function Hi(e,t){if(t.length===0)return[];const n=[zi(e,t.slice(0,1))];t.length>1&&n.push(zi(e,t.slice(1)));return n}function zi(e,t){const n=t.reduce(((e,t)=>e+t.length),0);const r=new Uint8Array(n);let i=0;for(let n=0;n<t.length;n++){const o=t[n];const s=e.buffer.slice(o.dataOffset,o.dataOffset+o.length);r.set(new Uint8Array(s),i);i+=o.length}return new DataView(r.buffer)}function $i(e,t,n){try{const{doc:r,raw:i}=ji(t,n);e._raw=(e._raw||"")+i;const o=Xi(r);c(e,no(Ji(o,true)));return true}catch(e){return false}}function ji(e,t){const n=Fi.get(t);if(!n){console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags.");throw new Error}const i=typeof e==="string"?e:r(e,0,e.byteLength);const o=Wi(n,Vi(i));return{doc:o,raw:i}}function Vi(e){return e.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")}function Wi(e,t,n=false){try{const n=e.parseFromString(t,"application/xml");const r=n.getElementsByTagName("parsererror");if(r.length>0)throw new ParseError(r[0].textContent);return n}catch(r){if(r.name==="ParseError"&&Mi(r)&&!n)return Wi(e,_i(t),true);throw r}}function Xi(e){for(let t=0;t<e.childNodes.length;t++){if(e.childNodes[t].tagName==="x:xmpmeta")return Xi(e.childNodes[t]);if(e.childNodes[t].tagName==="rdf:RDF")return e.childNodes[t]}throw new Error}function Ji(e,t=false){const n=Ki(e);return Yi(n)?t?{}:qi(n[0]):Zi(n)}function Ki(e){const t=[];for(let n=0;n<e.childNodes.length;n++)t.push(e.childNodes[n]);return t}function Yi(e){return e.length===1&&e[0].nodeName==="#text"}function qi(e){return e.nodeValue}function Zi(e){const t={};e.forEach((e=>{if(Qi(e)){const n=eo(e);if(t[e.nodeName]!==void 0){Array.isArray(t[e.nodeName])||(t[e.nodeName]=[t[e.nodeName]]);t[e.nodeName].push(n)}else t[e.nodeName]=n}}));return t}function Qi(e){return e.nodeName&&e.nodeName!=="#text"}function eo(e){return{attributes:to(e),value:Ji(e)}}function to(e){const t={};for(let n=0;n<e.attributes.length;n++)t[e.attributes[n].nodeName]=decodeURIComponent(escape(e.attributes[n].value));return t}function no(e){const t={};if(typeof e==="string")return e;for(const n in e){let r=e[n];Array.isArray(r)||(r=[r]);r.forEach((e=>{c(t,ro(e.attributes));typeof e.value==="object"&&c(t,lo(e.value))}))}return t}function ro(e){const t={};for(const n in e)try{io(n)&&(t[so(n)]={value:e[n],attributes:{},description:ao(e[n],n)})}catch(e){}return t}function io(e){return e!=="rdf:parseType"&&!oo(e)}function oo(e){return e.split(":")[0]==="xmlns"}function so(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function ao(e,t=void 0){if(Array.isArray(e)){const n=co(e);return t&&typeof Pi[t]==="function"?Pi[t](e,n):n}if(typeof e==="object")return uo(e);try{return t&&typeof Pi[t]==="function"?Pi[t](e):decodeURIComponent(escape(e))}catch(t){return e}}function co(e){return e.map((e=>e.value!==void 0?ao(e.value):ao(e))).join(", ")}function uo(e){const t=[];for(const n in e)t.push(`${fo(n)}: ${ao(e[n].value)}`);return t.join("; ")}function fo(e){return e==="CiAdrCity"?"CreatorCity":e==="CiAdrCtry"?"CreatorCountry":e==="CiAdrExtadr"?"CreatorAddress":e==="CiAdrPcode"?"CreatorPostalCode":e==="CiAdrRegion"?"CreatorRegion":e==="CiEmailWork"?"CreatorWorkEmail":e==="CiTelWork"?"CreatorWorkPhone":e==="CiUrlWork"?"CreatorWorkUrl":e}function lo(e){const t={};for(const n in e)try{oo(n)||(t[so(n)]=po(e[n],n))}catch(e){}return t}function po(e,t){return mo(e)?ho(e,t):go(e)?{value:"",attributes:{},description:""}:So(e)?Io(e,t):Uo(e)?Eo(e,t):bo(e)?Po(e,t):Ao(e)?wo(e,t):Fo(e,t)}function go(e){return e.attributes["rdf:parseType"]==="Resource"&&typeof e.value==="string"&&e.value.trim()===""}function mo(e){return Array.isArray(e)}function ho(e,t){return Fo(e[e.length-1],t)}function So(e){return e.attributes["rdf:parseType"]==="Resource"&&e.value["rdf:value"]!==void 0||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]!==void 0}function Io(e,t){const n=yo(e);e.value["rdf:Description"]!==void 0&&(e=e.value["rdf:Description"]);c(n,yo(e),vo(e));const r=Co(e);return{value:r,attributes:n,description:ao(r,t)}}function yo(e){const t={};for(const n in e.attributes)n==="rdf:parseType"||n==="rdf:resource"||oo(n)||(t[so(n)]=e.attributes[n]);return t}function vo(e){const t={};for(const n in e.value)n==="rdf:value"||oo(n)||(t[so(n)]=e.value[n].value);return t}function Co(e){return Lo(e.value["rdf:value"])||e.value["rdf:value"].value}function Uo(e){return e.attributes["rdf:parseType"]==="Resource"||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]===void 0}function Eo(e,t){const n={value:{},attributes:{}};if(e.value["rdf:Description"]!==void 0){c(n.value,ro(e.value["rdf:Description"].attributes));c(n.attributes,yo(e));e=e.value["rdf:Description"]}c(n.value,lo(e.value));n.description=ao(n.value,t);return n}function bo(e){return Object.keys(e.value).length===0&&e.attributes["xml:lang"]===void 0&&e.attributes["rdf:resource"]===void 0}function Po(e,t){const n=ro(e.attributes);return{value:n,attributes:{},description:ao(n,t)}}function Ao(e){return To(e.value)!==void 0}function To(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function wo(e,t){let n=To(e.value).value["rdf:li"];const r=yo(e);const i=[];n===void 0?n=[]:Array.isArray(n)||(n=[n]);n.forEach((e=>{i.push(xo(e))}));return{value:i,attributes:r,description:ao(i,t)}}function xo(e){return So(e)?Io(e):Uo(e)?Eo(e).value:bo(e)?Po(e).value:Fo(e)}function Fo(e,t){const n=Lo(e)||no(e.value);return{value:n,attributes:yo(e),description:ao(n,t)}}function Lo(e){return e.attributes&&e.attributes["rdf:resource"]}const Mo={CLOSED_SUBPATH_LENGTH:0,CLOSED_SUBPATH_BEZIER_LINKED:1,CLOSED_SUBPATH_BEZIER_UNLINKED:2,OPEN_SUBPATH_LENGTH:3,OPEN_SUBPATH_BEZIER_LINKED:4,OPEN_SUBPATH_BEZIER_UNLINKED:5,FILL_RULE:6,CLIPBOARD:7,INITIAL_FILL_RULE:8};const _o=24;var No={2e3:{name:"PathInformation",description:Oo},2999:{name:"ClippingPathName",description(e){const[,t]=s(e,0);return t}}};function Oo(e){const t=2;const n={};const r=[];for(let i=0;i<e.byteLength;i+=t+_o){const o=_n.getShortAt(e,i);if(Do[o]){n[o]||(n[o]=Do[o].description);r.push({type:o,path:Do[o].path(e,i+t)})}}return JSON.stringify({types:n,paths:r})}const Do={[Mo.CLOSED_SUBPATH_LENGTH]:{description:"Closed subpath length",path:(e,t)=>[_n.getShortAt(e,t)]},[Mo.CLOSED_SUBPATH_BEZIER_LINKED]:{description:"Closed subpath Bezier knot, linked",path:Ro},[Mo.CLOSED_SUBPATH_BEZIER_UNLINKED]:{description:"Closed subpath Bezier knot, unlinked",path:Ro},[Mo.OPEN_SUBPATH_LENGTH]:{description:"Open subpath length",path:(e,t)=>[_n.getShortAt(e,t)]},[Mo.OPEN_SUBPATH_BEZIER_LINKED]:{description:"Open subpath Bezier knot, linked",path:Ro},[Mo.OPEN_SUBPATH_BEZIER_UNLINKED]:{description:"Open subpath Bezier knot, unlinked",path:Ro},[Mo.FILL_RULE]:{description:"Path fill rule",path:()=>[]},[Mo.INITIAL_FILL_RULE]:{description:"Initial fill rule",path:(e,t)=>[_n.getShortAt(e,t)]},[Mo.CLIPBOARD]:{description:"Clipboard",path:Bo}};function Ro(e,t){const n=8;const r=[];for(let i=0;i<_o;i+=n)r.push(ko(e,t+i));return r}function ko(e,t){const n=Go(e,t,8);const r=Go(e,t+4,8);return[r,n]}function Bo(e,t){return[[Go(e,t,8),Go(e,t+4,8),Go(e,t+8,8),Go(e,t+12,8)],Go(e,t+16,8)]}function Go(e,t,n){const r=_n.getLongAt(e,t);const i=r>>>31===0?1:-1;const o=(r&2130706432)>>>32-n;const s=r&parseInt(g("1",32-n),2);return i*p(o.toString(2)+"."+d(s.toString(2),32-n,"0"),2)}var Ho={read:Wo};const zo="8BIM";const $o=2;const jo=4;const Vo=zo.length;function Wo(e,t){const i=n(new Uint8Array(e).buffer);const o={};let s=0;while(s<e.length){const e=r(i,s,Vo);s+=Vo;const a=_n.getShortAt(i,s);s+=$o;const{tagName:c,tagNameSize:u}=Xo(i,s);s+=u;const f=_n.getLongAt(i,s);s+=jo;if(e===zo){const e=n(i.buffer,s,f);const u={id:a,value:r(e,0,f)};if(No[a]){try{u.description=No[a].description(e)}catch(e){u.description="<no description formatter>"}o[c||No[a].name]=u}else t&&(o[`undefined-${a}`]=u)}s+=f+f%2}return o}function Xo(e,t){const[n,r]=s(e,t);return{tagName:r,tagNameSize:1+n+(n%2===0?1:0)}}const Jo={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}};const Ko={4:{name:"Preferred CMM type",value:(e,t)=>r(e,t,4),description:e=>e!==null?Zo(e):""},8:{name:"Profile Version",value:(e,t)=>e.getUint8(t).toString(10)+"."+(e.getUint8(t+1)>>4).toString(10)+"."+(e.getUint8(t+1)%16).toString(10)},12:{name:"Profile/Device class",value:(e,t)=>r(e,t,4),description:e=>{switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:(e,t)=>r(e,t,4)},20:{name:"Connection Space",value:(e,t)=>r(e,t,4)},24:{name:"ICC Profile Date",value:(e,t)=>Yo(e,t).toISOString()},36:{name:"ICC Signature",value:(e,t)=>qo(e.buffer.slice(t,t+4))},40:{name:"Primary Platform",value:(e,t)=>r(e,t,4),description:e=>Zo(e)},48:{name:"Device Manufacturer",value:(e,t)=>r(e,t,4),description:e=>Zo(e)},52:{name:"Device Model Number",value:(e,t)=>r(e,t,4)},64:{name:"Rendering Intent",value:(e,t)=>e.getUint32(t),description:e=>{switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:(e,t)=>r(e,t,4)}};function Yo(e,t){const n=e.getUint16(t);const r=e.getUint16(t+2)-1;const i=e.getUint16(t+4);const o=e.getUint16(t+6);const s=e.getUint16(t+8);const a=e.getUint16(t+10);return new Date(Date.UTC(n,r,i,o,s,a))}function qo(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function Zo(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}var Qo={read:cs};const es=84;const ts=128;const ns="acsp";const rs="desc";const is="mluc";const os="text";const ss="sig ";const as=12;function cs(e,t,n){return n&&t[0].compressionMethod!==m?us(e,t):ls(e,t)}function us(e,t){if(!fs(t[0].compressionMethod))return{};const n=new DataView(e.buffer.slice(t[0].offset,t[0].offset+t[0].length));return S(n,t[0].compressionMethod,"utf-8","dataview").then(ms).catch((()=>({})))}function fs(e){return e===h}function ls(e,t){try{const n=t.reduce(((e,t)=>e+t.length),0);const r=new Uint8Array(n);let i=0;const o=ds(e);for(let e=1;e<=t.length;e++){const n=t.find((t=>t.chunkNumber===e));if(!n)throw new Error(`ICC chunk ${e} not found`);const s=o.slice(n.offset,n.offset+n.length);const a=new Uint8Array(s);r.set(a,i);i+=a.length}return ms(new DataView(r.buffer))}catch(e){return{}}}function ds(e){return Array.isArray(e)?new DataView(Uint8Array.from(e).buffer).buffer:e.buffer}function ps(e){return e.length<ts+4}function gs(e,t){return e.length<t+as}function ms(e){const t=e.buffer;const n=e.getUint32();if(e.byteLength!==n)throw new Error("ICC profile length not matching");if(e.byteLength<es)throw new Error("ICC profile too short");const i={};const s=Object.keys(Ko);for(let t=0;t<s.length;t++){const n=s[t];const r=Ko[n];const o=r.value(e,parseInt(n,10));let a=o;r.description&&(a=r.description(o));i[r.name]={value:o,description:a}}const a=hs(t.slice(36,40));if(a!==ns)throw new Error("ICC profile: missing signature");if(ps(t))return i;const c=e.getUint32(128);let u=132;for(let n=0;n<c;n++){if(gs(t,u))return i;const n=r(e,u,4);const s=e.getUint32(u+4);const a=e.getUint32(u+8);if(s>t.length)return i;const c=r(e,s,4);if(c===rs){const r=e.getUint32(s+8);if(r>a)return i;const o=hs(t.slice(s+12,s+r+11));Ss(i,n,o)}else if(c===is){const t=e.getUint32(s+8);const a=e.getUint32(s+12);let c=s+16;const u=[];for(let n=0;n<t;n++){const t=r(e,c+0,2);const n=r(e,c+2,2);const i=e.getUint32(c+4);const f=e.getUint32(c+8);const l=o(e,s+f,i);u.push({languageCode:t,countryCode:n,text:l});c+=a}if(t===1)Ss(i,n,u[0].text);else{const e={};for(let t=0;t<u.length;t++)e[`${u[t].languageCode}-${u[t].countryCode}`]=u[t].text;Ss(i,n,e)}}else if(c===os){const e=hs(t.slice(s+8,s+a-7));Ss(i,n,e)}else if(c===ss){const e=hs(t.slice(s+8,s+12));Ss(i,n,e)}u+=12}return i}function hs(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function Ss(e,t,n){Jo[t]?e[Jo[t].name]={value:n,description:n}:e[t]={value:n,description:n}}const Is=27;var ys={read:vs,SHOT_INFO_AUTO_ROTATE:Is};function vs(e,t,n,r,i){let o=Xn(e,wn,t,t+n,r,i);if(o.ShotInfo){o=c({},o,Cs(o.ShotInfo.value));delete o.ShotInfo}return o}function Cs(e){const t={};e[Is]!==void 0&&(t.AutoRotate={value:e[Is],description:Us(e[Is])});return t}function Us(e){return e===0?"None":e===1?"Rotate 90 CW":e===2?"Rotate 180":e===3?"Rotate 270 CW":"Unknown"}const Es=8;const bs=Es+2;const Ps={K3_III:78420};const As={CAMERA_ORIENTATION:1,ROLL_ANGLE:3,PITCH_ANGLE:5};var Ts={read:ws,PENTAX_IFD_OFFSET:bs,MODEL_ID:Ps,LIK3III:As};function ws(e,t,n,r){const i=b.getByteOrder(e,t+n+Es);const o=t+n;let s=Xn(e,xn,o,o+bs,i,r,true);if(xs(s)){s=c({},s,Fs(e,o+s.LevelInfo.__offset,i));delete s.LevelInfo}return s}function xs(e){return e.PentaxModelID&&e.PentaxModelID.value===Ps.K3_III&&e.LevelInfo}function Fs(e,t,n){const r={};if(t+7>e.byteLength)return r;const i=e.getInt8(t+As.CAMERA_ORIENTATION);r.CameraOrientation={value:i,description:Ls(i)};const o=e.getInt16(t+As.ROLL_ANGLE,n===b.LITTLE_ENDIAN);r.RollAngle={value:o,description:Ms(o)};const s=e.getInt16(t+As.PITCH_ANGLE,n===b.LITTLE_ENDIAN);r.PitchAngle={value:s,description:_s(s)};return r}function Ls(e){return e===0?"Horizontal (normal)":e===1?"Rotate 270 CW":e===2?"Rotate 180":e===3?"Rotate 90 CW":e===4?"Upwards":e===5?"Downwards":"Unknown"}function Ms(e){return""+e*-.5}function _s(e){return""+e*-.5}var Ns={read:Os};function Os(e,t){return{"Image Width":Ds(e,t),"Image Height":Rs(e,t),"Bit Depth":ks(e,t),"Color Type":Bs(e,t),Compression:Gs(e,t),Filter:Hs(e,t),Interlace:zs(e,t)}}function Ds(e,t){const n=0;const r=4;if(t+n+r>e.byteLength)return;const i=_n.getLongAt(e,t);return{value:i,description:`${i}px`}}function Rs(e,t){const n=4;const r=4;if(t+n+r>e.byteLength)return;const i=_n.getLongAt(e,t+n);return{value:i,description:`${i}px`}}function ks(e,t){const n=8;const r=1;if(t+n+r>e.byteLength)return;const i=_n.getByteAt(e,t+n);return{value:i,description:`${i}`}}function Bs(e,t){const n=9;const r=1;const i={0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"};if(t+n+r>e.byteLength)return;const o=_n.getByteAt(e,t+n);return{value:o,description:i[o]||"Unknown"}}function Gs(e,t){const n=10;const r=1;if(t+n+r>e.byteLength)return;const i=_n.getByteAt(e,t+n);return{value:i,description:i===0?"Deflate/Inflate":"Unknown"}}function Hs(e,t){const n=11;const r=1;if(t+n+r>e.byteLength)return;const i=_n.getByteAt(e,t+n);return{value:i,description:i===0?"Adaptive":"Unknown"}}function zs(e,t){const n=12;const r=1;const i={0:"Noninterlaced",1:"Adam7 Interlace"};if(t+n+r>e.byteLength)return;const o=_n.getByteAt(e,t+n);return{value:o,description:i[o]||"Unknown"}}var $s={read:Zs};const js="STATE_KEYWORD";const Vs="STATE_COMPRESSION";const Ws="STATE_LANG";const Xs="STATE_TRANSLATED_KEYWORD";const Js="STATE_TEXT";const Ks=1;const Ys=1;const qs=6;function Zs(e,t,n,r){const i={};const o=[];for(let s=0;s<t.length;s++){const{offset:a,length:c,type:u}=t[s];const f=Qs(e,a,c,u,n);if(f instanceof Promise)o.push(f.then((({name:e,value:t,description:n})=>{try{if(I.USE_EXIF&&aa(e,t))return{__exif:or.read(ua(t),qs,r).tags};if(I.USE_IPTC&&ca(e,t))return{__iptc:ai.read(ua(t),0,r)};if(e&&!aa(e,t)&&!ca(e,t))return{[e]:{value:t,description:n}}}catch(e){}return{}})));else{const{name:e,value:t,description:n}=f;e&&(i[e]={value:t,description:n})}}return{readTags:i,readTagsPromise:o.length>0?Promise.all(o):void 0}}function Qs(e,t,n,r,i){const o=[];const s=[];const a=[];let c;let u=js;let f=m;for(let i=0;i<n&&t+i<e.byteLength;i++){if(u===Vs){f=ea({type:r,dataView:e,offset:t+i});r===Re&&(i+=Ks);u=ta(r,u);continue}if(u===Js){c=new DataView(e.buffer.slice(t+i,t+n));break}const l=e.getUint8(t+i);l===0?u=ta(r,u):u===js?o.push(l):u===Ws?s.push(l):u===Xs&&a.push(l)}if(f!==m&&!i)return{};const l=S(c,f,na(r));return l instanceof Promise?l.then((e=>ra(e,r,s,o))).catch((()=>ra("<text using unknown compression>".split(""),r,s,o))):ra(l,r,s,o)}function ea({type:e,dataView:t,offset:n}){if(e===Re){if(t.getUint8(n)===Ys)return t.getUint8(n+1)}else if(e===ke)return t.getUint8(n);return m}function ta(e,t){return t===js&&[Re,ke].includes(e)?Vs:t===Vs?e===Re?Ws:Js:t===Ws?Xs:Js}function na(e){return e===De||e===ke?"latin1":"utf-8"}function ra(e,t,n,r){const i=oa(e);return{name:ia(t,n,r),value:i,description:t===Re?sa(e):i}}function ia(e,t,n){const r=a(n);if(e===De||t.length===0)return r;const i=a(t);return`${r} (${i})`}function oa(e){return e instanceof DataView?r(e,0,e.byteLength):e}function sa(e){return Kr.decode("UTF-8",e)}function aa(e,t){return e.toLowerCase()==="raw profile type exif"&&t.substring(1,5)==="exif"}function ca(e,t){return e.toLowerCase()==="raw profile type iptc"&&t.substring(1,5)==="iptc"}function ua(e){const t=e.match(/\n(exif|iptc)\n\s*\d+\n([\s\S]*)$/);return fa(t[2].replace(/\n/g,""))}function fa(e){const t=new DataView(new ArrayBuffer(e.length/2));for(let n=0;n<e.length;n+=2)t.setUint8(n/2,parseInt(e.substring(n,n+2),16));return t}var la={read:da};function da(e,t){const n={};for(let i=0;i<t.length;i++){const o=_n.getLongAt(e,t[i]+Me);const s=r(e,t[i]+_e,Le);if(s===Be){n["Pixels Per Unit X"]=pa(e,t[i],o);n["Pixels Per Unit Y"]=ga(e,t[i],o);n["Pixel Units"]=ma(e,t[i],o)}else s===Ge&&(n["Modify Date"]=ha(e,t[i],o))}return n}function pa(e,t,n){const r=0;const i=4;if(!Sa(e,t,n,r,i))return;const o=_n.getLongAt(e,t+Ne+r);return{value:o,description:""+o}}function ga(e,t,n){const r=4;const i=4;if(!Sa(e,t,n,r,i))return;const o=_n.getLongAt(e,t+Ne+r);return{value:o,description:""+o}}function ma(e,t,n){const r=8;const i=1;if(!Sa(e,t,n,r,i))return;const o=_n.getByteAt(e,t+Ne+r);return{value:o,description:o===1?"meters":"Unknown"}}function ha(e,t,n){const r=7;if(!Sa(e,t,n,0,r))return;const i=_n.getShortAt(e,t+Ne);const o=_n.getByteAt(e,t+Ne+2);const s=_n.getByteAt(e,t+Ne+3);const a=_n.getByteAt(e,t+Ne+4);const c=_n.getByteAt(e,t+Ne+5);const u=_n.getByteAt(e,t+Ne+6);return{value:[i,o,s,a,c,u],description:`${Ia(i,4)}-${Ia(o,2)}-${Ia(s,2)} ${Ia(a,2)}:${Ia(c,2)}:${Ia(u,2)}`}}function Sa(e,t,n,r,i){return r+i<=n&&t+Ne+r+i<=e.byteLength}function Ia(e,t){return`${"0".repeat(t-(""+e).length)}${e}`}var ya={read:Ua};const va=4;const Ca=7;function Ua(e,t){const n={};const r=_n.getByteAt(e,t);n.Alpha=Ea(r);n.Animation=ba(r);n.ImageWidth=Pa(e,t+va);n.ImageHeight=Pa(e,t+Ca);return n}function Ea(e){const t=e&16;return{value:t?1:0,description:t?"Yes":"No"}}function ba(e){const t=e&2;return{value:t?1:0,description:t?"Yes":"No"}}function Pa(e,t){const n=_n.getByteAt(e,t)+256*_n.getByteAt(e,t+1)+65536*_n.getByteAt(e,t+2)+1;return{value:n,description:n+"px"}}var Aa={read:Ta};function Ta(e){return{"GIF Version":wa(e),"Image Width":xa(e),"Image Height":Fa(e),"Global Color Map":La(e),"Bits Per Pixel":_a(e),"Color Resolution Depth":Ma(e)}}function wa(e){const t=3;const n=3;if(t+n>e.byteLength)return;const i=r(e,t,n);return{value:i,description:i}}function xa(e){const t=6;const n=2;if(t+n>e.byteLength)return;const r=e.getUint16(t,true);return{value:r,description:`${r}px`}}function Fa(e){const t=8;const n=2;if(t+n>e.byteLength)return;const r=e.getUint16(t,true);return{value:r,description:`${r}px`}}function La(e){const t=10;const n=1;if(t+n>e.byteLength)return;const r=e.getUint8(t);const i=(r&128)>>>7;return{value:i,description:i===1?"Yes":"No"}}function Ma(e){const t=10;const n=1;if(t+n>e.byteLength)return;const r=e.getUint8(t);const i=1+((r&112)>>>4);return{value:i,description:`${i} ${i===1?"bit":"bits"}`}}function _a(e){const t=10;const n=1;if(t+n>e.byteLength)return;const r=e.getUint8(t);const i=1+(r&7);return{value:i,description:`${i} ${i===1?"bit":"bits"}`}}const Na=[6,7,99];var Oa={get:Da};function Da(e,t,n){if(Ra(t)){t.type="image/jpeg";const r=n+t.JPEGInterchangeFormat.value;t.image=e.buffer.slice(r,r+t.JPEGInterchangeFormatLength.value);u(t,"base64",(function(){return f(this.image)}))}return t}function Ra(e){return e&&(e.Compression===void 0||Na.includes(e.Compression.value))&&e.JPEGInterchangeFormat&&e.JPEGInterchangeFormat.value&&e.JPEGInterchangeFormatLength&&e.JPEGInterchangeFormatLength.value}const ka={INCHES:2,CENTIMETERS:3,MILLIMETERS:4};const Ba={INCHES_TO_MM:25.4,CM_TO_MM:10,MM_TO_MM:1};var Ga={get:Ha};function Ha(e,t){const n={};let r=false;const i=za(e,"exif","FocalLength",t);const o=za(e,"exif","FocalPlaneXResolution",t);const s=za(e,"exif","FocalPlaneYResolution",t);const a=za(e,"exif","FocalPlaneResolutionUnit",t);const c=za(e,"file","Image Width",t);const u=za(e,"file","Image Height",t);const f=za(e,"exif","FocalLengthIn35mmFilm",t)||$a(o,s,a,c,u,i);if(f){n.FocalLength35efl={value:f,description:dn.FocalLengthIn35mmFilm(f)};r=true}const l=ja(i,f);if(l){n.ScaleFactorTo35mmEquivalent=l;r=true}const d=Va(f);if(d){n.FieldOfView=d;r=true}if(r)return n}function za(e,t,n,r){return r&&e[t]&&e[t][n]?e[t][n].value:!r&&e[n]?e[n].value:void 0}function $a(e,t,n,r,i,o){const s=43.27;if(e&&t&&n&&r&&i&&o)try{let a;switch(n){case ka.INCHES:a=Ba.INCHES_TO_MM;break;case ka.CENTIMETERS:a=Ba.CM_TO_MM;break;case ka.MILLIMETERS:a=Ba.MM_TO_MM;break;default:return}const c=e[0]/e[1]*a;const u=t[0]/t[1]*a;const f=r/c;const l=i/u;const d=Math.sqrt(f**2+l**2);const p=o[0]/o[1]*(s/d);return p}catch(e){}}function ja(e,t){if(e&&t)try{const n=t/(e[0]/e[1]);return{value:n,description:n.toFixed(1)}}catch(e){}}function Va(e){const t=36;if(e)try{const n=2*Math.atan(t/(2*e))*(180/Math.PI);return{value:n,description:n.toFixed(1)+" deg"}}catch(e){}}
/**
 * Thrown when no Exif metadata was found for the given image.
 *
 * @param {string} message The error message.
 */function Wa(e){this.name="MetadataMissingError";this.message=e||"No Exif data";this.stack=(new Error).stack}Wa.prototype=new Error;var Xa={MetadataMissingError:Wa};var Ja={load:Ya,loadView:fc,errors:Xa};const Ka=Xa;function Ya(e,t={}){if(qa(e)){t.async=true;return Za(e,t).then((e=>ac(e,t)))}if(oc(e)){t.async=true;return sc(e).then((e=>ac(e,t)))}return ac(e,t)}function qa(e){return typeof e==="string"}function Za(e,t){return/^\w+:\/\//.test(e)?typeof fetch!=="undefined"?Qa(e,t):ec(e,t):nc(e)?Promise.resolve(l(e)):rc(e,t)}function Qa(e,{length:t}={}){const n={method:"GET"};Number.isInteger(t)&&t>=0&&(n.headers={range:"bytes=0-"+(t-1)});return fetch(e,n).then((e=>e.arrayBuffer()))}function ec(e,{length:t}={}){return new Promise(((n,r)=>{const i={};Number.isInteger(t)&&t>=0&&(i.headers={range:"bytes=0-"+(t-1)});const o=tc(e);o(e,i,(e=>{if(e.statusCode>=200&&e.statusCode<=299){const t=[];e.on("data",(e=>t.push(Buffer.from(e))));e.on("error",(e=>r(e)));e.on("end",(()=>n(Buffer.concat(t))))}else{r(`Could not fetch file: ${e.statusCode} ${e.statusMessage}`);e.resume()}})).on("error",(e=>r(e)))}))}function tc(e){return/^https:\/\//.test(e)?__non_webpack_require__("https").get:__non_webpack_require__("http").get}function nc(e){return/^data:[^;,]*(;base64)?,/.test(e)}function rc(e,{length:t}={}){return new Promise(((n,r)=>{const i=ic();i.open(e,((o,s)=>{o?r(o):i.stat(e,((o,a)=>{if(o)r(o);else{const o=Math.min(a.size,t!==void 0?t:a.size);const c=Buffer.alloc(o);const u={buffer:c,length:o};i.read(s,u,(t=>{t?r(t):i.close(s,(t=>{t&&console.warn(`Could not close file ${e}:`,t);n(c)}))}))}}))}))}))}function ic(){try{return __non_webpack_require__("fs")}catch(e){return}}function oc(e){return typeof File!=="undefined"&&e instanceof File}function sc(e){return new Promise(((t,n)=>{const r=new FileReader;r.onload=e=>t(e.target.result);r.onerror=()=>n(r.error);r.readAsArrayBuffer(e)}))}function ac(e,t){cc(e)&&(e=new Uint8Array(e).buffer);return fc(uc(e),t)}function cc(e){try{return Buffer.isBuffer(e)}catch(e){return false}}function uc(t){try{return new DataView(t)}catch(n){return new e(t)}}function fc(e,{expanded:t=false,async:n=false,includeUnknown:r=false,domParser:i}={expanded:false,async:false,includeUnknown:false,domParser:void 0}){let o=false;let s={};const u=[];const{fileType:f,fileDataOffset:l,jfifDataOffset:d,tiffHeaderOffset:p,iptcDataOffset:g,xmpChunks:m,iccChunks:h,mpfDataOffset:S,pngHeaderOffset:y,pngTextChunks:v,pngChunkOffsets:C,vp8xChunkOffset:U,gifHeaderOffset:E}=un.parseAppMarkers(e,n);if(I.USE_JPEG&&I.USE_FILE&&lc(l)){o=true;const n=Cr.read(e,l);t?s.file=n:s=c({},s,n)}if(I.USE_JPEG&&I.USE_JFIF&&dc(d)){o=true;const n=Lr.read(e,d);t?s.jfif=n:s=c({},s,n)}if(I.USE_EXIF&&pc(p)){o=true;const{tags:n,byteOrder:u}=or.read(e,p,r);if(n.Thumbnail){s.Thumbnail=n.Thumbnail;delete n.Thumbnail}if(t){s.exif=n;gc(s)}else s=c({},s,n);if(I.USE_TIFF&&I.USE_IPTC&&n["IPTC-NAA"]&&!mc(g)){const e=ai.read(n["IPTC-NAA"].value,0,r);t?s.iptc=e:s=c({},s,e)}if(I.USE_TIFF&&I.USE_XMP&&n.ApplicationNotes&&!hc(m)){const e=Bi.read(a(n.ApplicationNotes.value),void 0,i);if(t)s.xmp=e;else{delete e._raw;s=c({},s,e)}}if(I.USE_PHOTOSHOP&&n.ImageSourceData&&n.PhotoshopSettings){const e=Ho.read(n.PhotoshopSettings.value,r);t?s.photoshop=e:s=c({},s,e)}if(I.USE_TIFF&&I.USE_ICC&&n.ICC_Profile&&!Sc(h)){const e=Qo.read(n.ICC_Profile.value,[{offset:0,length:n.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);t?s.icc=e:s=c({},s,e)}if(I.USE_MAKER_NOTES&&n.MakerNote)if(Ic(n)){const i=ys.read(e,p,n.MakerNote.__offset,u,r);t?s.makerNotes=i:s=c({},s,i)}else if(yc(n)){const i=Ts.read(e,p,n.MakerNote.__offset,r);t?s.makerNotes=i:s=c({},s,i)}n.MakerNote&&delete n.MakerNote.__offset}if(I.USE_JPEG&&I.USE_IPTC&&mc(g)){o=true;const n=ai.read(e,g,r);t?s.iptc=n:s=c({},s,n)}if(I.USE_XMP&&hc(m)){o=true;const n=Bi.read(e,m,i);if(t)s.xmp=n;else{delete n._raw;s=c({},s,n)}}if((I.USE_JPEG||I.USE_WEBP)&&I.USE_ICC&&Sc(h)){o=true;const t=Qo.read(e,h,n);t instanceof Promise?u.push(t.then(A)):A(t)}if(I.USE_MPF&&vc(S)){o=true;const n=lr.read(e,S,r);t?s.mpf=n:s=c({},s,n)}if(I.USE_PNG&&I.USE_PNG_FILE&&Cc(y)){o=true;const n=Ns.read(e,y);if(t){s.png=s.png?c({},s.png,n):n;s.pngFile=n}else s=c({},s,n)}if(I.USE_PNG&&Uc(v)){o=true;const{readTags:t,readTagsPromise:i}=$s.read(e,v,n,r);T(t);i&&u.push(i.then((e=>e.forEach(T))))}if(I.USE_PNG&&Ec(C)){o=true;const n=la.read(e,C);t?s.png=s.png?c({},s.png,n):n:s=c({},s,n)}if(I.USE_WEBP&&bc(U)){o=true;const n=ya.read(e,U);t?s.riff=s.riff?c({},s.riff,n):n:s=c({},s,n)}if(I.USE_GIF&&Pc(E)){o=true;const n=Aa.read(e,E);t?s.gif=s.gif?c({},s.gif,n):n:s=c({},s,n)}const b=Ga.get(s,t);b&&(t?s.composite=b:s=c({},s,b));const P=(I.USE_JPEG||I.USE_WEBP)&&I.USE_EXIF&&I.USE_THUMBNAIL&&Oa.get(e,s.Thumbnail,p);if(P){o=true;s.Thumbnail=P}else delete s.Thumbnail;if(f){if(t){s.file||(s.file={});s.file.FileType=f}else s.FileType=f;o=true}if(!o)throw new Xa.MetadataMissingError;return n?Promise.all(u).then((()=>s)):s;function A(e){t?s.icc=e:s=c({},s,e)}function T(e){if(t){for(const t of["exif","iptc"]){const n=`__${t}`;if(e[n]){s[t]=s[t]?c({},s.exif,e[n]):e[n];delete e[n]}}s.png=s.png?c({},s.png,e):e;s.pngText=s.pngText?c({},s.png,e):e}else{s=c({},s,e.__exif?e.__exif:{},e.__iptc?e.__iptc:{},e);delete s.__exif;delete s.__iptc}}}function lc(e){return e!==void 0}function dc(e){return e!==void 0}function pc(e){return e!==void 0}function gc(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{};e.gps.Latitude=C(e.exif.GPSLatitude.value);e.exif.GPSLatitudeRef.value.join("")==="S"&&(e.gps.Latitude=-e.gps.Latitude)}catch(e){}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{};e.gps.Longitude=C(e.exif.GPSLongitude.value);e.exif.GPSLongitudeRef.value.join("")==="W"&&(e.gps.Longitude=-e.gps.Longitude)}catch(e){}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{};e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1];e.exif.GPSAltitudeRef.value===1&&(e.gps.Altitude=-e.gps.Altitude)}catch(e){}}}function mc(e){return e!==void 0}function hc(e){return Array.isArray(e)&&e.length>0}function Sc(e){return Array.isArray(e)&&e.length>0}function Ic(e){return e.Make&&e.Make.value&&Array.isArray(e.Make.value)&&e.Make.value[0]==="Canon"&&e.MakerNote&&e.MakerNote.__offset}function yc(e){const t="PENTAX ";return e.MakerNote.value.length>t.length&&a(e.MakerNote.value.slice(0,t.length))===t&&e.MakerNote.__offset}function vc(e){return e!==void 0}function Cc(e){return e!==void 0}function Uc(e){return e!==void 0}function Ec(e){return e!==void 0}function bc(e){return e!==void 0}function Pc(e){return e!==void 0}export{Ja as default,Ka as errors,Ya as load,fc as loadView};
//# sourceMappingURL=exif-reader.js.map
