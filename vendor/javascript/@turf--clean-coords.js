// @turf/clean-coords@7.3.0 downloaded from https://ga.jspm.io/npm:@turf/clean-coords@7.3.0/dist/esm/index.js

import{feature as r,lineString as t}from"@turf/helpers";import{getType as o,getCoords as e}from"@turf/invariant";import{booleanPointOnLine as n}from"@turf/boolean-point-on-line";function i(t,n={}){var i=typeof n==="object"?n.mutate:n;if(!t)throw new Error("geojson is required");var u=o(t);var s=[];switch(u){case"LineString":s=a(t,u);break;case"MultiLineString":case"Polygon":e(t).forEach((function(r){s.push(a(r,u))}));break;case"MultiPolygon":e(t).forEach((function(r){var t=[];r.forEach((function(r){t.push(a(r,u))}));s.push(t)}));break;case"Point":return t;case"MultiPoint":var f={};e(t).forEach((function(r){var t=r.join("-");if(!Object.prototype.hasOwnProperty.call(f,t)){s.push(r);f[t]=true}}));break;default:throw new Error(u+" geometry not supported")}if(t.coordinates){if(i===true){t.coordinates=s;return t}return{type:u,coordinates:s}}if(i===true){t.geometry.coordinates=s;return t}return r({type:u,coordinates:s},t.properties,{bbox:t.bbox,id:t.id})}function a(r,o){const i=e(r);if(i.length===2&&!u(i[0],i[1]))return i;const a=[];let s=0,f=1,p=2;a.push(i[s]);while(p<i.length){if(n(i[f],t([i[s],i[p]])))f=p;else{a.push(i[f]);s=f;f++;p=f}p++}a.push(i[f]);if(o==="Polygon"||o==="MultiPolygon"){if(n(a[0],t([a[1],a[a.length-2]]))){a.shift();a.pop();a.push(a[0])}if(a.length<4)throw new Error("invalid polygon, fewer than 4 points");if(!u(a[0],a[a.length-1]))throw new Error("invalid polygon, first and last points not equal")}return a}function u(r,t){return r[0]===t[0]&&r[1]===t[1]}var s=i;export{i as cleanCoords,s as default};

