import{feature as e,lineString as r,isObject as t,point as n}from"@turf/helpers";function o(e,r,t){if(e!==null){var n,i,a,l,s,u,f,c,g=0,v=0,y=e.type,h=y==="FeatureCollection",p=y==="Feature",d=h?e.features.length:1;for(var P=0;P<d;P++){f=h?e.features[P].geometry:p?e.geometry:e;c=!!f&&f.type==="GeometryCollection";s=c?f.geometries.length:1;for(var m=0;m<s;m++){var w=0;var b=0;l=c?f.geometries[m]:f;if(l!==null){u=l.coordinates;var k=l.type;g=!t||k!=="Polygon"&&k!=="MultiPolygon"?0:1;switch(k){case null:break;case"Point":if(r(u,v,P,w,b)===false)return false;v++;w++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(r(u[n],v,P,w,b)===false)return false;v++;k==="MultiPoint"&&w++}k==="LineString"&&w++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-g;i++){if(r(u[n][i],v,P,w,b)===false)return false;v++}k==="MultiLineString"&&w++;k==="Polygon"&&b++}k==="Polygon"&&w++;break;case"MultiPolygon":for(n=0;n<u.length;n++){b=0;for(i=0;i<u[n].length;i++){for(a=0;a<u[n][i].length-g;a++){if(r(u[n][i][a],v,P,w,b)===false)return false;v++}b++}w++}break;case"GeometryCollection":for(n=0;n<l.geometries.length;n++)if(o(l.geometries[n],r,t)===false)return false;break;default:throw new Error("Unknown Geometry Type")}}}}}}function i(e,r,t,n){var i=t;o(e,(function(e,n,o,a,l){i=n===0&&t===void 0?e:r(i,e,n,o,a,l)}),n);return i}function a(e,r){var t;switch(e.type){case"FeatureCollection":for(t=0;t<e.features.length;t++)if(r(e.features[t].properties,t)===false)break;break;case"Feature":r(e.properties,0);break}}function l(e,r,t){var n=t;a(e,(function(e,o){n=o===0&&t===void 0?e:r(n,e,o)}));return n}function s(e,r){if(e.type==="Feature")r(e,0);else if(e.type==="FeatureCollection")for(var t=0;t<e.features.length;t++)if(r(e.features[t],t)===false)break}function u(e,r,t){var n=t;s(e,(function(e,o){n=o===0&&t===void 0?e:r(n,e,o)}));return n}function f(e){var r=[];o(e,(function(e){r.push(e)}));return r}function c(e,r){var t,n,o,i,a,l,s,u,f,c,g=0,v=e.type==="FeatureCollection",y=e.type==="Feature",h=v?e.features.length:1;for(t=0;t<h;t++){l=v?e.features[t].geometry:y?e.geometry:e;u=v?e.features[t].properties:y?e.properties:{};f=v?e.features[t].bbox:y?e.bbox:void 0;c=v?e.features[t].id:y?e.id:void 0;s=!!l&&l.type==="GeometryCollection";a=s?l.geometries.length:1;for(o=0;o<a;o++){i=s?l.geometries[o]:l;if(i!==null)switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(i,g,u,f,c)===false)return false;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(r(i.geometries[n],g,u,f,c)===false)return false;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,g,u,f,c)===false)return false}g++}}function g(e,r,t){var n=t;c(e,(function(e,o,i,a,l){n=o===0&&t===void 0?e:r(n,e,o,i,a,l)}));return n}function v(r,t){c(r,(function(r,n,o,i,a){var l=r===null?null:r.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return t(e(r,o,{bbox:i,id:a}),n,0)!==false&&void 0}var s;switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon";break}for(var u=0;u<r.coordinates.length;u++){var f=r.coordinates[u];var c={type:s,coordinates:f};if(t(e(c,o),n,u)===false)return false}}))}function y(e,r,t){var n=t;v(e,(function(e,o,i){n=o===0&&i===0&&t===void 0?e:r(n,e,o,i)}));return n}function h(e,t){v(e,(function(e,n,i){var a=0;if(e.geometry){var l=e.geometry.type;if(l!=="Point"&&l!=="MultiPoint"){var s;var u=0;var f=0;var c=0;return o(e,(function(o,l,g,v,y){if(s===void 0||n>u||v>f||y>c){s=o;u=n;f=v;c=y;a=0}else{var h=r([s,o],e.properties);if(t(h,n,i,y,a)===false)return false;a++;s=o}}))!==false&&void 0}}}))}function p(e,r,t){var n=t;var o=false;h(e,(function(e,i,a,l,s){n=o===false&&t===void 0?e:r(n,e,i,a,l,s);o=true}));return n}function d(e,t){if(!e)throw new Error("geojson is required");v(e,(function(e,n,o){if(e.geometry!==null){var i=e.geometry.type;var a=e.geometry.coordinates;switch(i){case"LineString":if(t(e,n,o,0,0)===false)return false;break;case"Polygon":for(var l=0;l<a.length;l++)if(t(r(a[l],e.properties),n,o,l)===false)return false;break}}}))}function P(e,r,t){var n=t;d(e,(function(e,o,i,a){n=o===0&&t===void 0?e:r(n,e,o,i,a)}));return n}function m(e,n){n=n||{};if(!t(n))throw new Error("options is invalid");var o=n.featureIndex||0;var i=n.multiFeatureIndex||0;var a=n.geometryIndex||0;var l=n.segmentIndex||0;var s=n.properties;var u;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o);s=s||e.features[o].properties;u=e.features[o].geometry;break;case"Feature":s=s||e.properties;u=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=e;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var f=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":l<0&&(l=f.length+l-1);return r([f[l],f[l+1]],s,n);case"Polygon":a<0&&(a=f.length+a);l<0&&(l=f[a].length+l-1);return r([f[a][l],f[a][l+1]],s,n);case"MultiLineString":i<0&&(i=f.length+i);l<0&&(l=f[i].length+l-1);return r([f[i][l],f[i][l+1]],s,n);case"MultiPolygon":i<0&&(i=f.length+i);a<0&&(a=f[i].length+a);l<0&&(l=f[i][a].length-l-1);return r([f[i][a][l],f[i][a][l+1]],s,n)}throw new Error("geojson is invalid")}function w(e,r){r=r||{};if(!t(r))throw new Error("options is invalid");var o=r.featureIndex||0;var i=r.multiFeatureIndex||0;var a=r.geometryIndex||0;var l=r.coordIndex||0;var s=r.properties;var u;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o);s=s||e.features[o].properties;u=e.features[o].geometry;break;case"Feature":s=s||e.properties;u=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=e;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var f=u.coordinates;switch(u.type){case"Point":return n(f,s,r);case"MultiPoint":i<0&&(i=f.length+i);return n(f[i],s,r);case"LineString":l<0&&(l=f.length+l);return n(f[l],s,r);case"Polygon":a<0&&(a=f.length+a);l<0&&(l=f[a].length+l);return n(f[a][l],s,r);case"MultiLineString":i<0&&(i=f.length+i);l<0&&(l=f[i].length+l);return n(f[i][l],s,r);case"MultiPolygon":i<0&&(i=f.length+i);a<0&&(a=f[i].length+a);l<0&&(l=f[i][a].length-l);return n(f[i][a][l],s,r)}throw new Error("geojson is invalid")}export{f as coordAll,o as coordEach,i as coordReduce,s as featureEach,u as featureReduce,w as findPoint,m as findSegment,v as flattenEach,y as flattenReduce,c as geomEach,g as geomReduce,d as lineEach,P as lineReduce,a as propEach,l as propReduce,h as segmentEach,p as segmentReduce};

