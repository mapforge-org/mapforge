%nav.navbar.navbar-expand-sm.navbar-light.background-bright{class: "#{'fixed-top' if defined?(static) && static}"}
  .container-fluid
    %a.navbar-brand{href: frontpage_path}
      %img.mapforge-logo.me-2{ src: "/icons/mapforge-logo-header.png", alt: "Logo" }
      .mapforge-title.mapforge-font.white-shadow.d-none.d-sm-block{ href: "#" } Mapforge

    %button.navbar-toggler{ data: { 'controller': "header", 'action': "click->header#toggleNav" }, type: "button", "aria-controls": "navbar-dropdown", "aria-expanded": "false", "aria-label": "Toggle navigation" }
      %span.navbar-toggler-icon

    - # Desktop (>=sm, 574px)
    .d-none.d-sm-block
      %ul.navbar-nav.me-auto.mb-0.mt-1
        - if menu
          %li.nav-item
            %a.nav-link{ "aria-current": "page", href: maps_path }
              Map Gallery
          %li.nav-item
            %a.nav-link{ "aria-current": "page", href: docs_path }
              Tutorials

      - if create_button
        = link_to create_map_path, { class: 'me-4 btn btn-orange btn-create-map', data: { turbo_method: :post } } do
          %i.bi.bi-plus-square
          Create map

    - # Mobile (<sm, 574px)
    #navbar-dropdown.collapse.navbar-collapse
      %ul.navbar-nav.me-auto.mb-0.d-sm-none
        - if menu
          %li.nav-item
            = button_to maps_path, { method: :get, class: 'mb-2 btn btn-green w-100' } do
              %i.bi.bi-map.me-1
              Map Gallery
          
          - if @user
            %li.nav-item
              = button_to my_path, { method: :get, class: 'mb-2 btn btn-green w-100' } do
                %i.bi.bi-map.me-1
                = "Your maps (#{@user.maps_count})"

          - if @user&.admin?
            %li.nav-item
              = button_to admin_path, { method: :get, class: 'mb-2 btn btn-green w-100' } do
                %i.bi.bi-person-workspace.me-1
                Admin


        - if create_button
          %li.nav-item
            = button_to create_map_path, { class: 'mb-2 btn btn-orange btn-create-map w-100', data: { turbo_method: :post } } do
              %i.bi.bi-plus-square.me-1
              Create map

        - if @user  
          %li.nav-item
            = button_to logout_path, { method: :get, class: 'mb-2 btn btn-green btn-create-map w-100', data: { turbo: false } } do
              %i.bi.bi-box-arrow-in-left.me-1
              Logout


    - if @user
      .dropdown.profile-dropdown

        - # Mobile (<sm, 574px)
        %a.d-sm-none{ type: "button", "data-bs-toggle": "collapse", "data-bs-target": "#navbar-dropdown", "aria-controls": "navbar-dropdown", "aria-expanded": "false", "aria-label": "Toggle navigation" }
          - if @user.image
            %img.profile-image{ src: @user.image, alt: 'Profile', crossorigin: "anonymous", title: @user.email }
          - else
            %i.profile-image.fs-4.bi.bi-person-circle
        
        - # Desktop (>=sm, 574px)
        %a.d-none.d-sm-block.dropdown-toggle{ href: "#", id: "navbarDropdown", role: "button", "data-bs-toggle": "dropdown", "aria-expanded": "false" }<
          - if @user.image
            %img.profile-image{ src: @user.image, alt: 'Profile', crossorigin: "anonymous", title: @user.email }
          - else
            %i.profile-image.fs-4.bi.bi-person-circle
        %ul.dropdown-menu.desktop{ "aria-labelledby": "navbarDropdown" }
          - if @user.admin?
            %li
              %a.dropdown-item{ href: "/admin" }
                %i.bi.bi-person-workspace
                Admin
          %li
            = link_to my_path, { class: 'dropdown-item' } do
              %i.bi.bi-map
              = "Your maps (#{@user.maps_count})"
          %li
            = link_to logout_path, { class: 'dropdown-item', data: { turbo: false } } do
              %i.bi.bi-box-arrow-in-left
              Logout
    - else
      = link_to login_path, { class: 'login-link' } do
        %i.bi.bi-person-circle
        Login

